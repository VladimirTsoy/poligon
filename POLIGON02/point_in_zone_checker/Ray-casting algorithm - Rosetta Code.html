<!DOCTYPE html>
<!-- saved from url=(0058)https://rosettacode.org/wiki/Ray-casting_algorithm#C.2B.2B -->
<html lang="en" dir="ltr" class="client-js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Ray-casting algorithm - Rosetta Code</title>
<script type="text/javascript" async="" src="./Ray-casting algorithm - Rosetta Code_files/ga.js.Без названия"></script><script async="" src="./Ray-casting algorithm - Rosetta Code_files/analytics.js.Без названия"></script><script src="./Ray-casting algorithm - Rosetta Code_files/7qaJovFEYxjqsAZAxmfekTkNrFg.js.Без названия"></script><script type="text/javascript">document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script type="text/javascript">window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Ray-casting_algorithm","wgTitle":"Ray-casting algorithm","wgCurRevisionId":262596,"wgRevisionId":262596,"wgArticleId":4235,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Programming Tasks","Classic CS problems and programs","WikipediaSourced","Ada","ANSI Standard BASIC","AutoHotkey","C","C++","CoffeeScript","Common Lisp","D","Factor","Fortran","FreeBASIC","Go","Haskell","J","Java","JavaScript","Julia","Kotlin","Liberty BASIC","OCaml","Perl","Perl 6","Phix","PicoLisp","PureBasic","Python","R","Racket","REXX","Rust","Scala","Smalltalk","Tcl","Ursala","Visual Basic .NET","Zkl","Lilypond/Omit","Geometry"],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January",
"February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Ray-casting_algorithm","wgRelevantArticleId":4235,"wgIsProbablyEditable":!0,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/mw/extensions/SemanticForms","sdgDownArrowImage":"/mw/extensions/SemanticDrilldown/skins/down-arrow.png","sdgRightArrowImage":"/mw/extensions/SemanticDrilldown/skins/right-arrow.png"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.smw.style","ext.smw.tooltips","mediawiki.page.startup","mediawiki.legacy.wikibits"]);
} );</script>
<link rel="stylesheet" href="./Ray-casting algorithm - Rosetta Code_files/load.php">
<style>
.qtip,.qtip{position:absolute;left:-28000px;top:-28000px;display:none;max-width:280px;min-width:50px;font-size:10.5px;line-height:12px;direction:ltr}.qtip-content{position:relative;padding:5px 9px;overflow:hidden;text-align:left;word-wrap:break-word}.qtip-titlebar{position:relative;padding:5px 35px 5px 10px;overflow:hidden;border-width:0 0 1px;font-weight:bold}.qtip-titlebar + .qtip-content{border-top-width:0 !important} .qtip-close{position:absolute;right:-9px;top:-9px;cursor:pointer;outline:medium none;border-width:1px;border-style:solid;border-color:transparent}.qtip-titlebar .qtip-close{right:4px;top:50%;margin-top:-9px}* html .qtip-titlebar .qtip-close{top:16px} .qtip-titlebar .ui-icon,.qtip-icon .ui-icon{display:block;text-indent:-1000em;direction:ltr;vertical-align:middle}.qtip-icon,.qtip-icon .ui-icon{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;text-decoration:none}.qtip-icon .ui-icon{width:18px;height:14px;text-align:center;text-indent:0;font:normal bold 10px/13px Tahoma,sans-serif;color:inherit;background:transparent none no-repeat -100em -100em} .qtip-focus{} .qtip-hover{} .qtip-default{border-width:1px;border-style:solid;border-color:#F1D031;background-color:#FFFFA3;color:#555}.qtip-default .qtip-titlebar{background-color:#FFEF93}.qtip-default .qtip-icon{border-color:#CCC;background:#F1F1F1;color:#777}.qtip-default .qtip-titlebar .qtip-close{border-color:#AAA;color:#111} .qtip-light{background-color:white;border-color:#E2E2E2;color:#454545}.qtip-light .qtip-titlebar{background-color:#f1f1f1} .qtip-dark{background-color:#505050;border-color:#303030;color:#f3f3f3}.qtip-dark .qtip-titlebar{background-color:#404040}.qtip-dark .qtip-icon{border-color:#444}.qtip-dark .qtip-titlebar .ui-state-hover{border-color:#303030} .qtip-cream{background-color:#FBF7AA;border-color:#F9E98E;color:#A27D35}.qtip-cream .qtip-titlebar{background-color:#F0DE7D}.qtip-cream .qtip-close .qtip-icon{background-position:-82px 0} .qtip-red{background-color:#F78B83;border-color:#D95252;color:#912323}.qtip-red .qtip-titlebar{background-color:#F06D65}.qtip-red .qtip-close .qtip-icon{background-position:-102px 0}.qtip-red .qtip-icon{border-color:#D95252}.qtip-red .qtip-titlebar .ui-state-hover{border-color:#D95252} .qtip-green{background-color:#CAED9E;border-color:#90D93F;color:#3F6219}.qtip-green .qtip-titlebar{background-color:#B0DE78}.qtip-green .qtip-close .qtip-icon{background-position:-42px 0} .qtip-blue{background-color:#E5F6FE;border-color:#ADD9ED;color:#5E99BD}.qtip-blue .qtip-titlebar{background-color:#D0E9F5}.qtip-blue .qtip-close .qtip-icon{background-position:-2px 0} .qtip-shadow{-webkit-box-shadow:1px 1px 3px 1px rgba(0,0,0,0.15);-moz-box-shadow:1px 1px 3px 1px rgba(0,0,0,0.15);box-shadow:1px 1px 3px 1px rgba(0,0,0,0.15)} .qtip-rounded,.qtip-tipsy,.qtip-bootstrap{-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px} .qtip-youtube{-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 3px #333;-moz-box-shadow:0 0 3px #333;box-shadow:0 0 3px #333;color:white;border-width:0;background:#4A4A4A;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#4A4A4A),color-stop(100%,black));background-image:-webkit-linear-gradient(top,#4A4A4A 0,black 100%);background-image:-moz-linear-gradient(top,#4A4A4A 0,black 100%);background-image:-ms-linear-gradient(top,#4A4A4A 0,black 100%);background-image:-o-linear-gradient(top,#4A4A4A 0,black 100%)}.qtip-youtube .qtip-titlebar{background-color:#4A4A4A;background-color:rgba(0,0,0,0)}.qtip-youtube .qtip-content{padding:.75em;font:12px arial,sans-serif;filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#4a4a4a,EndColorStr=#000000);-ms-filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=#4a4a4a,EndColorStr=#000000);"}.qtip-youtube .qtip-icon{border-color:#222}.qtip-youtube .qtip-titlebar .ui-state-hover{border-color:#303030} .qtip-jtools{background:#232323;background:rgba(0,0,0,0.7);background-image:-webkit-gradient(linear,left top,left bottom,from(#717171),to(#232323));background-image:-moz-linear-gradient(top,#717171,#232323);background-image:-webkit-linear-gradient(top,#717171,#232323);background-image:-ms-linear-gradient(top,#717171,#232323);background-image:-o-linear-gradient(top,#717171,#232323);border:2px solid #ddd;border:2px solid rgba(241,241,241,1);-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 12px #333;-moz-box-shadow:0 0 12px #333;box-shadow:0 0 12px #333} .qtip-jtools .qtip-titlebar{background-color:transparent;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#717171,endColorstr=#4A4A4A);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#717171,endColorstr=#4A4A4A)"}.qtip-jtools .qtip-content{filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#4A4A4A,endColorstr=#232323);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#4A4A4A,endColorstr=#232323)"}.qtip-jtools .qtip-titlebar,.qtip-jtools .qtip-content{background:transparent;color:white;border:0 dashed transparent}.qtip-jtools .qtip-icon{border-color:#555}.qtip-jtools .qtip-titlebar .ui-state-hover{border-color:#333} .qtip-cluetip{-webkit-box-shadow:4px 4px 5px rgba(0,0,0,0.4);-moz-box-shadow:4px 4px 5px rgba(0,0,0,0.4);box-shadow:4px 4px 5px rgba(0,0,0,0.4);background-color:#D9D9C2;color:#111;border:0 dashed transparent}.qtip-cluetip .qtip-titlebar{background-color:#87876A;color:white;border:0 dashed transparent}.qtip-cluetip .qtip-icon{border-color:#808064}.qtip-cluetip .qtip-titlebar .ui-state-hover{border-color:#696952;color:#696952} .qtip-tipsy{background:black;background:rgba(0,0,0,.87);color:white;border:0 solid transparent;font-size:11px;font-family:'Lucida Grande',sans-serif;font-weight:bold;line-height:16px;text-shadow:0 1px black}.qtip-tipsy .qtip-titlebar{padding:6px 35px 0 10;background-color:transparent}.qtip-tipsy .qtip-content{padding:6px 10}.qtip-tipsy .qtip-icon{border-color:#222;text-shadow:none}.qtip-tipsy .qtip-titlebar .ui-state-hover{border-color:#303030} .qtip-tipped{border:3px solid #959FA9;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;background-color:#F9F9F9;color:#454545;font-weight:normal;font-family:serif}.qtip-tipped .qtip-titlebar{border-bottom-width:0;color:white;background:#3A79B8;background-image:-webkit-gradient(linear,left top,left bottom,from(#3A79B8),to(#2E629D));background-image:-webkit-linear-gradient(top,#3A79B8,#2E629D);background-image:-moz-linear-gradient(top,#3A79B8,#2E629D);background-image:-ms-linear-gradient(top,#3A79B8,#2E629D);background-image:-o-linear-gradient(top,#3A79B8,#2E629D);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#3A79B8,endColorstr=#2E629D);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#3A79B8,endColorstr=#2E629D)"}.qtip-tipped .qtip-icon{border:2px solid #285589;background:#285589}.qtip-tipped .qtip-icon .ui-icon{background-color:#FBFBFB;color:#555} .qtip-bootstrap{ font-size:14px;line-height:20px;color:#333333; padding:1px;background-color:#ffffff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box}.qtip-bootstrap .qtip-titlebar{ padding:8px 14px;margin:0;font-size:14px;font-weight:normal;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;-webkit-border-radius:5px 5px 0 0;-moz-border-radius:5px 5px 0 0;border-radius:5px 5px 0 0}.qtip-bootstrap .qtip-titlebar .qtip-close{ right:11px;top:45%;border-style:none}.qtip-bootstrap .qtip-content{ padding:9px 14px}.qtip-bootstrap .qtip-icon{ background:transparent}.qtip-bootstrap .qtip-icon .ui-icon{ width:auto;height:auto; float:right;font-size:20px;font-weight:bold;line-height:18px;color:#000000;text-shadow:0 1px 0 #ffffff;opacity:0.2;filter:alpha(opacity=20)}.qtip-bootstrap .qtip-icon .ui-icon:hover{ color:#000000;text-decoration:none;cursor:pointer;opacity:0.4;filter:alpha(opacity=40)} .qtip:not(.ie9haxors) div.qtip-content,.qtip:not(.ie9haxors) div.qtip-titlebar{filter:none;-ms-filter:none} .qtip .qtip-tip{margin:0 auto;overflow:hidden;z-index:10}.qtip .qtip-tip,.qtip .qtip-tip .qtip-vml{position:absolute;color:#123456;background:transparent;border:0 dashed transparent}.qtip .qtip-tip canvas{top:0;left:0}.qtip .qtip-tip .qtip-vml{behavior:url("https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/jquery/#default#VML");display:inline-block;visibility:visible} #qtip-overlay{position:fixed;left:-10000em;top:-10000em} #qtip-overlay.blurs{cursor:pointer} #qtip-overlay div{position:absolute;left:0;top:0;width:100%;height:100%;background-color:black;opacity:0.7;filter:alpha(opacity=70);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)"} .qtipmodal-ie6fix{position:absolute !important}
div.smwtt{color:#000000} span.smwttpersist span.smwttcontent{color:#888888;font-style:italic;font-size:90%} span.smwttinline span.smwttcontent{display:none;speak:none} span.smwtticon{display:none} span.smwttactivepersist{cursor:help;color:#0000C8} span.smwttactiveinline{color:#BB7700;text-decoration:none} img.smwttimg{padding-right:5px;padding-left:4px} .smwttcontent{display:none} .smwtticon{padding:14px 12px 0 0;white-space:nowrap;margin-bottom:-1px} .smwtticon.info{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QAQACXAOIX6M4XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1woNCAQvupvvrgAAAgpJREFUKBUFwTtME3EAwOHf3f961+vd9Sh9HEVINUrFhAbRmCgGo9FodCFMLhomJ6MmJsbF1Z2ExMHBUQc3BmOigyERB0ElQHgECRYECrRC26OPa3t+nwQAAI7aO/K458yJeK8qOA74dY/1hbWdxZWJsVUoeAAKAImh2NDdR/duD54cdRLRdMQydB84KJaPzufyyx+6Tr+Zej/2jr1vBUHiin3j/pPnwzcvPMv0OKlb/YlAT4cupR1d0lRNNWwrmUhEB+tmSl7/vTktMiNPhy9dvviyM2FYnZEgpRp8WS3htaC/W2du64iWLAUl1RgoY84qiiJdU03TKFR9vv+tIZQGsiTojqg0WrDtwlHVR7PscCDAVaXoEV3KN+hCELUVVBFgNBOkXZd5NVPhoC6TL0J2v8FhnbiCUBtlX2WzInB1jZiuEQ4KfhVgrR7ErUO+UsMlgCwUT6FRW9YU2TdMXbIsjbglmD+EPQ9iYQFo1Go6Xq3c8hveolze2/hY3M6u2IaGHRI4JpxthyRVHAPCIQXbDFLcyi6WcuufhLs2lXMxsy0tkk51tDkdYVU6ZkosbFXxAwF290vN6amfM0uf374oTI5/lQAAYfddP5e58/BBuivel4qF4k0f/uy7u0sbubn5ifHX7srkLNCUAAAAQtFUW/LUQLI9HHGaPv6/Yj63s/pju1LYPAQA+A8p2cUweh5dZAAAAABJRU5ErkJggg==) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/info.png?34b97) no-repeat left bottom!ie}.smwtticon.service{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QAQACXAOIX6M4XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1woNCAQvupvvrgAAAgpJREFUKBUFwTtME3EAwOHf3f961+vd9Sh9HEVINUrFhAbRmCgGo9FodCFMLhomJ6MmJsbF1Z2ExMHBUQc3BmOigyERB0ElQHgECRYECrRC26OPa3t+nwQAAI7aO/K458yJeK8qOA74dY/1hbWdxZWJsVUoeAAKAImh2NDdR/duD54cdRLRdMQydB84KJaPzufyyx+6Tr+Zej/2jr1vBUHiin3j/pPnwzcvPMv0OKlb/YlAT4cupR1d0lRNNWwrmUhEB+tmSl7/vTktMiNPhy9dvviyM2FYnZEgpRp8WS3htaC/W2du64iWLAUl1RgoY84qiiJdU03TKFR9vv+tIZQGsiTojqg0WrDtwlHVR7PscCDAVaXoEV3KN+hCELUVVBFgNBOkXZd5NVPhoC6TL0J2v8FhnbiCUBtlX2WzInB1jZiuEQ4KfhVgrR7ErUO+UsMlgCwUT6FRW9YU2TdMXbIsjbglmD+EPQ9iYQFo1Go6Xq3c8hveolze2/hY3M6u2IaGHRI4JpxthyRVHAPCIQXbDFLcyi6WcuufhLs2lXMxsy0tkk51tDkdYVU6ZkosbFXxAwF290vN6amfM0uf374oTI5/lQAAYfddP5e58/BBuivel4qF4k0f/uy7u0sbubn5ifHX7srkLNCUAAAAQtFUW/LUQLI9HHGaPv6/Yj63s/pju1LYPAQA+A8p2cUweh5dZAAAAABJRU5ErkJggg==) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/info.png?34b97) no-repeat left bottom!ie}.smwtticon.warning{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZ1JREFUKFOVy79rE3EcxvH39+7y8/q9pF4S0xi0mEiaMxV68Yxg8PeiVyhV6iCIQhErHUScFJxcHAX/Azf/AgWXWlsUhyrYioMiqKgoiEgrJTH3cSuldvE9Pg8vkw3Nt6lfHuZ68g9fnv/k2/pPRDDWD098bD1gTO4cdS+NNowp38ZhQ2tgZgQSWo3kDgyPpU/esSuHd4fnK6o1lERtCuIp0tmGO73sHavevf8B8Y7uaDT7pwMXvSmwEkbgNHeFb1eLPH22wNJKnka7enxAG+1/wKxPpq+SuuaeOKSzuSQxq0vGjZML99vj+xJXDmoKa2DOx0znOVUcL7fNrXl8v0OtZhIEv1GFFLUJt3XW43TRJAZgGBal/lbsjN0sZeENIkuEoQUsAq/RQcZpHjEnzpUpA/DqAld/zOjVqOdJFO2RuXlPhuo5efBwUKJou0S9gvx6HO/cG+OmiGD1FdSU3tZNyNdPAFQd4cbFHvUty8jnCOhhl6JYfZBJ4JY1+1IeObc770S6ChClQCvhxaKwEAEISqE+vuf7XkCJCP/TX7cEexPi9whUAAAAAElFTkSuQmCC) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/warning.png?06a3c) no-repeat left bottom!ie}.smwtticon.note{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgtJREFUeNokUctqU1EUXefk5iY3D2MrSWOamyq9jYO2BovUR41O1Iykov6Bc6WDDh36A4oKnYkORZBCoA6KI1GrEKhoFWOo1qhJk6Z539c57sTB5gzOWns9NpMA3KCK0s0TsHwiBsW3qPi0OYerbmP89IaVnFvtMn/dmEginU5DITyYLSA4y40embp3MDWVVoNhgKvot1sob699/OqdvM0MY32AVTrZWZhhfnEsk85HEikOxoERnbYwBLxeGNH4jK/wdq1W1Bd7h8fySnlei4WT0ZV4ROWivQt4A+AzV0DrIV8/AtQA9Onjyt7G6spmOJHhb6IXrkbCnqOyuw+YNL0aTRPSpOnVidgE7A70Q/7x+pf315Wgph1TpAVBOcApktUBnN7/t9/AoBT6REAl8f3dBcW07R1pdSGkSvaJIBzIWpHUWkRqDrNAWENFIWJBZafWKZgjbWghDZIRgUK7Hx4PugNzXSK1wZmLVq0CO5ot8kw2Vyg70U+M/Eu7D0lWPLm78GSXKEOD7JlAu4rvTVWwmPGc/frzF63S5kIgv7SeOGCp0usHUmfAhAtW3SIdga2ffZTnl++nZk/dYlJKkDBePXtyOfb56cO4W5rUWH9YQEcEsI2U+9u48WD63KVlY0K3hpeWjgMxqr+snr9zslL5do3t/ThLnYXsUKLIY8YLj22+Y441gOKfAAMAeeDgUIIDAXwAAAAASUVORK5CYII=) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/note.png?3c504) no-repeat left bottom!ie}  span.smwbuiltin,span.smwttactiveinline span.smwbuiltin{font-style:italic} div.smwpre{white-space:pre;font-family:monospace;padding:1em;border:1px dashed #2f6fab;color:black;background-color:#f9f9f9;line-height:1.1em;margin-bottom:0.5em;margin-top:0.5em} #smwfootbr{clear:both} span.smwsortkey{display:none} a.sortheader:hover{text-decoration:none} div.smwtimeline{border:1px solid #AAAAAA;background-color:#F9F9F9;  }span.smwtlevent,span.smwtlband,span.smwtlsize,span.smwtlposition{display:none;speak:none}span.smwtlcomment{font-style:italic;padding:5px} div.smwfact{clear:both;background-color:#F9F9F9;padding:5px;margin-top:1em;border:1px solid #AAAAAA;font-size:95%}div.smwfact td,div.smwfact tr,div.smwfact table{background-color:#F9F9F9}span.smwfactboxhead{font-size:110%;font-weight:bold;float:left}table.smwfacttable{border-top:1px dotted #AAAAAA;width:100%;clear:both}td.smwpropname,th.smwpropname,td.smwspecname{text-align:right;vertical-align:top;padding-right:1em}td.smwprops,td.smwspecs{vertical-align:top;width:75%}div.smwhr hr{background-color:#DDDDDD;color:#DDDDDD} span.smwwarning{color:#888888;font-style:italic;font-size:90%} span.smwsearchicon{padding-right:16px;margin-right:2px;color:#888888;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAABC1BMVEU+S114jayTpb6Im7eMn7qhsceBlbOYqcKXp8GDl7N2i6rJ0uCYqcJogKB9kq+KnLipt81qgKF8kK9qgKF4jayntstheJpsgqOSo75RaIxWbpCIm7fAy9tlfJ5keptedZdHXX5bcpWBlbOersajssmVp79lfJ5thKN2i6phd5lTa45GW3lPZ4plfJ5le5xRaYxbcpV3jKt2i6pWbpBKYoVOZolSao2HmrZ4jaxTa45JYYRJYYSHmrZedZdFWnhTa45ieZtVbZCzv9Lm6/Ha4Onp7fKks8rb4uvf5e3h5u7X3um2wtXQ2OTAy9vW3efl6fCmtcrJ0uDGz96jssm5xdaruc6uu8+9yNnt8PXd7KeZAAAAQnRSTlMACfbevtlP8sRPTv2lFfRF2Cz1A7jZLdG4HFbm/q8vBAxjxO/syrHaxk0EByM4NyUrutRNBAI6xeJdADjU4QFO3NoNTLabAAAAeElEQVQIHQXBvQ7BUACA0e+7P020EQsDC4NBYrZJ38BTewcmg8XGomnjRso50QlUuSkA1p9TenF2+oRUH7/DzMoChJJH3n2bEpDS0CS7kAVCntd9txhjBFzp7he86h03qqp6kb2qbm8qABy06Y0A8FjHcTkIANCqf7L2G5qa4UzTAAAAAElFTkSuQmCC) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/searchgray_iconsmall.png?bbd58) center right no-repeat!ie}#bodyContent span.smwsearch a{padding-right:16px;margin-right:2px;color:#888888;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAABC1BMVEU+S114jayTpb6Im7eMn7qhsceBlbOYqcKXp8GDl7N2i6rJ0uCYqcJogKB9kq+KnLipt81qgKF8kK9qgKF4jayntstheJpsgqOSo75RaIxWbpCIm7fAy9tlfJ5keptedZdHXX5bcpWBlbOersajssmVp79lfJ5thKN2i6phd5lTa45GW3lPZ4plfJ5le5xRaYxbcpV3jKt2i6pWbpBKYoVOZolSao2HmrZ4jaxTa45JYYRJYYSHmrZedZdFWnhTa45ieZtVbZCzv9Lm6/Ha4Onp7fKks8rb4uvf5e3h5u7X3um2wtXQ2OTAy9vW3efl6fCmtcrJ0uDGz96jssm5xdaruc6uu8+9yNnt8PXd7KeZAAAAQnRSTlMACfbevtlP8sRPTv2lFfRF2Cz1A7jZLdG4HFbm/q8vBAxjxO/syrHaxk0EByM4NyUrutRNBAI6xeJdADjU4QFO3NoNTLabAAAAeElEQVQIHQXBvQ7BUACA0e+7P020EQsDC4NBYrZJ38BTewcmg8XGomnjRso50QlUuSkA1p9TenF2+oRUH7/DzMoChJJH3n2bEpDS0CS7kAVCntd9txhjBFzp7he86h03qqp6kb2qbm8qABy06Y0A8FjHcTkIANCqf7L2G5qa4UzTAAAAAElFTkSuQmCC) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/searchgray_iconsmall.png?bbd58) center right no-repeat!ie}#bodyContent span.smwsearch a:hover{text-decoration:none;color:#0000FF;padding-right:18px;margin-right:0px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAALySURBVDgRlcFraNVlHMDx7+95nv/zP+d/LnObeVtz2uyCrRUVDAIHMbIXltUgKRYR7kWvupjYDSEkgkgoKCiJfGeRzqw0CvYuahBWyrZWuWihuWNrZ+e2c87OZf//U1DB8EXU52P27XuV9takiiVS95ZjV+xdjK3uxbO0sFi15ewnlBYO1pZqP9YbTZQSLmeUOF1eNs+fj219QXdt1i2rfXwPlpxKho3qbpme3B7+/N2wUoyKCJcz9VB2ZFfdcKDtxh7p3hiRiMFSDfKFJjadwF/fd+V8pfhmYXK83ynJgLCSKanU47Et18qmDsc1axXtAlPzEekOS7XhSK3SmNt6uuemJnc2K5VDog0rmaptvWXtmgRBLKJNBL/h8DyhPRBqScGKI31dB2c8c2exsHhIW8tKZtmm/MBGFIohZ2oRQaDYkFYECgLAOjBa0ajVk8VSGc+3rGSa+Us18XQ8bIREgSKIC74G5aAdsEAjjCgXioXSYgVTX0bE8Q+zMD0xVs2V7tKtCepNiJRQB1JAClgjwskvvuXCzOypWn2ZeLiEA5wD58DkZs69fO7UyYGBPQ/FYxoi51D8JRBhNl/i05FRWlpaLtzReZbOxiSzRcNcCXIVMErL2E+fffSYNe61/t33pUxbEgeIwOmpGY6/fQxj4mzrTe/vyUz0zzflLU/CeSOgcRhRiqhZPzx+/OjEr998tXdDd2dfPBHT1flc4eL0Lyc6OzeeXt9WHu52Xw5etTk9UP0+f2szsg87XMEhGP4kWiNEXxczmQfERQSpBIXMHKVcka1XO/QP76/rvr9rsOf2IezIu3f/PpY/8lvRewTIGv4mImjPw/MtnvXwYhbtB9jqefzKxaMfj+R74+u6nrh+1xDN8MiO7Gj+8ELZDhv+lcOJRhtTuZRt7Hn9xQ/do88MPnnz0BAPyns73ziRf8fwH/lWu9mF5acPHvggevalXU+137QN9fn4PYb/wfN0M1cKn3tl/7FNbVt6tk9L39k/AH8KLAsrDQkDAAAAAElFTkSuQmCC) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/search_icon.png?a5d66) center right no-repeat!ie}#bodyContent span.swmfactboxheadbrowse a{padding-right:16px;margin-right:2px;color:#000000;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAA5FBMVEUAAADb3uv///+gqcBJYqGTmq24v9KJkamboLBtfqOnrbuSmqyqr7yVnK3o6e3n6OrKzdaWna7O0NWMlKiQl6qWm6yRma3DxczEyM+Olqyeo7J+iaamq7qZoLGMlKrg4eiYobqFjqfBxMyQl6hXbaGXnK+hprmcobPEx9BZbaGkqriIkayjp7d1g6iztsSytsZzf6GcobSaobjq6++Umq5abZ6aoLJre6NqeqJ7hqfg4umvtsp0g6h9iaff4el3hKVld6aUoL6wt8meo7SXnbCUm66Jkqnq6+64usRfcqOxs8Dm5+teFG05AAAAAXRSTlMAQObYZgAAAH9JREFUeF4dymMSRDEABOGZ5HFt27Zt3v8+m833r6saSqDl6aSC0ELhXN7r80egVBYZRmOMJ5LAIV0lsy55LRRRKlNYbs0SrDfQpBCybUgh2EXvH4aOPgZDtRkjtY0nmM7m5HtJrtYbYLvb07Z5PJ2hXMybad4fEtrz5TifL4AfAxMLmJTt7hwAAAAASUVORK5CYII=) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/browse_iconsmall.png?9997a) center right no-repeat!ie}#bodyContent span.swmfactboxheadbrowse a:hover{text-decoration:none;color:#0000FF;padding-right:18px;margin-right:0px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAA81BMVEUAAADByOQOLn7///8BInfg5O2xuthsf7ODk8CmqbEnQ4slQYoYNYJqea6BhZaSlJ9kbo5fc6xld62/v8Fnea6BhZdbb6lKY6axsrWIjJe/wMQ6UZOCkMVoeq6Gk79BWZpBWJqCkr4uSo8mRI8PLnqio6plcppIXp+LjprFxsgmQYMrRo4nRJI6TX+ytLyKl8xseah7ir9cbqUDJXeJl8xWbLBue6xPZaeYm6V+hqCLl841S34MLXwsSZJVaasSMYBcaYZUZphLYqBsfrFKYaB3iLcwS5EvSpFjeK1neq4zTpE2ToxQaKlSXoIMKW9idKyur7PDoCJEAAAAAXRSTlMAQObYZgAAAJtJREFUGFdlT8USg1AQ292HQ93d3d3dvf//NYWBHhhyS2ZiAAYCnpC7GoU/al5XsjPs9V9fk8tEPn8q+AlH6jGDxxMrwnQmm8N8oVjShXLljXhS1ANio9kCaK+7yIQ9aUeB4XgyhdkcGZOWA44kxnC0hZ3OeXHDcSTyurJwCg6LGXom7WKFmrVXRb1Ztcawu20YyI+nbbrznP3+D9crFuL3dLY6AAAAAElFTkSuQmCC) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/browse_icon.png?67c46) center right no-repeat!ie}#bodyContent span.smwbrowse a{padding-right:16px;margin-right:2px;color:#888888;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAA5FBMVEUAAADb3uv///+gqcBJYqGTmq24v9KJkamboLBtfqOnrbuSmqyqr7yVnK3o6e3n6OrKzdaWna7O0NWMlKiQl6qWm6yRma3DxczEyM+Olqyeo7J+iaamq7qZoLGMlKrg4eiYobqFjqfBxMyQl6hXbaGXnK+hprmcobPEx9BZbaGkqriIkayjp7d1g6iztsSytsZzf6GcobSaobjq6++Umq5abZ6aoLJre6NqeqJ7hqfg4umvtsp0g6h9iaff4el3hKVld6aUoL6wt8meo7SXnbCUm66Jkqnq6+64usRfcqOxs8Dm5+teFG05AAAAAXRSTlMAQObYZgAAAH9JREFUeF4dymMSRDEABOGZ5HFt27Zt3v8+m833r6saSqDl6aSC0ELhXN7r80egVBYZRmOMJ5LAIV0lsy55LRRRKlNYbs0SrDfQpBCybUgh2EXvH4aOPgZDtRkjtY0nmM7m5HtJrtYbYLvb07Z5PJ2hXMybad4fEtrz5TifL4AfAxMLmJTt7hwAAAAASUVORK5CYII=) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/browse_iconsmall.png?9997a) center right no-repeat!ie}#bodyContent span.smwbrowse a:hover{text-decoration:none;color:#0000FF;padding-right:18px;margin-right:0px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAA81BMVEUAAADByOQOLn7///8BInfg5O2xuthsf7ODk8CmqbEnQ4slQYoYNYJqea6BhZaSlJ9kbo5fc6xld62/v8Fnea6BhZdbb6lKY6axsrWIjJe/wMQ6UZOCkMVoeq6Gk79BWZpBWJqCkr4uSo8mRI8PLnqio6plcppIXp+LjprFxsgmQYMrRo4nRJI6TX+ytLyKl8xseah7ir9cbqUDJXeJl8xWbLBue6xPZaeYm6V+hqCLl841S34MLXwsSZJVaasSMYBcaYZUZphLYqBsfrFKYaB3iLcwS5EvSpFjeK1neq4zTpE2ToxQaKlSXoIMKW9idKyur7PDoCJEAAAAAXRSTlMAQObYZgAAAJtJREFUGFdlT8USg1AQ292HQ93d3d3dvf//NYWBHhhyS2ZiAAYCnpC7GoU/al5XsjPs9V9fk8tEPn8q+AlH6jGDxxMrwnQmm8N8oVjShXLljXhS1ANio9kCaK+7yIQ9aUeB4XgyhdkcGZOWA44kxnC0hZ3OeXHDcSTyurJwCg6LGXom7WKFmrVXRb1Ztcawu20YyI+nbbrznP3+D9crFuL3dLY6AAAAAElFTkSuQmCC) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/browse_icon.png?67c46) center right no-repeat!ie}#bodyContent span.smwmap a{padding-right:20px;color:#888888;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANkE3LLaAgAAAzBJREFUOBGlwTtsGwUAgOH/zufHOe9zHBzsJM6DhpRUCWmjCiolKgOiS6VKrWBghSUswEAlJjYGRlQECypQhoIEAqlNuwSiJhSqkJAqbR40pnbjR/w6+x72+Xw+itgqMfF98D8JPCn2thwfDZ9/cXro7LOjfSflgLetpBoP1u9llm7/kbqirn+wyX/pmLz4wvsfXV9PplW30XBcu+m4dtNxrUbTNcyGu7r2sH72jc8/hHmJJwUm3pu79OUvVcO03ZJad1PpirtxL+3e2Uy5v24k3b1EwVWrlltW6+75hS++hgseHvPwjyPv9L72yuyNhddPhTXDIpEqki/p6GaDoOzlsKgjCCJOs4VmWBwd7T+2eDerGwdLqxKPdcltb710cnwgmVHJl3R2EjkkSaTVclG6g9hNh/HhPrySh939Am3BAPPHn7l4tfDuZQ+86RVD8scdbb6wLHvJ5quoWo1sQaOq1ckVdAajCqeOD2M3HBwHDgsGubwp7z3MbYn+8Z6oKAjDK+sJvrm+gVeSmBqP4TgumztZDrIauUONRKpMOqfRdFoUSzXUqondap3wBMJzMURhIRDwismMymC/wpn5CSaPRCiWDXp7giCIfHJllWLZJBLqolypc215i2yxui02/T7d5/PYlWqNnk6ZzZ00uw/yyD4fF85MMTsdY2RAQdOaJA+q5EsmZr2BZdv4vP6qx8nphtw/8qrfHwjrhoUousSjvcT6u7h5a4fFn7fJ5U062/y4Lgz1K+wk8rQQ+HN365IEa7aZ6f4+Mn3uaPJRlopmMRZXiD3dgW40qNUddMnCrNsc5FRUrYZhNUhnD0v1/a9uioBkZVcWq6WD0lg8Qme7TKVqIXqgL9TO2GAIBBerYeP3SeylcgRkmcz24lUwyx4gAM1uvZgkEp898fzkiNinyKzcSVBSTSLhDtqDPsJKO0NRhZCisPLTd3fVxLXPgLwHaAESzYqhZrfVztBQPBobaotGFGYmY4S62wkGZXqVbvb2s+6NHy7fytz/9lPgPpAR+JcE9AIDIE6MHzs9N3/65ZmZqeeeQhCkR+m8/vvab3vLSz8u62rqNvAXkAFqfwOkPI+h92xJFAAAAABJRU5ErkJggg==) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/world.png?0f0dd) center right no-repeat!ie}#bodyContent span.smwmap a:hover{padding-right:20px;color:#0000FF;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAANkE3LLaAgAAAzBJREFUOBGlwTtsGwUAgOH/zufHOe9zHBzsJM6DhpRUCWmjCiolKgOiS6VKrWBghSUswEAlJjYGRlQECypQhoIEAqlNuwSiJhSqkJAqbR40pnbjR/w6+x72+Xw+itgqMfF98D8JPCn2thwfDZ9/cXro7LOjfSflgLetpBoP1u9llm7/kbqirn+wyX/pmLz4wvsfXV9PplW30XBcu+m4dtNxrUbTNcyGu7r2sH72jc8/hHmJJwUm3pu79OUvVcO03ZJad1PpirtxL+3e2Uy5v24k3b1EwVWrlltW6+75hS++hgseHvPwjyPv9L72yuyNhddPhTXDIpEqki/p6GaDoOzlsKgjCCJOs4VmWBwd7T+2eDerGwdLqxKPdcltb710cnwgmVHJl3R2EjkkSaTVclG6g9hNh/HhPrySh939Am3BAPPHn7l4tfDuZQ+86RVD8scdbb6wLHvJ5quoWo1sQaOq1ckVdAajCqeOD2M3HBwHDgsGubwp7z3MbYn+8Z6oKAjDK+sJvrm+gVeSmBqP4TgumztZDrIauUONRKpMOqfRdFoUSzXUqondap3wBMJzMURhIRDwismMymC/wpn5CSaPRCiWDXp7giCIfHJllWLZJBLqolypc215i2yxui02/T7d5/PYlWqNnk6ZzZ00uw/yyD4fF85MMTsdY2RAQdOaJA+q5EsmZr2BZdv4vP6qx8nphtw/8qrfHwjrhoUousSjvcT6u7h5a4fFn7fJ5U062/y4Lgz1K+wk8rQQ+HN365IEa7aZ6f4+Mn3uaPJRlopmMRZXiD3dgW40qNUddMnCrNsc5FRUrYZhNUhnD0v1/a9uioBkZVcWq6WD0lg8Qme7TKVqIXqgL9TO2GAIBBerYeP3SeylcgRkmcz24lUwyx4gAM1uvZgkEp898fzkiNinyKzcSVBSTSLhDtqDPsJKO0NRhZCisPLTd3fVxLXPgLwHaAESzYqhZrfVztBQPBobaotGFGYmY4S62wkGZXqVbvb2s+6NHy7fytz/9lPgPpAR+JcE9AIDIE6MHzs9N3/65ZmZqeeeQhCkR+m8/vvab3vLSz8u62rqNvAXkAFqfwOkPI+h92xJFAAAAABJRU5ErkJggg==) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/world.png?0f0dd) center right no-repeat!ie}#bodyContent span.rdflink{float:right}#bodyContent span.rdflink a{padding-right:20px;color:#888888;background:url(data:image/gif;base64,R0lGODlhEQASAIQeAIWjzhpTo0h1tvH0+SpeqUh1tWeMwjlqr+Hp89Ld7cLR5rPG4RpSo8PS53aYyDhpr5Wv1FiBvO/z+KS62uDo8ileqWaMwXWXx7LF4KO62pSu1FeAu9Hc7P///wtHnQtHnSH+FUNyZWF0ZWQgd2l0aCBUaGUgR0lNUAAh+QQBAAAfACwAAAAAEQASAAAFU+AnjuQneKhQriclpSvJSC/qxaNX2/hn/6pY6udRAX03k82Y6dROJKjI01H8VknfDoXNbbmkougEBC+DZDES1aHAcChKZ9nzza89HbGefvfSDh8hADs=) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/rdf_flyer.18.gif?dc535) center right no-repeat!ie}#bodyContent span.rdflink a:hover{text-decoration:none;color:#0000FF;padding-right:20px;margin-right:0px;background:url(data:image/gif;base64,R0lGODlhEQASAIQeAIWjzhpTo0h1tvH0+SpeqUh1tWeMwjlqr+Hp89Ld7cLR5rPG4RpSo8PS53aYyDhpr5Wv1FiBvO/z+KS62uDo8ileqWaMwXWXx7LF4KO62pSu1FeAu9Hc7P///wtHnQtHnSH+FUNyZWF0ZWQgd2l0aCBUaGUgR0lNUAAh+QQBAAAfACwAAAAAEQASAAAFU+AnjuQneKhQriclpSvJSC/qxaNX2/hn/6pY6udRAX03k82Y6dROJKjI01H8VknfDoXNbbmkougEBC+DZDES1aHAcChKZ9nzza89HbGefvfSDh8hADs=) center right no-repeat;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/rdf_flyer.18.gif?dc535) center right no-repeat!ie} table.smwb-factbox{border-left:8px solid #DDDDDD;width:100% }tr.smwb-title{font-size:200%;background-color:#DDDDDD;line-height:1.5}tr.smwb-title td{padding-left:5px;border-bottom:2px solid white}tr.smwb-propvalue{width:100%;background-color:#EEEEEE}tr.smwb-propvalue th{text-align:right;vertical-align:top;font-weight:bold;font-size:120%;background-color:#DDDDDD;padding:0.2em 0.6em;border-bottom:2px solid white;border-top:2px solid white}tr.smwb-propvalue td{padding-left:0.4em;background-color:#EEEEEE;border:0px solid white;border-bottom:2px solid white;border-top:2px solid white;width:90%}tr.smwb-center{background-color:#DDDDDD}span.smwb-value{} table.smwb-ifactbox{border-right:8px solid #DDDDDD;width:100% }tr.smwb-ititle{font-size:200%;background-color:#DDDDDD;line-height:1.5}tr.smwb-ititle td{padding-left:5px;border-bottom:2px solid white}tr.smwb-ipropvalue{width:100%;background-color:#EEEEEE;text-align:right}tr.smwb-ipropvalue th{text-align:left;font-weight:bold;font-size:120%;background-color:#DDDDDD;padding:0.2em 0.6em;border-bottom:3px solid white;border-top:3px solid white}tr.smwb-ipropvalue td{background-color:#EEEEEE;border-bottom:3px solid white;border-top:3px solid white;padding-right:1em;width:90%}span.smwb-ivalue{} .smw-spinner .text{padding-left:2.1em;font-size:12px;vertical-align:middle} .smw-spinner.left.mw-small-spinner{background-position:left;vertical-align:middle;display:inline-block;padding:0px !important} .smw-spinner.center.mw-small-spinner{vertical-align:middle;display:inline-block;padding:0px !important} table.smw-ask-query .smw-ask-query-condition{width:100%}table.smw-ask-query .smw-ask-query-printout{width:100%}
div.smwtt{color:#000000} span.smwttpersist span.smwttcontent{color:#888888;font-style:italic;font-size:90%} span.smwttinline span.smwttcontent{display:none;speak:none} span.smwtticon{display:none} span.smwttactivepersist{cursor:help;color:#0000C8} span.smwttactiveinline{color:#BB7700;text-decoration:none} img.smwttimg{padding-right:5px;padding-left:4px} .smwttcontent{display:none} .smwtticon{padding:14px 12px 0 0;white-space:nowrap;margin-bottom:-1px} .smwtticon.info{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QAQACXAOIX6M4XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1woNCAQvupvvrgAAAgpJREFUKBUFwTtME3EAwOHf3f961+vd9Sh9HEVINUrFhAbRmCgGo9FodCFMLhomJ6MmJsbF1Z2ExMHBUQc3BmOigyERB0ElQHgECRYECrRC26OPa3t+nwQAAI7aO/K458yJeK8qOA74dY/1hbWdxZWJsVUoeAAKAImh2NDdR/duD54cdRLRdMQydB84KJaPzufyyx+6Tr+Zej/2jr1vBUHiin3j/pPnwzcvPMv0OKlb/YlAT4cupR1d0lRNNWwrmUhEB+tmSl7/vTktMiNPhy9dvviyM2FYnZEgpRp8WS3htaC/W2du64iWLAUl1RgoY84qiiJdU03TKFR9vv+tIZQGsiTojqg0WrDtwlHVR7PscCDAVaXoEV3KN+hCELUVVBFgNBOkXZd5NVPhoC6TL0J2v8FhnbiCUBtlX2WzInB1jZiuEQ4KfhVgrR7ErUO+UsMlgCwUT6FRW9YU2TdMXbIsjbglmD+EPQ9iYQFo1Go6Xq3c8hveolze2/hY3M6u2IaGHRI4JpxthyRVHAPCIQXbDFLcyi6WcuufhLs2lXMxsy0tkk51tDkdYVU6ZkosbFXxAwF290vN6amfM0uf374oTI5/lQAAYfddP5e58/BBuivel4qF4k0f/uy7u0sbubn5ifHX7srkLNCUAAAAQtFUW/LUQLI9HHGaPv6/Yj63s/pju1LYPAQA+A8p2cUweh5dZAAAAABJRU5ErkJggg==) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/info.png?34b97) no-repeat left bottom!ie}.smwtticon.service{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAABmJLR0QAQACXAOIX6M4XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1woNCAQvupvvrgAAAgpJREFUKBUFwTtME3EAwOHf3f961+vd9Sh9HEVINUrFhAbRmCgGo9FodCFMLhomJ6MmJsbF1Z2ExMHBUQc3BmOigyERB0ElQHgECRYECrRC26OPa3t+nwQAAI7aO/K458yJeK8qOA74dY/1hbWdxZWJsVUoeAAKAImh2NDdR/duD54cdRLRdMQydB84KJaPzufyyx+6Tr+Zej/2jr1vBUHiin3j/pPnwzcvPMv0OKlb/YlAT4cupR1d0lRNNWwrmUhEB+tmSl7/vTktMiNPhy9dvviyM2FYnZEgpRp8WS3htaC/W2du64iWLAUl1RgoY84qiiJdU03TKFR9vv+tIZQGsiTojqg0WrDtwlHVR7PscCDAVaXoEV3KN+hCELUVVBFgNBOkXZd5NVPhoC6TL0J2v8FhnbiCUBtlX2WzInB1jZiuEQ4KfhVgrR7ErUO+UsMlgCwUT6FRW9YU2TdMXbIsjbglmD+EPQ9iYQFo1Go6Xq3c8hveolze2/hY3M6u2IaGHRI4JpxthyRVHAPCIQXbDFLcyi6WcuufhLs2lXMxsy0tkk51tDkdYVU6ZkosbFXxAwF290vN6amfM0uf374oTI5/lQAAYfddP5e58/BBuivel4qF4k0f/uy7u0sbubn5ifHX7srkLNCUAAAAQtFUW/LUQLI9HHGaPv6/Yj63s/pju1LYPAQA+A8p2cUweh5dZAAAAABJRU5ErkJggg==) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/info.png?34b97) no-repeat left bottom!ie}.smwtticon.warning{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZ1JREFUKFOVy79rE3EcxvH39+7y8/q9pF4S0xi0mEiaMxV68Yxg8PeiVyhV6iCIQhErHUScFJxcHAX/Azf/AgWXWlsUhyrYioMiqKgoiEgrJTH3cSuldvE9Pg8vkw3Nt6lfHuZ68g9fnv/k2/pPRDDWD098bD1gTO4cdS+NNowp38ZhQ2tgZgQSWo3kDgyPpU/esSuHd4fnK6o1lERtCuIp0tmGO73sHavevf8B8Y7uaDT7pwMXvSmwEkbgNHeFb1eLPH22wNJKnka7enxAG+1/wKxPpq+SuuaeOKSzuSQxq0vGjZML99vj+xJXDmoKa2DOx0znOVUcL7fNrXl8v0OtZhIEv1GFFLUJt3XW43TRJAZgGBal/lbsjN0sZeENIkuEoQUsAq/RQcZpHjEnzpUpA/DqAld/zOjVqOdJFO2RuXlPhuo5efBwUKJou0S9gvx6HO/cG+OmiGD1FdSU3tZNyNdPAFQd4cbFHvUty8jnCOhhl6JYfZBJ4JY1+1IeObc770S6ChClQCvhxaKwEAEISqE+vuf7XkCJCP/TX7cEexPi9whUAAAAAElFTkSuQmCC) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/warning.png?06a3c) no-repeat left bottom!ie}.smwtticon.note{display:inline-block;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgtJREFUeNokUctqU1EUXefk5iY3D2MrSWOamyq9jYO2BovUR41O1Iykov6Bc6WDDh36A4oKnYkORZBCoA6KI1GrEKhoFWOo1qhJk6Z539c57sTB5gzOWns9NpMA3KCK0s0TsHwiBsW3qPi0OYerbmP89IaVnFvtMn/dmEginU5DITyYLSA4y40embp3MDWVVoNhgKvot1sob699/OqdvM0MY32AVTrZWZhhfnEsk85HEikOxoERnbYwBLxeGNH4jK/wdq1W1Bd7h8fySnlei4WT0ZV4ROWivQt4A+AzV0DrIV8/AtQA9Onjyt7G6spmOJHhb6IXrkbCnqOyuw+YNL0aTRPSpOnVidgE7A70Q/7x+pf315Wgph1TpAVBOcApktUBnN7/t9/AoBT6REAl8f3dBcW07R1pdSGkSvaJIBzIWpHUWkRqDrNAWENFIWJBZafWKZgjbWghDZIRgUK7Hx4PugNzXSK1wZmLVq0CO5ot8kw2Vyg70U+M/Eu7D0lWPLm78GSXKEOD7JlAu4rvTVWwmPGc/frzF63S5kIgv7SeOGCp0usHUmfAhAtW3SIdga2ffZTnl++nZk/dYlJKkDBePXtyOfb56cO4W5rUWH9YQEcEsI2U+9u48WD63KVlY0K3hpeWjgMxqr+snr9zslL5do3t/ThLnYXsUKLIY8YLj22+Y441gOKfAAMAeeDgUIIDAXwAAAAASUVORK5CYII=) no-repeat left bottom;background:url(https://rosettacode.org/mw/extensions/SemanticMediaWiki/resources/images/note.png?3c504) no-repeat left bottom!ie}</style><style>
.mw-collapsible-toggle{float:right;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}  .mw-content-ltr .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr .mw-collapsible-toggle{float:right} .mw-content-rtl .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl .mw-collapsible-toggle{float:left}.mw-customtoggle,.mw-collapsible-toggle{cursor:pointer} caption .mw-collapsible-toggle,.mw-content-ltr caption .mw-collapsible-toggle,.mw-content-rtl caption .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr caption .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl caption .mw-collapsible-toggle{float:none} li .mw-collapsible-toggle,.mw-content-ltr li .mw-collapsible-toggle,.mw-content-rtl li .mw-collapsible-toggle,.mw-content-rtl .mw-content-ltr li .mw-collapsible-toggle,.mw-content-ltr .mw-content-rtl li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left; overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}.suggestions-result-current{background-color:#4C59A6;color:white}.suggestions-special .special-label{color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white}.highlight{font-weight:bold}
textarea{font-family:Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace}.ti89b{font-family:'TI Uni',monospace}.wikicode{font-weight:bold} .kw1{font-weight:bold;color:#0000ff}.kw2{font-weight:bold;color:#0000cc}.kw3{font-weight:bold;color:#3333cc}.kw4{font-weight:bold;color:#6666cc}.kw5{font-weight:bold;color:#9999cc}.br0{font-weight:bold;color:#009900}.nu0{font-weight:bold;color:#009999}.co1{color:#666666;font-style:italic}.co2{font-weight:bold;color:#666666;font-style:italic}.coMULTI{font-weight:bold;color:#666;font-style:italic}.me1{font-weight:bold;color:#993399}.me2{font-weight:bold;color:#cc66cc}.st0,.st_h{color:#ff0000} .re2{background-color:#ccccff}.re3{background-color:#ffcccc} #p-googleadsense .pBody{padding-top:5px;text-align:center} ol.references > li:target{background-color:#DEF} table.wikitable,table.prettytable{margin:1em 1em 1em 0;background:#f9f9f9;border:1px #aaa solid;border-collapse:collapse}table.wikitable th,table.wikitable td,table.prettytable th,table.prettytable td{border:1px #aaa solid;padding:0.2em}table.wikitable th,table.prettytable th{background:#f2f2f2;text-align:center}table.wikitable caption,table.prettytable caption{margin-left:inherit;margin-right:inherit;font-weight:bold} table.navbox{background-color:#f9f9f9;border:1px solid #aaa;clear:both;font-size:90%;margin:1em 0em 0em;padding:5px;text-align:center;width:100%}table.navbox th{background-color:#ccf;padding-left:1em;padding-right:1em}table.navbox tr:not(:first-child) th{background-color:#ddf}@media print{.navbox{display:none}} .infobox{border:1px solid #aaa;background-color:#f9f9f9;color:black;margin-bottom:0.5em;margin-left:1em;padding:0.2em;float:right;clear:right}.infobox td,.infobox th{vertical-align:top}.infobox caption{font-size:larger;margin-left:inherit}.infobox.bordered{border-collapse:collapse}.infobox.bordered td,.infobox.bordered th{border:1px solid #aaa}.infobox.bordered .borderless td,.infobox.bordered .borderless th{border:0}.infobox.sisterproject{width:20em;font-size:90%}@media print{.infobox.sisterproject{display:none}} .infobox.bordered .mergedtoprow td,.infobox.bordered .mergedtoprow th{border:0;border-top:1px solid #aaa;border-right:1px solid #aaa}.infobox.bordered .mergedrow td,.infobox.bordered .mergedrow th{border:0;border-right:1px solid #aaa}#disambig{border-top:1px solid #ccc;border-bottom:1px solid #ccc} .Talk-Notice{border:1px solid #C0C090;background-color:#F8EABA;margin-bottom:3px;width:85%;border-spacing:3px;margin-left:auto;margin-right:auto}.Talk-Notice:after{content:"The CSS for this template should be changed. See [[Wikipedia:Template Standardisation]]."} .Talk-Notice td{background:inherit} table.persondata{border:1px solid #aaa;display:none;speak:none}.persondata-label{color:#aaa} .allpagesredirect{font-style:italic}  .Use_Default_Date_Convention{display:inline}.Use_AD_and_BC{display:none}.Use_BCE_and_CE{display:none}     .audiolink a{background:url(http://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Loudspeaker.svg/11px-Loudspeaker.svg.png) center left no-repeat !important;padding-left:16px !important;padding-right:0 !important} div.listenlist{background:url(http://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Gnome-speakernotes.png/30px-Gnome-speakernotes.png);padding-left:40px}div.videolist,div.multivideolist{background:url(http://upload.wikimedia.org/wikipedia/en/thumb/2/20/Tango-video-x-generic.png/40px-Tango-video-x-generic.png);padding-left:50px} div.medialist{min-height:50px;margin:1em;background-position:top left;background-repeat:no-repeat}div.medialist ul{list-style-type:none;list-style-image:none;margin:0}div.medialist ul li{padding-bottom:0.5em}div.medialist ul li li{font-size:91%;padding-bottom:0}  #bodyContent a[href$=".pdf"].external,#bodyContent a[href*=".pdf?"].external,#bodyContent a[href*=".pdf#"].external,#bodyContent a[href$=".PDF"].external,#bodyContent a[href*=".PDF?"].external,#bodyContent a[href*=".PDF#"].external{background:url(http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Icons-mini-file_acrobat.gif/15px-Icons-mini-file_acrobat.gif) center right no-repeat;padding-right:16px}  span.PDFlink a{background:url(http://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Icons-mini-file_acrobat.gif/15px-Icons-mini-file_acrobat.gif) center right no-repeat !important;padding-right:17px !important} div.columns-2 div.column{float:left;width:50%;min-width:300px}div.columns-3 div.column{float:left;width:33.3%;min-width:200px}div.columns-4 div.column{float:left;width:25%;min-width:150px}div.columns-5 div.column{float:left;width:20%;min-width:120px} .plainlinksneverexpand{background:none ! important;padding:0 ! important}.plainlinksneverexpand .urlexpansion{display:none ! important} .plainlinksneverexpand a{background:none !important;padding:0 !important} .plainlinksneverexpand a.external.text:after{display:none !important}.plainlinksneverexpand a.external.autonumber:after{display:none !important} .messagebox{border:1px solid #aaa;background-color:#f9f9f9;width:80%;margin:0 auto 1em auto;padding:.2em}.messagebox.merge{border:1px solid #c0b8cc;background-color:#f0e5ff;text-align:center}.messagebox.cleanup{border:1px solid #9f9fff;background-color:#efefff;text-align:center}.messagebox.standard-talk{border:1px solid #c0c090;background-color:#f8eaba}.messagebox.taskdescription{border:1px solid #3333ff;background-color:#9999ff;text-align:center} #file img{background:url(http://upload.wikimedia.org/wikipedia/commons/5/5d/Checker-16x16.png) repeat} .IPA{font-family:"Chrysanthi Unicode","Doulos SIL",Gentium,GentiumAlt,Code2000,"TITUS Cyberbit Basic","DejaVu Sans","Bitstream Cyberbit","Arial Unicode MS","Lucida Sans Unicode","Hiragino Kaku Gothic Pro","Matrix Unicode";font-family :inherit}.Unicode{font-family:Code2000,"TITUS Cyberbit Basic","Doulos SIL","Chrysanthi Unicode","Bitstream Cyberbit","Bitstream CyberBase",Thryomanes,Gentium,GentiumAlt,"Lucida Grande","Arial Unicode MS","Microsoft Sans Serif","Lucida Sans Unicode";font-family :inherit}.latinx{font-family:Code2000,"TITUS Cyberbit Basic","Microsoft Sans Serif";font-family :inherit}.polytonic{font-family:Athena,Gentium,"Palatino Linotype","Arial Unicode MS","Lucida Sans Unicode","Lucida Grande",Code2000;font-family :inherit}.mufi{font-family:Alphabetum,Cardo,LeedsUni,Junicode,"TITUS Cyberbit Basic",ALPHA-Demo}#wpSave{font-weight:bold} .hiddenStructure{display:inline ! important;color:#f00;background-color:#0f0} .nounderlines a{text-decoration:none} .IPA a:link,.IPA a:visited{text-decoration:none} @media print{#privacy,#about,#disclaimer{display:none}}#EnWpMpBook{background-image:url(http://upload.wikimedia.org/wikipedia/en/7/7e/MP-open-book.png)}#EnWpMpSearch{background:url(http://upload.wikimedia.org/wikipedia/en/a/ae/MP-magnifying-glass.png) no-repeat top right}#EnWpMpSearchInner{float:right;width:20em;text-align:center}#EnWpMpBook2{background-image:url(http://upload.wikimedia.org/wikipedia/commons/8/8e/MP-open-book2.png)}.messagebox.small-talk{width:238px;font-size:85%;float:right;clear:both;margin:0 0 1em 1em;line-height:1.25em;background:#F8EABA} div.Boxmerge,div.NavFrame{margin:0px;padding:2px;border:1px solid #aaa;text-align:center;border-collapse:collapse;font-size:95%}div.Boxmerge div.NavFrame{border-style:none;border-style:hidden}div.NavFrame + div.NavFrame{border-top-style:none;border-top-style:hidden}div.NavPic{background-color:#fff;margin:0px;padding:2px;float:left}div.NavFrame div.NavHead{height:1.6em;font-weight:bold;font-size:100%;background-color:#efefef;position:relative}div.NavFrame p{font-size:100%}div.NavFrame div.NavContent{font-size:100%}div.NavFrame div.NavContent p{font-size:100%}div.NavEnd{margin:0px;padding:0px;line-height:1px;clear:both}a.NavToggle{position:absolute;top:0px;right:3px;font-weight:normal;font-size:smaller} .mw-plusminus-pos{color:darkgreen} .mw-plusminus-neg{color:darkred}.dablink{font-style:italic;padding-left:2em}pre{overflow:auto}
.postedit-container{margin:0 auto;position:fixed;top:0;height:0;left:50%;z-index:1000;font-size:13px}.postedit-container:hover{cursor:pointer}.postedit{position:relative;top:0.6em;left:-50%;padding:.6em 3.6em .6em 1.1em;line-height:1.5625em;color:#626465;background-color:#f4f4f4;border:1px solid #dcd9d9;text-shadow:0 0.0625em 0 rgba(255,255,255,0.5);border-radius:5px;box-shadow:0 2px 5px 0 #ccc;-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-ms-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.skin-monobook .postedit{top:6em !important}.postedit-faded{opacity:0}.postedit-icon{padding-left:41px;  line-height:25px;background-repeat:no-repeat;background-position:8px 50%}.postedit-icon-checkmark{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABblBMVEUAAAD///////9PfTf///80aRdTgjn///9Feij///////////9Rfzf///////////9PfjZRgDh1o1xOfTb///////+bwYqLtnj///////9PfTa82K////9WhT6YxIL///9QgDdTgzr////////j7uDl7eLq8efi693k7OH///////9UhjuBr2rp9uRUhjr///9YljVKgir///9WiTlYjT3////9/v57vFlbkT5PjC9dlD/5/fhuq09stUTs9uhxuElctCpfnT1huDFloEZloUZmpENmvDZpvDxpvTxqvjxrvT5rvT9rwTxsqktswD5uwkBvuUdxw0NztFBztU9ztVBzwkp0tlJ1xkd2t1R3uVR4w1F4xk54x014yE15uVZ5v1R5xVB6v1R7yFJ8wVh9xVl9yFR9yVd9ylN+xVh+yFd/x1l/yFeAylmEx1+Ny2uY0Hqe04Wj1Ymv3Ze33qLD47TJ5L3O6cPU7Mrq9eb2+/Q4j37OAAAAQHRSTlMAAQIEBAUFBQwPFB4fJCUoKiosQEhJS01RUlZZXmdydXaChYuSlJSWmJmoq6uur8LExcvM19fg5ejt8fX2+Pr7SljgewAAAKpJREFUGBkFwQNCAwAAAMDLtl3LtrG4rWXbtvX77gAgZ6grFwC0bhwNVgKgdPZx8b0dgLi+s7Wn0VoAqpfOI9+BNADZI7fLrz2pSEwGHZuH+78lSK8ZLkLezF3ooyUG3VPXq2USei9WngeyoG195yBYWDF3E/2pAhl1e9Gr8bGT+bfOFCC2fnvh4X7rcqIAQNNu+HT6sxkAjceTL/2ZAIhv+PorBwBJxfkA//dFHSCBy/UTAAAAAElFTkSuQmCC);background-image:url(https://rosettacode.org/mw/resources/src/mediawiki.action/images/green-checkmark.png?9048a)!ie;background-position:left}.postedit-close{position:absolute;padding:0 .8em;right:0;top:0;font-size:1.25em;font-weight:bold;line-height:2.3em;color:black;text-shadow:0 0.0625em 0 white;text-decoration:none;opacity:0.2;filter:alpha(opacity=20)}.postedit-close:hover{color:black;text-decoration:none;opacity:0.4;filter:alpha(opacity=40)}</style><style>
.suggestions a.mw-searchSuggest-link,.suggestions a.mw-searchSuggest-link:hover,.suggestions a.mw-searchSuggest-link:active,.suggestions a.mw-searchSuggest-link:focus{color:black;text-decoration:none}.suggestions-result-current a.mw-searchSuggest-link,.suggestions-result-current a.mw-searchSuggest-link:hover,.suggestions-result-current a.mw-searchSuggest-link:active,.suggestions-result-current a.mw-searchSuggest-link:focus{color:white}.suggestions a.mw-searchSuggest-link .special-query{ overflow:hidden;-o-text-overflow:ellipsis; text-overflow:ellipsis;white-space:nowrap}</style><meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="./Ray-casting algorithm - Rosetta Code_files/load(1).php">
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="./Ray-casting algorithm - Rosetta Code_files/load(2).php" type="text/javascript"></script>
<meta name="generator" content="MediaWiki 1.26.2">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="ExportRDF" type="application/rdf+xml" title="Ray-casting algorithm" href="https://rosettacode.org/mw/index.php?title=Special:ExportRDF/Ray-casting_algorithm&amp;xmlmime=rdf">
<link rel="alternate" type="application/x-wiki" title="Edit" href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit">
<link rel="edit" title="Edit" href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit">
<link rel="shortcut icon" href="https://rosettacode.org/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="https://rosettacode.org/mw/opensearch_desc.php" title="Rosetta Code (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://rosettacode.org/mw/api.php?action=rsd">
<link rel="copyright" href="http://www.gnu.org/licenses/fdl-1.2.html">
<link rel="alternate" type="application/atom+xml" title="Rosetta Code Atom feed" href="https://rosettacode.org/mw/index.php?title=Special:RecentChanges&amp;feed=atom">
<script src="./Ray-casting algorithm - Rosetta Code_files/load(3).php"></script></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Ray-casting_algorithm layout-standard skin-chameleon action-view">
<div class="container">
<div class="row">
<div class="col-lg-3">

<div id="p-logo" class="p-logo" role="banner">
<a href="https://rosettacode.org/wiki/Rosetta_Code" title="Visit the main page"><img src="./Ray-casting algorithm - Rosetta Code_files/title.png" alt="Rosetta Code"></a>
</div>
</div>
<div class="col-lg-9">
<div class="row">
<div class="col-lg-12">

<div class="p-personal pull-right" id="p-personal">
<ul class="p-personal-tools list-inline pull-right">
<li id="pt-createaccount"><a href="https://rosettacode.org/mw/index.php?title=Special:UserLogin&amp;returnto=Ray-casting+algorithm&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
<li id="pt-login"><a href="https://rosettacode.org/mw/index.php?title=Special:UserLogin&amp;returnto=Ray-casting+algorithm" title="You are encouraged to log in; however, it is not mandatory [alt-shift-o]" accesskey="o">Log in</a></li>
</ul>
<div class="newtalk-notifier">
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-lg-12">

<div id="p-search" class="p-search pull-right" role="search">
<form id="searchform" class="mw-search form-inline" action="https://rosettacode.org/mw/index.php">
<input type="hidden" name="title" value="Special:Search">
<div class="input-group">
<input name="search" placeholder="Search" title="Search Rosetta Code [alt-shift-f]" accesskey="f" id="searchInput" class="form-control" autocomplete="off">
<div class="input-group-btn">
<button value="Go" id="searchGoButton" name="go" title="Go to a page with this exact name if it exists" type="submit" class="searchGoButton btn btn-default"><span class="glyphicon glyphicon-share-alt"></span></button><button value="Search" id="mw-searchButton" name="fulltext" title="Search the pages for this text" type="submit" class="mw-searchButton btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
</div>
</div>
</form>
</div>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-lg-12">

<nav class="navbar navbar-default p-navbar" role="navigation" id="mw-navigation">
<div class="container-fluid"><div class="navbar-header">
<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mw-navigation-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
</div>
<div class="collapse navbar-collapse" id="mw-navigation-collapse"><ul class="nav navbar-nav">

<li class="dropdown">
<a href="https://rosettacode.org/wiki/Ray-casting_algorithm#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
<ul class="dropdown-menu p-Community" id="p-Community">
<li id="n-Twitter"><a href="http://twitter.com/rosettacode" rel="nofollow">Twitter</a></li>
<li id="n-Chat.2FIRC"><a href="https://rosettacode.org/wiki/Special:WebChat">Chat/IRC</a></li>
<li id="n-Planet"><a href="http://rosettacode.org/planet" rel="nofollow">Planet</a></li>
<li id="n-The-Village-Pump"><a href="https://rosettacode.org/wiki/Rosetta_Code:Village_Pump">The Village Pump</a></li>
<li id="n-Finances"><a href="https://rosettacode.org/wiki/Rosetta_Code:Finances">Finances</a></li>
</ul>
</li>

<li class="dropdown">
<a href="https://rosettacode.org/wiki/Ray-casting_algorithm#" class="dropdown-toggle" data-toggle="dropdown">Explore <b class="caret"></b></a>
<ul class="dropdown-menu p-Explore" id="p-Explore">
<li id="n-Languages"><a href="https://rosettacode.org/wiki/Category:Programming_Languages">Languages</a></li>
<li id="n-Tasks"><a href="https://rosettacode.org/wiki/Category:Programming_Tasks">Tasks</a></li>
<li id="n-recentchanges"><a href="https://rosettacode.org/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [alt-shift-r]" accesskey="r">Recent changes</a></li>
<li id="n-Similar-sites"><a href="https://rosettacode.org/wiki/Help:Similar_Sites">Similar sites</a></li>
<li id="n-randompage"><a href="https://rosettacode.org/wiki/Special:Random" title="Load a random page [alt-shift-x]" accesskey="x">Random page</a></li>
</ul>
</li></ul>
</div>
</div>
</nav>
</div>
</div>
<div class="row">
<div class="col-lg-12">

<ul class="p-contentnavigation list-inline text-center" id="p-contentnavigation">

<li id="p-namespaces">
<ul class="list-inline">
<li id="ca-nstab-main" class="selected"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm" title="View the content page [alt-shift-c]" accesskey="c" class="selected">Page</a></li>
<li id="ca-talk"><a href="https://rosettacode.org/wiki/Talk:Ray-casting_algorithm" rel="discussion" title="Discussion about the content page [alt-shift-t]" accesskey="t">Discussion</a></li>
</ul>
</li>

<li id="p-views">
<ul class="list-inline">
<li id="ca-edit"><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit" title="Edit this page [alt-shift-e]" accesskey="e">Edit</a></li>
<li id="ca-history"><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=history" title="Past revisions of this page [alt-shift-h]" accesskey="h">History</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="row">
<div class="col-lg-12">
</div>
</div>
<div class="row">
<div class="col-lg-12">

<div id="content" class="mw-body"><a id="top"></a>
<div id="mw-js-message" style="display:none;"></div>
<div class="contentHeader">

<h1 id="firstHeading" class="firstHeading">Ray-casting algorithm</h1>

<div id="siteSub">From Rosetta Code</div><div id="jump-to-nav" class="mw-jump">Jump to:<a href="https://rosettacode.org/wiki/Ray-casting_algorithm#mw-navigation">navigation</a>, <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#p-search">search</a></div>
</div><div id="bodyContent">

<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="infobox" style="width: 2in"><div class="floatleft"><a href="https://rosettacode.org/wiki/Category:Solutions_by_Programming_Task" title="Category:Solutions by Programming Task"><img alt="Task" src="./Ray-casting algorithm - Rosetta Code_files/64px-Rcode-button-task-crushed.png" width="64" height="64" srcset="/mw/images/thumb/b/ba/Rcode-button-task-crushed.png/96px-Rcode-button-task-crushed.png 1.5x, /mw/images/thumb/b/ba/Rcode-button-task-crushed.png/128px-Rcode-button-task-crushed.png 2x"></a></div><b>Ray-casting algorithm</b><br>
You are encouraged to <a href="https://rosettacode.org/wiki/Rosetta_Code:Solve_a_Task" title="Rosetta Code:Solve a Task">solve this task</a> according to the task description, using any language you may know.</div>
<table align="center" border="0" cellpadding="3" cellspacing="3" style="border: 1px solid #E0E0E0; background-color: #F8F8F8; color:black;">
<tbody><tr>
<td style="font-size: 90%"> This page uses content from <b><a rel="nofollow" class="external text" href="http://en.wikipedia.org/">Wikipedia</a></b>. The original article was at <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/Point_in_polygon">Point_in_polygon</a>. The list of authors can be seen in the <a rel="nofollow" class="external text" href="http://en.wikipedia.org/w/index.php?title=Point_in_polygon&amp;action=history"><b>page history</b></a>. <a href="https://rosettacode.org/wiki/Rosetta_Code:Copyrights" title="Rosetta Code:Copyrights">As with Rosetta Code</a>, the text of Wikipedia <a href="http://en.wikipedia.org/wiki/Project:Copyrights" class="extiw" title="wp:Project:Copyrights">is available</a> under the <a rel="nofollow" class="external text" href="http://www.gnu.org/licenses/fdl.html">GNU FDL</a>. (See links for details on variance)
</td></tr></tbody></table>
<p><br>
Given a point and a polygon, check if the point is inside or outside the polygon using the <a href="http://en.wikipedia.org/wiki/Point_in_polygon#Ray_casting_algorithm" class="extiw" title="wp:Point in polygon">ray-casting algorithm</a>.
</p><p>A pseudocode can be simply:
</p>
<pre> count ← 0
 <b>foreach</b> side <b>in</b> polygon:
   <b>if</b> ray_intersects_segment(P,side) <b>then</b>
     count ← count + 1
 <b>if</b> <i>is_odd</i>(count) <b>then</b>
   <b>return</b> inside
 <b>else</b>
   <b>return</b> outside
</pre>
<p>Where the function <tt>ray_intersects_segment</tt> return true if the horizontal ray starting from the point P intersects the side (segment), false otherwise.
</p><p>An intuitive explanation of why it works is that every time we cross
a border, we change "country" (inside-outside, or outside-inside), but
the last "country" we land on is surely <i>outside</i> (since the inside of the polygon is finite, while the ray continues towards infinity). So, if we crossed an odd number of borders we were surely inside, otherwise we were outside; we can follow the ray backward to see it better: starting from outside, only an odd number of crossing can give an <i>inside</i>: outside-inside, outside-inside-outside-inside, and so on (the - represents the crossing of a border).
</p><p>So the main part of the algorithm is how we determine if a ray intersects a segment. The following text explain one of the possible ways.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a href="https://rosettacode.org/wiki/File:Intersect.png" class="image"><img alt="Intersect.png" src="./Ray-casting algorithm - Rosetta Code_files/200px-Intersect.png" width="200" height="200" class="thumbimage" srcset="/mw/images/thumb/8/8e/Intersect.png/300px-Intersect.png 1.5x, /mw/images/8/8e/Intersect.png 2x"></a> <div class="thumbcaption"><div class="magnify"><a href="https://rosettacode.org/wiki/File:Intersect.png" class="internal" title="Enlarge"></a></div></div></div></div>
<p>Looking at the image on the right, we can easily be convinced of the fact that rays starting from points in the hatched area (like P<sub>1</sub> and P<sub>2</sub>) surely do not intersect the segment AB. We also can easily see that rays starting from points in the greenish area surely intersect the segment AB (like point P<sub>3</sub>).
</p><p>So the problematic points are those inside the white area (the box delimited by the points A and B), like P<sub>4</sub>.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:130px;"><a href="https://rosettacode.org/wiki/File:Posslope.png" class="image"><img alt="Posslope.png" src="./Ray-casting algorithm - Rosetta Code_files/128px-Posslope.png" width="128" height="209" class="thumbimage" srcset="/mw/images/f/f1/Posslope.png 1.5x, /mw/images/f/f1/Posslope.png 2x"></a> <div class="thumbcaption"><div class="magnify"><a href="https://rosettacode.org/wiki/File:Posslope.png" class="internal" title="Enlarge"></a></div></div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:130px;"><a href="https://rosettacode.org/wiki/File:Negslope.png" class="image"><img alt="Negslope.png" src="./Ray-casting algorithm - Rosetta Code_files/128px-Negslope.png" width="128" height="162" class="thumbimage" srcset="/mw/images/thumb/2/2d/Negslope.png/192px-Negslope.png 1.5x, /mw/images/2/2d/Negslope.png 2x"></a> <div class="thumbcaption"><div class="magnify"><a href="https://rosettacode.org/wiki/File:Negslope.png" class="internal" title="Enlarge"></a></div></div></div></div>
<p>Let us take into account a segment AB (the point A having y coordinate always smaller than B's y coordinate, i.e. point A is always below point B) and a point P. Let us use the cumbersome notation PAX to denote the angle between segment AP and AX, where X is always a point on the horizontal line passing by A with x coordinate bigger than the maximum between the x coordinate of A and the x coordinate of B. As explained graphically by the figures on the right, if PAX is greater than the angle BAX, then the ray starting from P intersects the segment AB. (In the images, the ray starting from P<sub>A</sub> does not intersect the segment, while the ray starting from P<sub>B</sub> in the second picture, intersects the segment).
</p><p>Points on the boundary or "on" a vertex are someway special and through this approach we do not obtain <i>coherent</i> results. They could be treated apart, but it is not necessary to do so.
</p><p>An algorithm for the previous speech could be (if P is a point, Px is its x coordinate):
</p>
<pre> <b>ray_intersects_segment</b>:
    P&nbsp;: the point from which the ray starts
    A&nbsp;: the end-point of the segment with the smallest y coordinate
        (A must be "below" B)
    B&nbsp;: the end-point of the segment with the greatest y coordinate
        (B must be "above" A)
 <b>if</b> Py = Ay <b>or</b> Py = By <b>then</b>
   Py ← Py + ε
 <b>end</b> <b>if</b>
 <b>if</b> Py &lt; Ay <b>or</b> Py &gt; By <b>then</b> 
   <b>return</b> false
 <b>else</b> <b>if</b> Px &gt;= max(Ax, Bx) <b>then</b> 
   <b>return</b> false
 <b>else</b>
   <b>if</b> Px &lt; min(Ax, Bx) <b>then</b>
     <b>return</b> true
   <b>else</b>
     <b>if</b> Ax ≠ Bx <b>then</b>
       m_red ← (By - Ay)/(Bx - Ax)
     <b>else</b>
       m_red ← ∞
     <b>end</b> <b>if</b>
     <b>if</b> Ax ≠ Px <b>then</b>
       m_blue ← (Py - Ay)/(Px - Ax)
     <b>else</b>
       m_blue ← ∞
     <b>end</b> <b>if</b>
     <b>if</b> m_blue ≥ m_red <b>then</b>
       <b>return</b> true
     <b>else</b>
       <b>return</b> false
     <b>end</b> <b>if</b>
   <b>end</b> <b>if</b>
 <b>end</b> <b>if</b>
</pre>
<p>(To avoid the "ray on vertex" problem, the point is moved upward of a small quantity &nbsp; <big>ε</big>.)
<br><br>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2><span class="toctoggle">&nbsp;[<a href="https://rosettacode.org/wiki/Ray-casting_algorithm#" id="togglelink">hide</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Ada"><span class="tocnumber">1</span> <span class="toctext">Ada</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#ANSI_Standard_BASIC"><span class="tocnumber">2</span> <span class="toctext">ANSI Standard BASIC</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#AutoHotkey"><span class="tocnumber">3</span> <span class="toctext">AutoHotkey</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#C"><span class="tocnumber">4</span> <span class="toctext">C</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#C.2B.2B"><span class="tocnumber">5</span> <span class="toctext">C++</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#CoffeeScript"><span class="tocnumber">6</span> <span class="toctext">CoffeeScript</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Common_Lisp"><span class="tocnumber">7</span> <span class="toctext">Common Lisp</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#D"><span class="tocnumber">8</span> <span class="toctext">D</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Factor"><span class="tocnumber">9</span> <span class="toctext">Factor</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Fortran"><span class="tocnumber">10</span> <span class="toctext">Fortran</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#FreeBASIC"><span class="tocnumber">11</span> <span class="toctext">FreeBASIC</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Go"><span class="tocnumber">12</span> <span class="toctext">Go</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Haskell"><span class="tocnumber">13</span> <span class="toctext">Haskell</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#J"><span class="tocnumber">14</span> <span class="toctext">J</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Java"><span class="tocnumber">15</span> <span class="toctext">Java</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#JavaScript"><span class="tocnumber">16</span> <span class="toctext">JavaScript</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Julia"><span class="tocnumber">17</span> <span class="toctext">Julia</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Kotlin"><span class="tocnumber">18</span> <span class="toctext">Kotlin</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Liberty_BASIC"><span class="tocnumber">19</span> <span class="toctext">Liberty BASIC</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#OCaml"><span class="tocnumber">20</span> <span class="toctext">OCaml</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Perl"><span class="tocnumber">21</span> <span class="toctext">Perl</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Perl_6"><span class="tocnumber">22</span> <span class="toctext">Perl 6</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Phix"><span class="tocnumber">23</span> <span class="toctext">Phix</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#PicoLisp"><span class="tocnumber">24</span> <span class="toctext">PicoLisp</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#PureBasic"><span class="tocnumber">25</span> <span class="toctext">PureBasic</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Python"><span class="tocnumber">26</span> <span class="toctext">Python</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#R"><span class="tocnumber">27</span> <span class="toctext">R</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Racket"><span class="tocnumber">28</span> <span class="toctext">Racket</span></a></li>
<li class="toclevel-1 tocsection-29"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#REXX"><span class="tocnumber">29</span> <span class="toctext">REXX</span></a></li>
<li class="toclevel-1 tocsection-30"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Rust"><span class="tocnumber">30</span> <span class="toctext">Rust</span></a></li>
<li class="toclevel-1 tocsection-31"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Scala"><span class="tocnumber">31</span> <span class="toctext">Scala</span></a></li>
<li class="toclevel-1 tocsection-32"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Smalltalk"><span class="tocnumber">32</span> <span class="toctext">Smalltalk</span></a></li>
<li class="toclevel-1 tocsection-33"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Tcl"><span class="tocnumber">33</span> <span class="toctext">Tcl</span></a></li>
<li class="toclevel-1 tocsection-34"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Ursala"><span class="tocnumber">34</span> <span class="toctext">Ursala</span></a></li>
<li class="toclevel-1 tocsection-35"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Visual_Basic_.NET"><span class="tocnumber">35</span> <span class="toctext">Visual Basic .NET</span></a></li>
<li class="toclevel-1 tocsection-36"><a href="https://rosettacode.org/wiki/Ray-casting_algorithm#zkl"><span class="tocnumber">36</span> <span class="toctext">zkl</span></a></li>
</ul>
</div>
<h2><span class="mw-headline" id="Ada"><a href="https://rosettacode.org/wiki/Category:Ada" title="Category:Ada">Ada</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=1" title="Edit section: Ada">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>polygons.ads:
</p>
<pre class="ada highlighted_source"><span class="kw3">package</span> Polygons <span class="kw1">is</span><br>&nbsp;<br>   <span class="kw3">type</span> Point <span class="kw1">is</span> <span class="kw3">record</span><br>      X, Y&nbsp;: Float;<br>   <span class="kw1">end</span> <span class="kw3">record</span>;<br>   <span class="kw3">type</span> Point_List <span class="kw1">is</span> <span class="kw3">array</span> <span class="br0">(</span>Positive <span class="kw3">range</span> &lt;&gt;<span class="br0">)</span> <span class="kw3">of</span> Point;<br>   <span class="kw3">subtype</span> Segment <span class="kw1">is</span> Point_List <span class="br0">(</span><span class="nu0">1</span> .. <span class="nu0">2</span><span class="br0">)</span>;<br>   <span class="kw3">type</span> Polygon <span class="kw1">is</span> <span class="kw3">array</span> <span class="br0">(</span>Positive <span class="kw3">range</span> &lt;&gt;<span class="br0">)</span> <span class="kw3">of</span> Segment;<br>&nbsp;<br>   <span class="kw3">function</span> Create_Polygon <span class="br0">(</span>List&nbsp;: Point_List<span class="br0">)</span> <span class="kw1">return</span> Polygon;<br>&nbsp;<br>   <span class="kw3">function</span> Is_Inside <span class="br0">(</span>Who&nbsp;: Point; Where&nbsp;: Polygon<span class="br0">)</span> <span class="kw1">return</span> Boolean;<br>&nbsp;<br><span class="kw1">end</span> Polygons;</pre>
<p>polygons.adb:
</p>
<pre class="ada highlighted_source"><span class="kw3">package</span> <span class="kw3">body</span> Polygons <span class="kw1">is</span><br>   EPSILON&nbsp;: <span class="kw3">constant</span>&nbsp;:= <span class="nu0">0.00001</span>;<br>&nbsp;<br>   <span class="kw3">function</span> Ray_Intersects_Segment<br>     <span class="br0">(</span>Who  &nbsp;: Point;<br>      Where&nbsp;: Segment<span class="br0">)</span><br>      <span class="kw1">return</span>  Boolean<br>   <span class="kw1">is</span><br>      The_Point       &nbsp;: Point  &nbsp;:= Who;<br>      Above           &nbsp;: Point;<br>      Below           &nbsp;: Point;<br>      M_Red           &nbsp;: Float;<br>      Red_Is_Infinity &nbsp;: Boolean&nbsp;:= False;<br>      M_Blue          &nbsp;: Float;<br>      Blue_Is_Infinity&nbsp;: Boolean&nbsp;:= False;<br>   <span class="kw1">begin</span><br>      <span class="kw1">if</span> Where <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">Y</span> &lt; Where <span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">Y</span> <span class="kw1">then</span><br>         Above&nbsp;:= Where <span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>;<br>         Below&nbsp;:= Where <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>;<br>      <span class="kw1">else</span><br>         Above&nbsp;:= Where <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>;<br>         Below&nbsp;:= Where <span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>;<br>      <span class="kw1">end</span> <span class="kw1">if</span>;<br>      <span class="kw1">if</span> The_Point.<span class="me1">Y</span> = Above.<span class="me1">Y</span> <span class="kw2">or</span> The_Point.<span class="me1">Y</span> = Below.<span class="me1">Y</span> <span class="kw1">then</span><br>         The_Point.<span class="me1">Y</span>&nbsp;:= The_Point.<span class="me1">Y</span> + EPSILON;<br>      <span class="kw1">end</span> <span class="kw1">if</span>;<br>      <span class="kw1">if</span> The_Point.<span class="me1">Y</span> &lt; Below.<span class="me1">Y</span> <span class="kw2">or</span> The_Point.<span class="me1">Y</span> &gt; Above.<span class="me1">Y</span> <span class="kw1">then</span><br>         <span class="kw1">return</span> False;<br>      <span class="kw1">elsif</span> The_Point.<span class="me1">X</span> &gt; Above.<span class="me1">X</span> <span class="kw2">and</span> The_Point.<span class="me1">X</span> &gt; Below.<span class="me1">X</span> <span class="kw1">then</span><br>         <span class="kw1">return</span> False;<br>      <span class="kw1">elsif</span> The_Point.<span class="me1">X</span> &lt; Above.<span class="me1">X</span> <span class="kw2">and</span> The_Point.<span class="me1">X</span> &lt; Below.<span class="me1">X</span> <span class="kw1">then</span><br>         <span class="kw1">return</span> True;<br>      <span class="kw1">else</span><br>         <span class="kw1">if</span> Above.<span class="me1">X</span> /= Below.<span class="me1">X</span> <span class="kw1">then</span><br>            M_Red&nbsp;:= <span class="br0">(</span>Above.<span class="me1">Y</span> - Below.<span class="me1">Y</span><span class="br0">)</span> / <span class="br0">(</span>Above.<span class="me1">X</span> - Below.<span class="me1">X</span><span class="br0">)</span>;<br>         <span class="kw1">else</span><br>            Red_Is_Infinity&nbsp;:= True;<br>         <span class="kw1">end</span> <span class="kw1">if</span>;<br>         <span class="kw1">if</span> Below.<span class="me1">X</span> /= The_Point.<span class="me1">X</span> <span class="kw1">then</span><br>            M_Blue&nbsp;:= <span class="br0">(</span>The_Point.<span class="me1">Y</span> - Below.<span class="me1">Y</span><span class="br0">)</span> / <span class="br0">(</span>The_Point.<span class="me1">X</span> - Below.<span class="me1">X</span><span class="br0">)</span>;<br>         <span class="kw1">else</span><br>            Blue_Is_Infinity&nbsp;:= True;<br>         <span class="kw1">end</span> <span class="kw1">if</span>;<br>         <span class="kw1">if</span> Blue_Is_Infinity <span class="kw1">then</span><br>            <span class="kw1">return</span> True;<br>         <span class="kw1">elsif</span> Red_Is_Infinity <span class="kw1">then</span><br>            <span class="kw1">return</span> False;<br>         <span class="kw1">elsif</span> M_Blue &gt;= M_Red <span class="kw1">then</span><br>            <span class="kw1">return</span> True;<br>         <span class="kw1">else</span><br>            <span class="kw1">return</span> False;<br>         <span class="kw1">end</span> <span class="kw1">if</span>;<br>      <span class="kw1">end</span> <span class="kw1">if</span>;<br>   <span class="kw1">end</span> Ray_Intersects_Segment;<br>&nbsp;<br>   <span class="kw3">function</span> Create_Polygon <span class="br0">(</span>List&nbsp;: Point_List<span class="br0">)</span> <span class="kw1">return</span> Polygon <span class="kw1">is</span><br>      Result&nbsp;: Polygon <span class="br0">(</span>List'<span class="kw3">Range</span><span class="br0">)</span>;<br>      Side  &nbsp;: Segment;<br>   <span class="kw1">begin</span><br>      <span class="kw1">for</span> I <span class="kw3">in</span> List'<span class="kw3">Range</span> <span class="kw1">loop</span><br>         Side <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>&nbsp;:= List <span class="br0">(</span>I<span class="br0">)</span>;<br>         <span class="kw1">if</span> I = List'Last <span class="kw1">then</span><br>            Side <span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>&nbsp;:= List <span class="br0">(</span>List'First<span class="br0">)</span>;<br>         <span class="kw1">else</span><br>            Side <span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>&nbsp;:= List <span class="br0">(</span>I + <span class="nu0">1</span><span class="br0">)</span>;<br>         <span class="kw1">end</span> <span class="kw1">if</span>;<br>         Result <span class="br0">(</span>I<span class="br0">)</span>&nbsp;:= Side;<br>      <span class="kw1">end</span> <span class="kw1">loop</span>;<br>      <span class="kw1">return</span> Result;<br>   <span class="kw1">end</span> Create_Polygon;<br>&nbsp;<br>   <span class="kw3">function</span> Is_Inside <span class="br0">(</span>Who&nbsp;: Point; Where&nbsp;: Polygon<span class="br0">)</span> <span class="kw1">return</span> Boolean <span class="kw1">is</span><br>      Count&nbsp;: Natural&nbsp;:= <span class="nu0">0</span>;<br>   <span class="kw1">begin</span><br>      <span class="kw1">for</span> Side <span class="kw3">in</span> Where'<span class="kw3">Range</span> <span class="kw1">loop</span><br>         <span class="kw1">if</span> Ray_Intersects_Segment <span class="br0">(</span>Who, Where <span class="br0">(</span>Side<span class="br0">)</span><span class="br0">)</span> <span class="kw1">then</span><br>            Count&nbsp;:= Count + <span class="nu0">1</span>;<br>         <span class="kw1">end</span> <span class="kw1">if</span>;<br>      <span class="kw1">end</span> <span class="kw1">loop</span>;<br>      <span class="kw1">if</span> Count <span class="kw2">mod</span> <span class="nu0">2</span> = <span class="nu0">0</span> <span class="kw1">then</span><br>         <span class="kw1">return</span> False;<br>      <span class="kw1">else</span><br>         <span class="kw1">return</span> True;<br>      <span class="kw1">end</span> <span class="kw1">if</span>;<br>   <span class="kw1">end</span> Is_Inside;<br>&nbsp;<br><span class="kw1">end</span> Polygons;</pre>
<p>Example use:
</p><p>main.adb:
</p>
<pre class="ada highlighted_source"><span class="kw3">with</span> Ada.<span class="me1">Text_IO</span>;<br><span class="kw3">with</span> Polygons;<br><span class="kw3">procedure</span> Main <span class="kw1">is</span><br>   <span class="kw3">package</span> Float_IO <span class="kw1">is</span> <span class="kw3">new</span> Ada.<span class="me1">Text_IO</span>.<span class="me1">Float_IO</span> <span class="br0">(</span>Float<span class="br0">)</span>;<br>   Test_Points&nbsp;: Polygons.<span class="me1">Point_List</span>&nbsp;:=<br>     <span class="br0">(</span><span class="br0">(</span>  <span class="nu0">5.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>,<br>      <span class="br0">(</span>  <span class="nu0">5.0</span>,  <span class="nu0">8.0</span><span class="br0">)</span>,<br>      <span class="br0">(</span>-<span class="nu0">10.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>,<br>      <span class="br0">(</span>  <span class="nu0">0.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>,<br>      <span class="br0">(</span> <span class="nu0">10.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>,<br>      <span class="br0">(</span>  <span class="nu0">8.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>,<br>      <span class="br0">(</span> <span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>;<br>   Square     &nbsp;: Polygons.<span class="me1">Polygon</span>   &nbsp;:=<br>     <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>   Square_Hole&nbsp;: Polygons.<span class="me1">Polygon</span>   &nbsp;:=<br>     <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">7.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">7.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">7.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">7.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>   Strange    &nbsp;: Polygons.<span class="me1">Polygon</span>   &nbsp;:=<br>     <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">7.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">7.5</span>,  <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">2.5</span>,  <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>   Exagon     &nbsp;: Polygons.<span class="me1">Polygon</span>   &nbsp;:=<br>     <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span> <span class="nu0">3.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">7.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">7.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">7.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">7.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">3.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">3.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span> <span class="nu0">0.0</span>,  <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span> <span class="nu0">3.0</span>,  <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br><span class="kw1">begin</span><br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">Put_Line</span> <span class="br0">(</span><span class="st0">"Testing Square:"</span><span class="br0">)</span>;<br>   <span class="kw1">for</span> Point <span class="kw3">in</span> Test_Points'<span class="kw3">Range</span> <span class="kw1">loop</span><br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">"Point("</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">X</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">","</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">Y</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span><br>        <span class="br0">(</span><span class="st0">"): "</span> &amp;<br>         Boolean'Image <span class="br0">(</span>Polygons.<span class="me1">Is_Inside</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>, Square<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   <span class="kw1">end</span> <span class="kw1">loop</span>;<br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">Put_Line</span> <span class="br0">(</span><span class="st0">"Testing Square_Hole:"</span><span class="br0">)</span>;<br>   <span class="kw1">for</span> Point <span class="kw3">in</span> Test_Points'<span class="kw3">Range</span> <span class="kw1">loop</span><br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">"Point("</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">X</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">","</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">Y</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span><br>        <span class="br0">(</span><span class="st0">"): "</span> &amp;<br>         Boolean'Image<br>            <span class="br0">(</span>Polygons.<span class="me1">Is_Inside</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>, Square_Hole<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   <span class="kw1">end</span> <span class="kw1">loop</span>;<br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">Put_Line</span> <span class="br0">(</span><span class="st0">"Testing Strange:"</span><span class="br0">)</span>;<br>   <span class="kw1">for</span> Point <span class="kw3">in</span> Test_Points'<span class="kw3">Range</span> <span class="kw1">loop</span><br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">"Point("</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">X</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">","</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">Y</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span><br>        <span class="br0">(</span><span class="st0">"): "</span> &amp;<br>         Boolean'Image <span class="br0">(</span>Polygons.<span class="me1">Is_Inside</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>, Strange<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   <span class="kw1">end</span> <span class="kw1">loop</span>;<br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   Ada.<span class="me1">Text_IO</span>.<span class="me1">Put_Line</span> <span class="br0">(</span><span class="st0">"Testing Exagon:"</span><span class="br0">)</span>;<br>   <span class="kw1">for</span> Point <span class="kw3">in</span> Test_Points'<span class="kw3">Range</span> <span class="kw1">loop</span><br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">"Point("</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">X</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span> <span class="br0">(</span><span class="st0">","</span><span class="br0">)</span>;<br>      Float_IO.<span class="me1">Put</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>.<span class="me1">Y</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">Put</span><br>        <span class="br0">(</span><span class="st0">"): "</span> &amp;<br>         Boolean'Image <span class="br0">(</span>Polygons.<span class="me1">Is_Inside</span> <span class="br0">(</span>Test_Points <span class="br0">(</span>Point<span class="br0">)</span>, Exagon<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>;<br>      Ada.<span class="me1">Text_IO</span>.<span class="me1">New_Line</span>;<br>   <span class="kw1">end</span> <span class="kw1">loop</span>;<br><span class="kw1">end</span> Main;</pre>
<p>Output:
</p>
<pre>Testing Square:
Point(5.0,5.0): TRUE
Point(5.0,8.0): TRUE
Point(-10.0,5.0): FALSE
Point(0.0,5.0): FALSE
Point(10.0,5.0): TRUE
Point(8.0,5.0): TRUE
Point(10.0,10.0): FALSE

Testing Square_Hole:
Point(5.0,5.0): FALSE
Point(5.0,8.0): TRUE
Point(-10.0,5.0): FALSE
Point(0.0,5.0): FALSE
Point(10.0,5.0): TRUE
Point(8.0,5.0): TRUE
Point(10.0,10.0): FALSE

Testing Strange:
Point(5.0,5.0): TRUE
Point(5.0,8.0): FALSE
Point(-10.0,5.0): FALSE
Point(0.0,5.0): FALSE
Point(10.0,5.0): TRUE
Point(8.0,5.0): TRUE
Point(10.0,10.0): FALSE

Testing Exagon:
Point(5.0,5.0): TRUE
Point(5.0,8.0): TRUE
Point(-10.0,5.0): FALSE
Point(0.0,5.0): FALSE
Point(10.0,5.0): TRUE
Point(8.0,5.0): TRUE
Point(10.0,10.0): FALSE</pre>
<h2><span class="mw-headline" id="ANSI_Standard_BASIC"><a href="https://rosettacode.org/mw/index.php?title=Category:ANSI_Standard_BASIC&amp;action=edit&amp;redlink=1" class="new" title="Category:ANSI Standard BASIC (page does not exist)">ANSI Standard BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=2" title="Edit section: ANSI Standard BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#FreeBASIC">FreeBASIC</a></div>
<pre class="text highlighted_source">1000 PUBLIC NUMERIC x,y<br>1010 LET x=1<br>1020 LET y=2<br>1030&nbsp;!<br>1040 DEF isLeft2(L(,),p()) = -SGN(  (L(1,x)-L(2,x))*(p(y)-L(2,y)) - (p(x)-L(2,x))*(L(1,y)-L(2,y)))<br>1050&nbsp;!<br>1060 FUNCTION inpolygon(p1(,),p2())<br>1070    LET k=UBOUND(p1,1)+1<br>1080    DIM send (1 TO 2,2)<br>1090    LET wn=0<br>1100    FOR n=1 TO UBOUND(p1,1)<br>1110       LET index=MOD(n, k)<br>1120       LET nextindex=MOD(n+1, k)<br>1130       IF nextindex=0 THEN LET nextindex=1<br>1140       LET send(1,x)=p1(index,x)<br>1150       LET send(2,x)=p1(nextindex,x)<br>1160       LET send(1,y)=p1(index,y)<br>1170       LET send(2,y)=p1(nextindex,y)<br>1180       IF p1(index,y)&lt;=p2(y) THEN<br>1190          IF p1(nextindex,y)&gt;p2(y) THEN<br>1200             IF isleft2(send,p2)&gt;=0 THEN&nbsp;!'=<br>1210                LET wn=wn+1<br>1220             END IF<br>1230          END IF<br>1240       ELSE<br>1250          IF p1(nextindex,y)&lt;=p2(y) THEN<br>1260             IF isleft2(send,p2)&lt;=0 THEN&nbsp;!'=<br>1270                LET wn=wn-1<br>1280             END IF<br>1290          END IF<br>1300       END IF<br>1310    NEXT n<br>1320    LET inpolygon = wn<br>1330 END FUNCTION<br>1340&nbsp;!<br>1350 DIM type(1 TO 2)<br>1360&nbsp;!<br>1370 DIM square(4,2)<br>1380 MAT READ square<br>1390 DATA 0,0,10,0,10,10,0,10<br>1400&nbsp;!<br>1410 DIM hole(4,2)<br>1420 MAT READ hole<br>1430 DATA 2.5,2.5,7.5,2.5,7.5,7.5,2.5,7.5<br>1440&nbsp;!<br>1450 DIM strange(8,2)<br>1460 MAT READ strange<br>1470 DATA 0,0,2.5,2.5,0,10,2.5,7.5,7.5,7.5,10,10,10,0,2.5,2.5<br>1480&nbsp;!<br>1490 DIM exagon(6,2)  <br>1500 MAT READ exagon<br>1510 DATA 3,0,7,0,10,5,7,10,3,10,0,5<br>1520&nbsp;!<br>1530&nbsp;! printouts<br>1540 FOR z=1 TO 4<br>1550    SELECT CASE z<br>1560    CASE 1<br>1570       PRINT "squared"<br>1580       PRINT "(5,5)  ";TAB(12);<br>1590       MAT READ type<br>1600       DATA 5,5<br>1610       IF inpolygon(square,type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1620       MAT READ type<br>1630       DATA 5,8<br>1640       PRINT "(5,8)  ";TAB(12);<br>1650       IF inpolygon(square,type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1660       PRINT "(-10,5)  ";TAB(12);<br>1670       MAT READ type<br>1680       DATA -10,5<br>1690       IF inpolygon(square,type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1700       Print "(0,5)  ";Tab(12);<br>1710       MAT READ type<br>1720       DATA 0,5<br>1730       IF inpolygon(square,type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1740       Print "(10,5)  ";Tab(12);<br>1750       MAT READ type<br>1760       DATA 10,5<br>1770       IF inpolygon(square,type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1780       PRINT "(8,5)  ";TAB(12);<br>1790       MAT READ type<br>1800       DATA 8,5<br>1810       IF inpolygon(square,Type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1820       PRINT "(10,10)  ";TAB(12);<br>1830       MAT READ type<br>1840       DATA 10,10<br>1850       IF inpolygon(square,Type) &lt;&gt; 0 THEN PRINT "in" ELSE PRINT "out"<br>1860       PRINT<br>1870    CASE 2<br>1880       PRINT "squared hole"<br>1890       PRINT "(5,5)  ";TAB(12);<br>1900       MAT READ type<br>1910       DATA 5,5<br>1920       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>1930       Print "(5,8)  ";Tab(12);<br>1940       MAT READ type<br>1950       DATA 5,8<br>1960       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>1970       PRINT "(-10,5)  ";TAB(12);<br>1980       MAT READ type<br>1990       DATA -10,5<br>2000       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2010       PRINT "(0,5)  ";TAB(12);<br>2020       MAT READ type<br>2030       DATA 0,5<br>2040       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2050       PRINT "(10,5)  ";TAB(12);<br>2060       MAT READ type<br>2070       DATA 10,5<br>2080       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2090       PRINT "(8,5)  ";TAB(12);<br>2100       MAT READ type<br>2110       DATA 8,5<br>2120       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2130       PRINT "(10,10)  ";TAB(12);<br>2140       MAT READ type<br>2150       DATA 10,10<br>2160       IF NOT inpolygon(hole,Type)&lt;&gt;0 AND inpolygon(square,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2170       PRINT<br>2180    CASE 3<br>2190       PRINT "strange"<br>2200       PRINT "(5,5)  ";TAB(12);<br>2210       MAT READ type<br>2220       DATA 5,5<br>2230       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2240       PRINT "(5,8)  ";TAB(12);<br>2250       MAT READ type<br>2260       DATA 5,8<br>2270       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2280       PRINT "(-10,5)  ";TAB(12);<br>2290       MAT READ type<br>2300       DATA -10,5<br>2310       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2320       PRINT "(0,5)  ";TAB(12);<br>2330       MAT READ type<br>2340       DATA 0,5<br>2350       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2360       PRINT "(10,5)  ";TAB(12);<br>2370       MAT READ type<br>2380       DATA 10,5<br>2390       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2400       PRINT "(8,5)  ";TAB(12);<br>2410       MAT READ type<br>2420       DATA 8,5<br>2430       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2440       PRINT "(10,10)  ";TAB(12);<br>2450       MAT READ type<br>2460       DATA 10,10<br>2470       IF inpolygon(strange,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2480       PRINT<br>2490    CASE 4<br>2500       PRINT "exagon"<br>2510       PRINT "(5,5)  ";TAB(12);<br>2520       MAT READ type<br>2530       DATA 5,5<br>2540       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2550       PRINT "(5,8)  ";TAB(12);<br>2560       MAT READ type<br>2570       DATA 5,8<br>2580       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2590       PRINT "(-10,5)  ";TAB(12);<br>2600       MAT READ type<br>2610       DATA -10,5<br>2620       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2630       PRINT "(0,5)  ";TAB(12);<br>2640       MAT READ type<br>2650       DATA 0,5<br>2660       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2670       PRINT "(10,5)  ";TAB(12);<br>2680       MAT READ type<br>2690       DATA 10,5<br>2700       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2710       PRINT "(8,5)  ";TAB(12);<br>2720       MAT READ type<br>2730       DATA 8,5<br>2740       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2750       PRINT "(10,10)  ";TAB(12);<br>2760       MAT READ type<br>2770       DATA 10,10<br>2780       IF inpolygon(exagon,Type)&lt;&gt;0 THEN PRINT "in" ELSE PRINT "out"<br>2790       PRINT<br>2800    END SELECT<br>2810 NEXT z<br>2820 END<br>&nbsp;</pre>
<h2><span class="mw-headline" id="AutoHotkey"><a href="https://rosettacode.org/wiki/Category:AutoHotkey" title="Category:AutoHotkey">AutoHotkey</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=3" title="Edit section: AutoHotkey">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="https://rosettacode.org/wiki/AutoHotkey_L" title="AutoHotkey L" class="mw-redirect">AutoHotkey L</a></div>
<pre class="ahk highlighted_source">Points <span class="sy0">:=</span><span class="br0">[</span><span class="br0">{</span>x:  <span class="nu0">5.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:  <span class="nu0">5.0</span><span class="sy0">,</span> y: <span class="nu0">8.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="sy0">-</span><span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:  <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:  <span class="nu0">8.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="br0">]</span><br>Square <span class="sy0">:=</span><span class="br0">[</span><span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="br0">]</span><br>Sq_Hole<span class="sy0">:=</span><span class="br0">[</span><span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><span class="br0">]</span><br>Strange<span class="sy0">:=</span><span class="br0">[</span><span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.5</span><span class="sy0">,</span> y: <span class="nu0">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">2.5</span><span class="sy0">,</span> y: <span class="nu0">2.5</span><span class="br0">}</span><span class="br0">]</span><br>Exagon <span class="sy0">:=</span><span class="br0">[</span><span class="br0">{</span>x: <span class="nu0">3.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x:<span class="nu0">10.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">7.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">3.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">3.0</span><span class="sy0">,</span> y:<span class="nu0">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><br>		<span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">0.0</span><span class="sy0">,</span> y: <span class="nu0">5.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x: <span class="nu0">3.0</span><span class="sy0">,</span> y: <span class="nu0">0.0</span><span class="br0">}</span><span class="br0">]</span><br>Polygons <span class="sy0">:=</span> <span class="br0">{</span><span class="st0">"Square"</span>:Square<span class="sy0">,</span> <span class="st0">"Sq_Hole"</span>:Sq_Hole<span class="sy0">,</span> <span class="st0">"Strange"</span>:Strange<span class="sy0">,</span> <span class="st0">"Exagon"</span>:Exagon<span class="br0">}</span><br>For j<span class="sy0">,</span> Poly in Polygons<br>	For i<span class="sy0">,</span> Point in Points<br>		<span class="kw1">If</span> <span class="br0">(</span>point_in_polygon<span class="br0">(</span>Point<span class="sy0">,</span>Poly<span class="br0">)</span><span class="br0">)</span><br>			s<span class="sy0">.=</span> j <span class="st0">" does contain point "</span> i <span class="st0">"`n"</span><br>		<span class="kw1">Else</span><br>			s<span class="sy0">.=</span> j <span class="st0">" doesn't contain point "</span> i <span class="st0">"`n"</span><br><a href="http://www.autohotkey.com/docs/commands/MsgBox.htm"><span class="kw3">Msgbox</span></a> <span class="re0">%s%</span><br>&nbsp;<br>point_in_polygon<span class="br0">(</span>Point<span class="sy0">,</span>Poly<span class="br0">)</span> <span class="br0">{</span><br>	n<span class="sy0">:=</span>Poly<span class="sy0">.</span>MaxIndex<span class="br0">(</span><span class="br0">)</span><br>	count<span class="sy0">:=</span><span class="nu0">0</span><br>	<a href="http://www.autohotkey.com/docs/commands/Loop.htm"><span class="kw3">loop</span></a><span class="sy0">,</span> <span class="re0">%n%</span> <span class="br0">{</span><br>		<span class="kw1">if</span> <span class="br0">(</span>ray_intersects_segment<span class="br0">(</span>Point<span class="sy0">,</span>Poly<span class="br0">[</span><a href="http://www.autohotkey.com/docs/Variables.htm#A_Index"><span class="kw2">A_Index</span></a><span class="br0">]</span><span class="sy0">,</span>Poly<span class="br0">[</span><a href="http://www.autohotkey.com/docs/Functions.htm#BuiltIn"><span class="kw4">mod</span></a><span class="br0">(</span><a href="http://www.autohotkey.com/docs/Variables.htm#A_Index"><span class="kw2">A_Index</span></a><span class="sy0">,</span>n<span class="br0">)</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span><br>			count<span class="sy0">++</span><br>		<span class="br0">}</span><br>	<span class="br0">}</span><br>	<span class="kw1">if</span> <span class="br0">(</span><a href="http://www.autohotkey.com/docs/Functions.htm#BuiltIn"><span class="kw4">mod</span></a><span class="br0">(</span>count<span class="sy0">,</span><span class="nu0">2</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span> <span class="co1">; true = inside, false = outside</span><br>		<span class="kw1">return</span> true		<span class="co1">; P is in the polygon</span><br>	<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>		<span class="kw1">return</span> false	<span class="co1">; P isn't in the polygon</span><br>	<span class="br0">}</span><br><span class="br0">}</span><br>&nbsp;<br>ray_intersects_segment<span class="br0">(</span>P<span class="sy0">,</span>A<span class="sy0">,</span>B<span class="br0">)</span> <span class="br0">{</span><br>	<span class="co1">;P = the point from which the ray starts</span><br>	<span class="co1">;A = the end-point of the segment with the smallest y coordinate</span><br>	<span class="co1">;B = the end-point of the segment with the greatest y coordinate</span><br>	<span class="kw1">if</span> <span class="br0">(</span>A<span class="sy0">.</span>y <span class="sy0">&gt;</span> B<span class="sy0">.</span>y<span class="br0">)</span> <span class="br0">{</span><br>		temp<span class="sy0">:=</span>A<br>		A<span class="sy0">:=</span>B<br>		B<span class="sy0">:=</span>temp<br>	<span class="br0">}</span><br>	<span class="kw1">if</span> <span class="br0">(</span>P<span class="sy0">.</span>y <span class="sy0">=</span> A<span class="sy0">.</span>y <span class="kw1">or</span> P<span class="sy0">.</span>y <span class="sy0">=</span> B<span class="sy0">.</span>y<span class="br0">)</span> <span class="br0">{</span><br>		P<span class="sy0">.</span>y <span class="sy0">+=</span> <span class="nu0">0.000001</span><br>	<span class="br0">}</span><br>	<span class="kw1">if</span> <span class="br0">(</span>P<span class="sy0">.</span>y <span class="sy0">&lt;</span> A<span class="sy0">.</span>y <span class="kw1">or</span> P<span class="sy0">.</span>y <span class="sy0">&gt;</span> B<span class="sy0">.</span>y<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> false<br>	<span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>P<span class="sy0">.</span>x <span class="sy0">&gt;</span> A<span class="sy0">.</span>x <span class="sy0">&amp;&amp;</span> P<span class="sy0">.</span>x <span class="sy0">&gt;</span> B<span class="sy0">.</span>x<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">return</span> false<br>	<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>		<span class="kw1">if</span> <span class="br0">(</span>P<span class="sy0">.</span>x <span class="sy0">&lt;</span> A<span class="sy0">.</span>x <span class="sy0">&amp;&amp;</span> P<span class="sy0">.</span>x <span class="sy0">&lt;</span> B<span class="sy0">.</span>x<span class="br0">)</span> <span class="br0">{</span><br>			<span class="kw1">return</span> true<br>		<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>			<span class="kw1">if</span> <span class="br0">(</span>A<span class="sy0">.</span>x&nbsp;!<span class="sy0">=</span> B<span class="sy0">.</span>x<span class="br0">)</span> <span class="br0">{</span><br>				m_red <span class="sy0">:=</span> <span class="br0">(</span>B<span class="sy0">.</span>y <span class="sy0">-</span> A<span class="sy0">.</span>y<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>B<span class="sy0">.</span>x <span class="sy0">-</span> A<span class="sy0">.</span>x<span class="br0">)</span><br>			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>				m_red <span class="sy0">:=</span> <span class="st0">"inf"</span><br>			<span class="br0">}</span><br>			<span class="kw1">if</span> <span class="br0">(</span>A<span class="sy0">.</span>x&nbsp;!<span class="sy0">=</span> P<span class="sy0">.</span>x<span class="br0">)</span> <span class="br0">{</span><br>				m_blue <span class="sy0">:=</span> <span class="br0">(</span>P<span class="sy0">.</span>y <span class="sy0">-</span> A<span class="sy0">.</span>y<span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span>P<span class="sy0">.</span>x <span class="sy0">-</span> A<span class="sy0">.</span>x<span class="br0">)</span><br>			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>				m_blue <span class="sy0">:=</span> <span class="st0">"inf"</span><br>			<span class="br0">}</span><br>			<span class="kw1">if</span> <span class="br0">(</span>m_blue <span class="sy0">&gt;=</span> m_red<span class="br0">)</span> <span class="br0">{</span><br>				<span class="kw1">return</span> true<br>			<span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>				<span class="kw1">return</span> false<br>			<span class="br0">}</span><br>		<span class="br0">}</span><br>	<span class="br0">}</span><br><span class="br0">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>---------------------------
Ray-casting_algorithm.ahkl
---------------------------
Exagon does contain point 1
Exagon does contain point 2
Exagon doesn't contain point 3
Exagon doesn't contain point 4
Exagon does contain point 5
Exagon does contain point 6
Exagon doesn't contain point 7
Sq_Hole doesn't contain point 1
Sq_Hole does contain point 2
Sq_Hole doesn't contain point 3
Sq_Hole doesn't contain point 4
Sq_Hole does contain point 5
Sq_Hole does contain point 6
Sq_Hole doesn't contain point 7
Square does contain point 1
Square does contain point 2
Square doesn't contain point 3
Square doesn't contain point 4
Square does contain point 5
Square does contain point 6
Square doesn't contain point 7
Strange does contain point 1
Strange doesn't contain point 2
Strange doesn't contain point 3
Strange doesn't contain point 4
Strange does contain point 5
Strange does contain point 6
Strange doesn't contain point 7

---------------------------
OK   
---------------------------</pre>
<h2><span class="mw-headline" id="C"><a href="https://rosettacode.org/wiki/Category:C" title="Category:C">C</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=4" title="Edit section: C">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="c highlighted_source"><span class="co2">#include &lt;stdio.h&gt;</span><br><span class="co2">#include &lt;stdlib.h&gt;</span><br><span class="co2">#include &lt;math.h&gt;</span><br>&nbsp;<br><span class="kw4">typedef</span> <span class="kw4">struct</span> <span class="br0">{</span> <span class="kw4">double</span> x<span class="sy0">,</span> y<span class="sy0">;</span> <span class="br0">}</span> vec<span class="sy0">;</span><br><span class="kw4">typedef</span> <span class="kw4">struct</span> <span class="br0">{</span> <span class="kw4">int</span> n<span class="sy0">;</span> vec<span class="sy0">*</span> v<span class="sy0">;</span> <span class="br0">}</span> polygon_t<span class="sy0">,</span> <span class="sy0">*</span>polygon<span class="sy0">;</span><br>&nbsp;<br><span class="co2">#define BIN_V(op, xx, yy) vec v##op(vec a,vec b){vec c;c.x=xx;c.y=yy;return c;}</span><br><span class="co2">#define BIN_S(op, r) double v##op(vec a, vec b){ return r; }</span><br>BIN_V<span class="br0">(</span>sub<span class="sy0">,</span> a.<span class="me1">x</span> <span class="sy0">-</span> b.<span class="me1">x</span><span class="sy0">,</span> a.<span class="me1">y</span> <span class="sy0">-</span> b.<span class="me1">y</span><span class="br0">)</span><span class="sy0">;</span><br>BIN_V<span class="br0">(</span>add<span class="sy0">,</span> a.<span class="me1">x</span> <span class="sy0">+</span> b.<span class="me1">x</span><span class="sy0">,</span> a.<span class="me1">y</span> <span class="sy0">+</span> b.<span class="me1">y</span><span class="br0">)</span><span class="sy0">;</span><br>BIN_S<span class="br0">(</span>dot<span class="sy0">,</span> a.<span class="me1">x</span> <span class="sy0">*</span> b.<span class="me1">x</span> <span class="sy0">+</span> a.<span class="me1">y</span> <span class="sy0">*</span> b.<span class="me1">y</span><span class="br0">)</span><span class="sy0">;</span><br>BIN_S<span class="br0">(</span>cross<span class="sy0">,</span> a.<span class="me1">x</span> <span class="sy0">*</span> b.<span class="me1">y</span> <span class="sy0">-</span> a.<span class="me1">y</span> <span class="sy0">*</span> b.<span class="me1">x</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="coMULTI">/* return a + s * b */</span><br>vec vmadd<span class="br0">(</span>vec a<span class="sy0">,</span> <span class="kw4">double</span> s<span class="sy0">,</span> vec b<span class="br0">)</span><br><span class="br0">{</span><br>	vec c<span class="sy0">;</span><br>	c.<span class="me1">x</span> <span class="sy0">=</span> a.<span class="me1">x</span> <span class="sy0">+</span> s <span class="sy0">*</span> b.<span class="me1">x</span><span class="sy0">;</span><br>	c.<span class="me1">y</span> <span class="sy0">=</span> a.<span class="me1">y</span> <span class="sy0">+</span> s <span class="sy0">*</span> b.<span class="me1">y</span><span class="sy0">;</span><br>	<span class="kw1">return</span> c<span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="coMULTI">/* check if x0-&gt;x1 edge crosses y0-&gt;y1 edge. dx = x1 - x0, dy = y1 - y0, then<br>   solve  x0 + a * dx == y0 + b * dy with a, b in real<br>   cross both sides with dx, then: (remember, cross product is a scalar)<br>	x0 X dx = y0 X dx + b * (dy X dx)<br>   similarly,<br>	x0 X dy + a * (dx X dy) == y0 X dy<br>   there is an intersection iff 0 &lt;= a &lt;= 1 and 0 &lt;= b &lt;= 1<br>&nbsp;<br>   returns: 1 for intersect, -1 for not, 0 for hard to say (if the intersect<br>   point is too close to y0 or y1)<br>*/</span><br><span class="kw4">int</span> intersect<span class="br0">(</span>vec x0<span class="sy0">,</span> vec x1<span class="sy0">,</span> vec y0<span class="sy0">,</span> vec y1<span class="sy0">,</span> <span class="kw4">double</span> tol<span class="sy0">,</span> vec <span class="sy0">*</span>sect<span class="br0">)</span><br><span class="br0">{</span><br>	vec dx <span class="sy0">=</span> vsub<span class="br0">(</span>x1<span class="sy0">,</span> x0<span class="br0">)</span><span class="sy0">,</span> dy <span class="sy0">=</span> vsub<span class="br0">(</span>y1<span class="sy0">,</span> y0<span class="br0">)</span><span class="sy0">;</span><br>	<span class="kw4">double</span> d <span class="sy0">=</span> vcross<span class="br0">(</span>dy<span class="sy0">,</span> dx<span class="br0">)</span><span class="sy0">,</span> a<span class="sy0">;</span><br>	<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span>d<span class="br0">)</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="coMULTI">/* edges are parallel */</span><br>&nbsp;<br>	a <span class="sy0">=</span> <span class="br0">(</span>vcross<span class="br0">(</span>x0<span class="sy0">,</span> dx<span class="br0">)</span> <span class="sy0">-</span> vcross<span class="br0">(</span>y0<span class="sy0">,</span> dx<span class="br0">)</span><span class="br0">)</span> <span class="sy0">/</span> d<span class="sy0">;</span><br>	<span class="kw1">if</span> <span class="br0">(</span>sect<span class="br0">)</span><br>		<span class="sy0">*</span>sect <span class="sy0">=</span> vmadd<span class="br0">(</span>y0<span class="sy0">,</span> a<span class="sy0">,</span> dy<span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw1">if</span> <span class="br0">(</span>a <span class="sy0">&lt;</span> <span class="sy0">-</span>tol <span class="sy0">||</span> a <span class="sy0">&gt;</span> <span class="nu0">1</span> <span class="sy0">+</span> tol<span class="br0">)</span> <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span><br>	<span class="kw1">if</span> <span class="br0">(</span>a <span class="sy0">&lt;</span> tol <span class="sy0">||</span> a <span class="sy0">&gt;</span> <span class="nu0">1</span> <span class="sy0">-</span> tol<span class="br0">)</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span><br>&nbsp;<br>	a <span class="sy0">=</span> <span class="br0">(</span>vcross<span class="br0">(</span>x0<span class="sy0">,</span> dy<span class="br0">)</span> <span class="sy0">-</span> vcross<span class="br0">(</span>y0<span class="sy0">,</span> dy<span class="br0">)</span><span class="br0">)</span> <span class="sy0">/</span> d<span class="sy0">;</span><br>	<span class="kw1">if</span> <span class="br0">(</span>a <span class="sy0">&lt;</span> <span class="nu0">0</span> <span class="sy0">||</span> a <span class="sy0">&gt;</span> <span class="nu0">1</span><span class="br0">)</span> <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="coMULTI">/* distance between x and nearest point on y0-&gt;y1 segment.  if the point<br>   lies outside the segment, returns infinity */</span><br><span class="kw4">double</span> dist<span class="br0">(</span>vec x<span class="sy0">,</span> vec y0<span class="sy0">,</span> vec y1<span class="sy0">,</span> <span class="kw4">double</span> tol<span class="br0">)</span><br><span class="br0">{</span><br>	vec dy <span class="sy0">=</span> vsub<span class="br0">(</span>y1<span class="sy0">,</span> y0<span class="br0">)</span><span class="sy0">;</span><br>	vec x1<span class="sy0">,</span> s<span class="sy0">;</span><br>	<span class="kw4">int</span> r<span class="sy0">;</span><br>&nbsp;<br>	x1.<span class="me1">x</span> <span class="sy0">=</span> x.<span class="me1">x</span> <span class="sy0">+</span> dy.<span class="me1">y</span><span class="sy0">;</span> x1.<span class="me1">y</span> <span class="sy0">=</span> x.<span class="me1">y</span> <span class="sy0">-</span> dy.<span class="me1">x</span><span class="sy0">;</span><br>	r <span class="sy0">=</span> intersect<span class="br0">(</span>x<span class="sy0">,</span> x1<span class="sy0">,</span> y0<span class="sy0">,</span> y1<span class="sy0">,</span> tol<span class="sy0">,</span> <span class="sy0">&amp;</span>s<span class="br0">)</span><span class="sy0">;</span><br>	<span class="kw1">if</span> <span class="br0">(</span>r <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">)</span> <span class="kw1">return</span> HUGE_VAL<span class="sy0">;</span><br>	s <span class="sy0">=</span> vsub<span class="br0">(</span>s<span class="sy0">,</span> x<span class="br0">)</span><span class="sy0">;</span><br>	<span class="kw1">return</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/sqrt.html"><span class="kw3">sqrt</span></a><span class="br0">(</span>vdot<span class="br0">(</span>s<span class="sy0">,</span> s<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="co2">#define for_v(i, z, p) for(i = 0, z = p-&gt;v; i &lt; p-&gt;n; i++, z++)</span><br><span class="coMULTI">/* returns 1 for inside, -1 for outside, 0 for on edge */</span><br><span class="kw4">int</span> inside<span class="br0">(</span>vec v<span class="sy0">,</span> polygon p<span class="sy0">,</span> <span class="kw4">double</span> tol<span class="br0">)</span><br><span class="br0">{</span><br>	<span class="coMULTI">/* should assert p-&gt;n &gt; 1 */</span><br>	<span class="kw4">int</span> i<span class="sy0">,</span> k<span class="sy0">,</span> crosses<span class="sy0">,</span> intersectResult<span class="sy0">;</span><br>	vec <span class="sy0">*</span>pv<span class="sy0">;</span><br>	<span class="kw4">double</span> min_x<span class="sy0">,</span> max_x<span class="sy0">,</span> min_y<span class="sy0">,</span> max_y<span class="sy0">;</span><br>&nbsp;<br>	<span class="kw1">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> p<span class="sy0">-&gt;</span>n<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>		k <span class="sy0">=</span> <span class="br0">(</span>i <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">%</span> p<span class="sy0">-&gt;</span>n<span class="sy0">;</span><br>		min_x <span class="sy0">=</span> dist<span class="br0">(</span>v<span class="sy0">,</span> p<span class="sy0">-&gt;</span>v<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">,</span> p<span class="sy0">-&gt;</span>v<span class="br0">[</span>k<span class="br0">]</span><span class="sy0">,</span> tol<span class="br0">)</span><span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span>min_x <span class="sy0">&lt;</span> tol<span class="br0">)</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>&nbsp;<br>	min_x <span class="sy0">=</span> max_x <span class="sy0">=</span> p<span class="sy0">-&gt;</span>v<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>.<span class="me1">x</span><span class="sy0">;</span><br>	min_y <span class="sy0">=</span> max_y <span class="sy0">=</span> p<span class="sy0">-&gt;</span>v<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>.<span class="me1">y</span><span class="sy0">;</span><br>&nbsp;<br>	<span class="coMULTI">/* calculate extent of polygon */</span><br>	for_v<span class="br0">(</span>i<span class="sy0">,</span> pv<span class="sy0">,</span> p<span class="br0">)</span> <span class="br0">{</span><br>		<span class="kw1">if</span> <span class="br0">(</span>pv<span class="sy0">-&gt;</span>x <span class="sy0">&gt;</span> max_x<span class="br0">)</span> max_x <span class="sy0">=</span> pv<span class="sy0">-&gt;</span>x<span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span>pv<span class="sy0">-&gt;</span>x <span class="sy0">&lt;</span> min_x<span class="br0">)</span> min_x <span class="sy0">=</span> pv<span class="sy0">-&gt;</span>x<span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span>pv<span class="sy0">-&gt;</span>y <span class="sy0">&gt;</span> max_y<span class="br0">)</span> max_y <span class="sy0">=</span> pv<span class="sy0">-&gt;</span>y<span class="sy0">;</span><br>		<span class="kw1">if</span> <span class="br0">(</span>pv<span class="sy0">-&gt;</span>y <span class="sy0">&lt;</span> min_y<span class="br0">)</span> min_y <span class="sy0">=</span> pv<span class="sy0">-&gt;</span>y<span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">if</span> <span class="br0">(</span>v.<span class="me1">x</span> <span class="sy0">&lt;</span> min_x <span class="sy0">||</span> v.<span class="me1">x</span> <span class="sy0">&gt;</span> max_x <span class="sy0">||</span> v.<span class="me1">y</span> <span class="sy0">&lt;</span> min_y <span class="sy0">||</span> v.<span class="me1">y</span> <span class="sy0">&gt;</span> max_y<span class="br0">)</span><br>		<span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span><br>&nbsp;<br>	max_x <span class="sy0">-=</span> min_x<span class="sy0">;</span> max_x <span class="sy0">*=</span> <span class="nu0">2</span><span class="sy0">;</span><br>	max_y <span class="sy0">-=</span> min_y<span class="sy0">;</span> max_y <span class="sy0">*=</span> <span class="nu0">2</span><span class="sy0">;</span><br>	max_x <span class="sy0">+=</span> max_y<span class="sy0">;</span><br>&nbsp;<br>	vec e<span class="sy0">;</span><br>	<span class="kw1">while</span> <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">{</span><br>		crosses <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><br>		<span class="coMULTI">/* pick a rand point far enough to be outside polygon */</span><br>		e.<span class="me1">x</span> <span class="sy0">=</span> v.<span class="me1">x</span> <span class="sy0">+</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">+</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/rand.html"><span class="kw3">rand</span></a><span class="br0">(</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>RAND_MAX <span class="sy0">+</span> <span class="nu0">1</span>.<span class="br0">)</span><span class="br0">)</span> <span class="sy0">*</span> max_x<span class="sy0">;</span><br>		e.<span class="me1">y</span> <span class="sy0">=</span> v.<span class="me1">y</span> <span class="sy0">+</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy0">+</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/rand.html"><span class="kw3">rand</span></a><span class="br0">(</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>RAND_MAX <span class="sy0">+</span> <span class="nu0">1</span>.<span class="br0">)</span><span class="br0">)</span> <span class="sy0">*</span> max_x<span class="sy0">;</span><br>&nbsp;<br>		<span class="kw1">for</span> <span class="br0">(</span>i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> p<span class="sy0">-&gt;</span>n<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>			k <span class="sy0">=</span> <span class="br0">(</span>i <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">%</span> p<span class="sy0">-&gt;</span>n<span class="sy0">;</span><br>			intersectResult <span class="sy0">=</span> intersect<span class="br0">(</span>v<span class="sy0">,</span> e<span class="sy0">,</span> p<span class="sy0">-&gt;</span>v<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">,</span> p<span class="sy0">-&gt;</span>v<span class="br0">[</span>k<span class="br0">]</span><span class="sy0">,</span> tol<span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>			<span class="coMULTI">/* picked a bad point, ray got too close to vertex.<br>			   re-pick */</span><br>			<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span>intersectResult<span class="br0">)</span> <span class="kw2">break</span><span class="sy0">;</span><br>&nbsp;<br>			<span class="kw1">if</span> <span class="br0">(</span>intersectResult <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">)</span> crosses<span class="sy0">++;</span><br>		<span class="br0">}</span><br>		<span class="kw1">if</span> <span class="br0">(</span>i <span class="sy0">==</span> p<span class="sy0">-&gt;</span>n<span class="br0">)</span> <span class="kw2">break</span><span class="sy0">;</span><br>	<span class="br0">}</span><br>	<span class="kw1">return</span> <span class="br0">(</span>crosses <span class="sy0">&amp;</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">?</span> <span class="nu0">1</span> <span class="sy0">:</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span><br><span class="br0">{</span><br>	vec vsq<span class="br0">[</span><span class="br0">]</span> <span class="sy0">=</span> <span class="br0">{</span>	<span class="br0">{</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span><br>			<span class="br0">{</span><span class="nu16">2.5</span><span class="sy0">,</span><span class="nu16">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">7.5</span><span class="sy0">,</span><span class="nu16">0.1</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">7.5</span><span class="sy0">,</span><span class="nu16">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">2.5</span><span class="sy0">,</span><span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>	polygon_t sq <span class="sy0">=</span> <span class="br0">{</span> <span class="nu0">4</span><span class="sy0">,</span> vsq <span class="br0">}</span><span class="sy0">,</span> <span class="coMULTI">/* outer square */</span><br>		sq_hole <span class="sy0">=</span> <span class="br0">{</span> <span class="nu0">8</span><span class="sy0">,</span> vsq <span class="br0">}</span><span class="sy0">;</span> <span class="coMULTI">/* outer and inner square, ie hole */</span><br>&nbsp;<br>	vec c <span class="sy0">=</span> <span class="br0">{</span> <span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">5</span> <span class="br0">}</span><span class="sy0">;</span> <span class="coMULTI">/* on edge */</span><br>	vec d <span class="sy0">=</span> <span class="br0">{</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">5</span> <span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">(</span><span class="st0">"%d<span class="es1">\n</span>"</span><span class="sy0">,</span> inside<span class="br0">(</span>c<span class="sy0">,</span> <span class="sy0">&amp;</span>sq<span class="sy0">,</span> <span class="nu19">1e-10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">(</span><span class="st0">"%d<span class="es1">\n</span>"</span><span class="sy0">,</span> inside<span class="br0">(</span>c<span class="sy0">,</span> <span class="sy0">&amp;</span>sq_hole<span class="sy0">,</span> <span class="nu19">1e-10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">(</span><span class="st0">"%d<span class="es1">\n</span>"</span><span class="sy0">,</span> inside<span class="br0">(</span>d<span class="sy0">,</span> <span class="sy0">&amp;</span>sq<span class="sy0">,</span> <span class="nu19">1e-10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>	<span class="coMULTI">/* in */</span><br>	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">(</span><span class="st0">"%d<span class="es1">\n</span>"</span><span class="sy0">,</span> inside<span class="br0">(</span>d<span class="sy0">,</span> <span class="sy0">&amp;</span>sq_hole<span class="sy0">,</span> <span class="nu19">1e-10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>  <span class="coMULTI">/* out (in the hole) */</span><br>&nbsp;<br>	<span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span><br><span class="br0">}</span></pre>
<h2><span class="mw-headline" id="C.2B.2B"><a href="https://rosettacode.org/wiki/Category:C%2B%2B" title="Category:C++">C++</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=5" title="Edit section: C++">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="https://rosettacode.org/wiki/C%2B%2B" title="C++" class="mw-redirect">C++</a> version 11</div>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#D">D</a></div>
<pre class="cpp highlighted_source"><span class="co2">#include &lt;algorithm&gt;</span><br><span class="co2">#include &lt;cstdlib&gt;</span><br><span class="co2">#include &lt;iomanip&gt;</span><br><span class="co2">#include &lt;iostream&gt;</span><br><span class="co2">#include &lt;limits&gt;</span><br>&nbsp;<br><span class="kw2">using</span> <span class="kw2">namespace</span> std<span class="sy4">;</span><br>&nbsp;<br><span class="kw4">const</span> <span class="kw4">double</span> epsilon <span class="sy1">=</span> numeric_limits<span class="sy1">&lt;</span><span class="kw4">float</span><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">epsilon</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span><br><span class="kw4">const</span> numeric_limits<span class="sy1">&lt;</span><span class="kw4">double</span><span class="sy1">&gt;</span> DOUBLE<span class="sy4">;</span><br><span class="kw4">const</span> <span class="kw4">double</span> MIN <span class="sy1">=</span> DOUBLE.<span class="me1">min</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span><br><span class="kw4">const</span> <span class="kw4">double</span> MAX <span class="sy1">=</span> DOUBLE.<span class="me1">max</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span><br>&nbsp;<br><span class="kw4">struct</span> Point <span class="br0">{</span> <span class="kw4">const</span> <span class="kw4">double</span> x, y<span class="sy4">;</span> <span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br><span class="kw4">struct</span> Edge <span class="br0">{</span><br>    <span class="kw4">const</span> Point a, b<span class="sy4">;</span><br>&nbsp;<br>    <span class="kw4">bool</span> operator<span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="kw4">const</span> Point<span class="sy3">&amp;</span> p<span class="br0">)</span> <span class="kw4">const</span><br>    <span class="br0">{</span><br>        <span class="kw1">if</span> <span class="br0">(</span>a.<span class="me1">y</span> <span class="sy1">&gt;</span> b.<span class="me1">y</span><span class="br0">)</span> <span class="kw1">return</span> Edge<span class="br0">{</span> b, a <span class="br0">}</span><span class="br0">(</span>p<span class="br0">)</span><span class="sy4">;</span><br>        <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy1">==</span> a.<span class="me1">y</span> <span class="sy3">||</span> p.<span class="me1">y</span> <span class="sy1">==</span> b.<span class="me1">y</span><span class="br0">)</span> <span class="kw1">return</span> operator<span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">{</span> p.<span class="me1">x</span>, p.<span class="me1">y</span> <span class="sy2">+</span> epsilon <span class="br0">}</span><span class="br0">)</span><span class="sy4">;</span><br>        <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy1">&gt;</span> b.<span class="me1">y</span> <span class="sy3">||</span> p.<span class="me1">y</span> <span class="sy1">&lt;</span> a.<span class="me1">y</span> <span class="sy3">||</span> p.<span class="me1">x</span> <span class="sy1">&gt;</span> max<span class="br0">(</span>a.<span class="me1">x</span>, b.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span><br>        <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">x</span> <span class="sy1">&lt;</span> min<span class="br0">(</span>a.<span class="me1">x</span>, b.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span><br>        <span class="kw4">auto</span> blue <span class="sy1">=</span> <span class="kw3">abs</span><span class="br0">(</span>a.<span class="me1">x</span> <span class="sy2">-</span> p.<span class="me1">x</span><span class="br0">)</span> <span class="sy1">&gt;</span> MIN <span class="sy4">?</span> <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy2">-</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="sy2">/</span> <span class="br0">(</span>p.<span class="me1">x</span> <span class="sy2">-</span> a.<span class="me1">x</span><span class="br0">)</span> <span class="sy4">:</span> MAX<span class="sy4">;</span><br>        <span class="kw4">auto</span> red <span class="sy1">=</span> <span class="kw3">abs</span><span class="br0">(</span>a.<span class="me1">x</span> <span class="sy2">-</span> b.<span class="me1">x</span><span class="br0">)</span> <span class="sy1">&gt;</span> MIN <span class="sy4">?</span> <span class="br0">(</span>b.<span class="me1">y</span> <span class="sy2">-</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="sy2">/</span> <span class="br0">(</span>b.<span class="me1">x</span> <span class="sy2">-</span> a.<span class="me1">x</span><span class="br0">)</span> <span class="sy4">:</span> MAX<span class="sy4">;</span><br>        <span class="kw1">return</span> blue <span class="sy1">&gt;=</span> red<span class="sy4">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br><span class="kw4">struct</span> Figure <span class="br0">{</span><br>    <span class="kw4">const</span> string  name<span class="sy4">;</span><br>    <span class="kw4">const</span> initializer_list<span class="sy1">&lt;</span>Edge<span class="sy1">&gt;</span> edges<span class="sy4">;</span><br>&nbsp;<br>    <span class="kw4">bool</span> contains<span class="br0">(</span><span class="kw4">const</span> Point<span class="sy3">&amp;</span> p<span class="br0">)</span> <span class="kw4">const</span><br>    <span class="br0">{</span><br>        <span class="kw4">auto</span> c <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span><br>        <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">auto</span> e <span class="sy4">:</span> edges<span class="br0">)</span> <span class="kw1">if</span> <span class="br0">(</span>e<span class="br0">(</span>p<span class="br0">)</span><span class="br0">)</span> c<span class="sy2">++</span><span class="sy4">;</span><br>        <span class="kw1">return</span> c <span class="sy2">%</span> <span class="nu0">2</span> <span class="sy3">!</span><span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span><br>    <span class="br0">}</span><br>&nbsp;<br>    <span class="kw2">template</span><span class="sy1">&lt;</span><span class="kw4">unsigned</span> <span class="kw4">char</span> W <span class="sy1">=</span> <span class="nu0">3</span><span class="sy1">&gt;</span><br>    <span class="kw4">void</span> check<span class="br0">(</span><span class="kw4">const</span> initializer_list<span class="sy1">&lt;</span>Point<span class="sy1">&gt;</span><span class="sy3">&amp;</span> points, ostream<span class="sy3">&amp;</span> os<span class="br0">)</span> <span class="kw4">const</span><br>    <span class="br0">{</span><br>        os <span class="sy1">&lt;&lt;</span> <span class="st0">"Is point inside figure "</span> <span class="sy1">&lt;&lt;</span> name <span class="sy1">&lt;&lt;</span>  <span class="st0">'?'</span> <span class="sy1">&lt;&lt;</span> endl<span class="sy4">;</span><br>        <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">auto</span> p <span class="sy4">:</span> points<span class="br0">)</span><br>            os <span class="sy1">&lt;&lt;</span> <span class="st0">"  ("</span> <span class="sy1">&lt;&lt;</span> setw<span class="br0">(</span>W<span class="br0">)</span> <span class="sy1">&lt;&lt;</span> p.<span class="me1">x</span> <span class="sy1">&lt;&lt;</span> <span class="st0">','</span> <span class="sy1">&lt;&lt;</span> setw<span class="br0">(</span>W<span class="br0">)</span> <span class="sy1">&lt;&lt;</span> p.<span class="me1">y</span> <span class="sy1">&lt;&lt;</span> <span class="st0">"): "</span> <span class="sy1">&lt;&lt;</span> boolalpha <span class="sy1">&lt;&lt;</span> contains<span class="br0">(</span>p<span class="br0">)</span> <span class="sy1">&lt;&lt;</span> endl<span class="sy4">;</span><br>        os <span class="sy1">&lt;&lt;</span> endl<span class="sy4">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br><span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span><br><span class="br0">{</span><br>    <span class="kw4">const</span> initializer_list<span class="sy1">&lt;</span>Point<span class="sy1">&gt;</span> points <span class="sy1">=</span>  <span class="br0">{</span> <span class="br0">{</span> <span class="nu16">5.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">5.0</span>, <span class="nu16">8.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="sy2">-</span><span class="nu16">10.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">8.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span> <span class="br0">}</span><span class="sy4">;</span><br>    <span class="kw4">const</span> Figure square <span class="sy1">=</span> <span class="br0">{</span> <span class="st0">"Square"</span>,<br>        <span class="br0">{</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span> <span class="br0">}</span><br>    <span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br>    <span class="kw4">const</span> Figure square_hole <span class="sy1">=</span> <span class="br0">{</span> <span class="st0">"Square hole"</span>,<br>        <span class="br0">{</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span>,<br>           <span class="br0">{</span><span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">2.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">7.5</span>, <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">7.5</span>, <span class="nu16">2.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">7.5</span>, <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">7.5</span>, <span class="nu16">7.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">7.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br>    <span class="kw4">const</span> Figure strange <span class="sy1">=</span> <span class="br0">{</span> <span class="st0">"Strange"</span>,<br>        <span class="br0">{</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">2.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">7.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">7.5</span>, <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span>,<br>           <span class="br0">{</span><span class="br0">{</span><span class="nu16">7.5</span>, <span class="nu16">7.5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">2.5</span>, <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br>    <span class="kw4">const</span> Figure exagon <span class="sy1">=</span> <span class="br0">{</span> <span class="st0">"Exagon"</span>,<br>        <span class="br0">{</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">3.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">7.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">7.0</span>, <span class="nu16">0.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">5.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">7.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">7.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">3.0</span>, <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span>,<br>           <span class="br0">{</span><span class="br0">{</span><span class="nu16">3.0</span>, <span class="nu16">10.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">5.0</span><span class="br0">}</span><span class="br0">}</span>, <span class="br0">{</span><span class="br0">{</span><span class="nu16">0.0</span>, <span class="nu16">5.0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu16">3.0</span>, <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><span class="sy4">;</span><br>&nbsp;<br>    <span class="kw1">for</span><span class="br0">(</span><span class="kw4">auto</span> f <span class="sy4">:</span> <span class="br0">{</span>square, square_hole, strange, exagon<span class="br0">}</span><span class="br0">)</span><br>        f.<span class="me1">check</span><span class="br0">(</span>points, <span class="kw3">cout</span><span class="br0">)</span><span class="sy4">;</span><br>&nbsp;<br>    <span class="kw1">return</span> <span class="kw2">EXIT_SUCCESS</span><span class="sy4">;</span><br><span class="br0">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<p>As D.
</p>
<h2><span class="mw-headline" id="CoffeeScript"><a href="https://rosettacode.org/wiki/Category:CoffeeScript" title="Category:CoffeeScript">CoffeeScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=6" title="Edit section: CoffeeScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Takes a polygon as a list of points joining segments, and creates segments between them.
</p>
<pre class="coffeescript highlighted_source">  Point = <span class="br0">(</span><span class="sy0">@</span>x<span class="sy0">,@</span>y<span class="br0">)</span> <span class="sy0">-&gt;</span><br>&nbsp;<br>  pointInPoly = <span class="br0">(</span>point<span class="sy0">,</span>poly<span class="br0">)</span> <span class="sy0">-&gt;</span><br>    segments = <span class="kw1">for</span> pointA<span class="sy0">,</span> index <span class="kw1">in</span> poly<br>                 pointB = poly<span class="br0">[</span><span class="br0">(</span>index <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">%</span> poly.<span class="me1">length</span><span class="br0">]</span><br>                 <span class="br0">[</span>pointA<span class="sy0">,</span>pointB<span class="br0">]</span><br>    intesected = <span class="br0">(</span>segment <span class="kw1">for</span> segment <span class="kw1">in</span> segments <span class="kw1">when</span> rayIntesectsSegment<span class="br0">(</span>point<span class="sy0">,</span>segment<span class="br0">)</span><span class="br0">)</span><br>    intesected.<span class="me1">length</span> <span class="sy0">%</span> <span class="nu0">2</span> <span class="sy0">!</span>= <span class="nu0">0</span><br>&nbsp;<br>  rayIntesectsSegment = <span class="br0">(</span>p<span class="sy0">,</span>segment<span class="br0">)</span> <span class="sy0">-&gt;</span><br>    <span class="br0">[</span>p1<span class="sy0">,</span>p2<span class="br0">]</span> = segment<br>    <span class="br0">[</span>a<span class="sy0">,</span>b<span class="br0">]</span> = <span class="kw1">if</span> p1.<span class="me1">y</span> <span class="sy0">&lt;</span> p2.<span class="me1">y</span><br>              <span class="br0">[</span>p1<span class="sy0">,</span>p2<span class="br0">]</span><br>            <span class="kw1">else</span><br>              <span class="br0">[</span>p2<span class="sy0">,</span>p1<span class="br0">]</span><br>    <span class="kw1">if</span> p.<span class="me1">y</span> == b.<span class="me1">y</span> <span class="sy0">||</span> p.<span class="me1">y</span> == a.<span class="me1">y</span><br>      p.<span class="me1">y</span> <span class="sy0">+</span>= Number.<span class="me1">MIN_VALUE</span><br>&nbsp;<br>    <span class="kw1">if</span> p.<span class="me1">y</span> <span class="sy0">&gt;</span> b.<span class="me1">y</span> <span class="sy0">||</span> p.<span class="me1">y</span> <span class="sy0">&lt;</span> a.<span class="me1">y</span><br>      <span class="kw4">false</span><br>    <span class="kw1">else</span> <span class="kw1">if</span> p.<span class="me1">x</span> <span class="sy0">&gt;</span> a.<span class="me1">x</span> <span class="sy0">&amp;&amp;</span> p.<span class="me1">x</span> <span class="sy0">&gt;</span> b.<span class="me1">x</span><br>      <span class="kw4">false</span><br>    <span class="kw1">else</span> <span class="kw1">if</span> p.<span class="me1">x</span> <span class="sy0">&lt;</span> a.<span class="me1">x</span> <span class="sy0">&amp;&amp;</span> p.<span class="me1">x</span> <span class="sy0">&lt;</span> b.<span class="me1">x</span><br>      <span class="kw4">true</span><br>    <span class="kw1">else</span><br>      mAB = <span class="br0">(</span>b.<span class="me1">y</span> <span class="sy0">-</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>b.<span class="me1">x</span> <span class="sy0">-</span> a.<span class="me1">x</span><span class="br0">)</span><br>      mAP = <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy0">-</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>p.<span class="me1">x</span> <span class="sy0">-</span> a.<span class="me1">x</span><span class="br0">)</span><br>      mAP <span class="sy0">&gt;</span> mAB</pre>
<h2><span class="mw-headline" id="Common_Lisp"><a href="https://rosettacode.org/wiki/Category:Common_Lisp" title="Category:Common Lisp">Common Lisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=7" title="Edit section: Common Lisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Points are represented as cons cells whose car is an x value and whose cdr is a y value. A line segment is a cons cell of two points. A polygon is a list of line segments.
</p>
<pre class="lisp highlighted_source"><span class="br0">(</span><span class="kw1">defun</span> point-in-polygon <span class="br0">(</span>point polygon<span class="br0">)</span><br>  <span class="br0">(</span><span class="kw1">do</span> <span class="br0">(</span><span class="br0">(</span>in-p <span class="kw1">nil</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">(</span><span class="br0">(</span>endp polygon<span class="br0">)</span> in-p<span class="br0">)</span><br>    <span class="br0">(</span><span class="kw1">when</span> <span class="br0">(</span>ray-intersects-segment point <span class="br0">(</span>pop polygon<span class="br0">)</span><span class="br0">)</span><br>      <span class="br0">(</span><span class="kw1">setf</span> in-p <span class="br0">(</span><span class="kw1">not</span> in-p<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> ray-intersects-segment <span class="br0">(</span>point segment <span class="sy0">&amp;</span>optional <span class="br0">(</span>epsilon <span class="sy0">.</span>001<span class="br0">)</span><span class="br0">)</span><br>  <span class="br0">(</span>destructuring-bind <span class="br0">(</span>px <span class="sy0">.</span> py<span class="br0">)</span> point<br>    <span class="br0">(</span>destructuring-bind <span class="br0">(</span><span class="br0">(</span>ax <span class="sy0">.</span> ay<span class="br0">)</span> <span class="sy0">.</span> <span class="br0">(</span>bx <span class="sy0">.</span> by<span class="br0">)</span><span class="br0">)</span> segment<br>      <span class="br0">(</span><span class="kw1">when</span> <span class="br0">(</span><span class="sy0">&lt;</span> ay by<span class="br0">)</span><br>        <span class="br0">(</span>rotatef ay by<span class="br0">)</span><br>        <span class="br0">(</span>rotatef ax bx<span class="br0">)</span><span class="br0">)</span><br>      <span class="br0">(</span><span class="kw1">when</span> <span class="br0">(</span><span class="kw1">or</span> <span class="br0">(</span><span class="sy0">=</span> py ay<span class="br0">)</span> <span class="br0">(</span><span class="sy0">=</span> py by<span class="br0">)</span><span class="br0">)</span><br>        <span class="br0">(</span>incf py epsilon<span class="br0">)</span><span class="br0">)</span><br>      <span class="br0">(</span><span class="kw1">cond</span><br>       <span class="co1">;; point is above, below, or to the right of the rectangle</span><br>       <span class="co1">;; determined by segment; ray does not intesect the segment.</span><br>       <span class="br0">(</span><span class="br0">(</span><span class="kw1">or</span> <span class="br0">(</span><span class="sy0">&gt;</span> px <span class="br0">(</span><span class="kw1">max</span> ax bx<span class="br0">)</span><span class="br0">)</span> <span class="br0">(</span><span class="sy0">&gt;</span> py <span class="br0">(</span><span class="kw1">max</span> ay by<span class="br0">)</span><span class="br0">)</span> <span class="br0">(</span><span class="sy0">&lt;</span> py <span class="br0">(</span><span class="kw1">min</span> ay by<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="kw1">nil</span><span class="br0">)</span><br>       <span class="co1">;; point is to left of the rectangle; ray intersects segment</span><br>       <span class="br0">(</span><span class="br0">(</span><span class="sy0">&lt;</span> px <span class="br0">(</span><span class="kw1">min</span> ax bx<span class="br0">)</span><span class="br0">)</span><br>        t<span class="br0">)</span><br>       <span class="co1">;; point is within the rectangle...</span><br>       <span class="br0">(</span>t <span class="br0">(</span><span class="kw1">let</span> <span class="br0">(</span><span class="br0">(</span>m-red <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">=</span> ax bx<span class="br0">)</span> <span class="kw1">nil</span><br>                         <span class="br0">(</span>/ <span class="br0">(</span>- by ay<span class="br0">)</span> <span class="br0">(</span>- bx ax<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>                <span class="br0">(</span>m-blue <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">=</span> px ax<span class="br0">)</span> <span class="kw1">nil</span><br>                          <span class="br0">(</span>/ <span class="br0">(</span>- py ay<span class="br0">)</span> <span class="br0">(</span>- px ax<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>            <span class="br0">(</span><span class="kw1">cond</span><br>             <span class="br0">(</span><span class="br0">(</span><span class="kw1">null</span> m-blue<span class="br0">)</span> t<span class="br0">)</span><br>             <span class="br0">(</span><span class="br0">(</span><span class="kw1">null</span> m-red<span class="br0">)</span> <span class="kw1">nil</span><span class="br0">)</span><br>             <span class="br0">(</span>t <span class="br0">(</span><span class="sy0">&gt;=</span> m-blue m-red<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></pre>
<p>Testing code
</p>
<pre class="lisp highlighted_source"><span class="br0">(</span>defparameter *points*<br>  #<span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span> <span class="sy0">.</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">10</span> <span class="sy0">.</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">10</span> <span class="sy0">.</span> <span class="nu0">10</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">0</span> <span class="sy0">.</span> <span class="nu0">10</span><span class="br0">)</span>  <br>    <span class="br0">(</span><span class="nu0">2.5</span> <span class="sy0">.</span> <span class="nu0">2.5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">7.5</span> <span class="sy0">.</span> <span class="nu0">2.5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">7.5</span> <span class="sy0">.</span> <span class="nu0">7.5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">2.5</span> <span class="sy0">.</span> <span class="nu0">7.5</span><span class="br0">)</span> <br>    <span class="br0">(</span><span class="nu0">0</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">10</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">3</span> <span class="sy0">.</span> <span class="nu0">0</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">7</span> <span class="sy0">.</span> <span class="nu0">0</span><span class="br0">)</span><br>    <span class="br0">(</span><span class="nu0">7</span> <span class="sy0">.</span> <span class="nu0">10</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">3</span> <span class="sy0">.</span> <span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> create-polygon <span class="br0">(</span>indices <span class="sy0">&amp;</span>optional <span class="br0">(</span>points *points*<span class="br0">)</span><span class="br0">)</span><br>  <span class="br0">(</span>loop for <span class="br0">(</span>a b<span class="br0">)</span> on indices by '<span class="kw1">cddr</span><br>        collecting <span class="br0">(</span><span class="kw1">cons</span> <span class="br0">(</span><span class="kw1">aref</span> points <span class="br0">(</span><span class="nu0">1</span>- a<span class="br0">)</span><span class="br0">)</span><br>                         <span class="br0">(</span><span class="kw1">aref</span> points <span class="br0">(</span><span class="nu0">1</span>- b<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> square <span class="br0">(</span><span class="br0">)</span><br>  <span class="br0">(</span>create-polygon '<span class="br0">(</span><span class="nu0">1</span> <span class="nu0">2</span> <span class="nu0">2</span> <span class="nu0">3</span> <span class="nu0">3</span> <span class="nu0">4</span> <span class="nu0">4</span> <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> square-hole <span class="br0">(</span><span class="br0">)</span><br>  <span class="br0">(</span>create-polygon '<span class="br0">(</span><span class="nu0">1</span> <span class="nu0">2</span> <span class="nu0">2</span> <span class="nu0">3</span> <span class="nu0">3</span> <span class="nu0">4</span> <span class="nu0">4</span> <span class="nu0">1</span> <span class="nu0">5</span> <span class="nu0">6</span> <span class="nu0">6</span> <span class="nu0">7</span> <span class="nu0">7</span> <span class="nu0">8</span> <span class="nu0">8</span> <span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> strange <span class="br0">(</span><span class="br0">)</span><br>  <span class="br0">(</span>create-polygon '<span class="br0">(</span><span class="nu0">1</span> <span class="nu0">5</span> <span class="nu0">5</span> <span class="nu0">4</span> <span class="nu0">4</span> <span class="nu0">8</span> <span class="nu0">8</span> <span class="nu0">7</span> <span class="nu0">7</span> <span class="nu0">3</span> <span class="nu0">3</span> <span class="nu0">2</span> <span class="nu0">2</span> <span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> exagon <span class="br0">(</span><span class="br0">)</span><br>  <span class="br0">(</span>create-polygon '<span class="br0">(</span><span class="nu0">11</span> <span class="nu0">12</span> <span class="nu0">12</span> <span class="nu0">10</span> <span class="nu0">10</span> <span class="nu0">13</span> <span class="nu0">13</span> <span class="nu0">14</span> <span class="nu0">14</span> <span class="nu0">9</span> <span class="nu0">9</span> <span class="nu0">11</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span>defparameter *test-points*<br>  #<span class="br0">(</span><span class="br0">(</span><span class="nu0">5</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">5</span> <span class="sy0">.</span> <span class="nu0">8</span><span class="br0">)</span> <span class="br0">(</span>-<span class="nu0">10</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">0</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span><br>    <span class="br0">(</span><span class="nu0">10</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">8</span> <span class="sy0">.</span> <span class="nu0">5</span><span class="br0">)</span> <span class="br0">(</span><span class="nu0">10</span> <span class="sy0">.</span> <span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">defun</span> test-pip <span class="br0">(</span><span class="br0">)</span><br>  <span class="br0">(</span><span class="kw1">dolist</span> <span class="br0">(</span>shape '<span class="br0">(</span>square square-hole strange exagon<span class="br0">)</span><span class="br0">)</span><br>    <span class="br0">(</span><span class="kw1">print</span> shape<span class="br0">)</span><br>    <span class="br0">(</span>loop with polygon <span class="sy0">=</span> <span class="br0">(</span><span class="kw1">funcall</span> shape<span class="br0">)</span><br>          for test-point across *test-points*<br>          <span class="kw1">do</span> <span class="br0">(</span>format t <span class="st0">"~&amp;~w ~:[outside~;inside ~]."</span><br>                     test-point<br>                     <span class="br0">(</span>point-in-polygon test-point polygon<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></pre>
<h2><span class="mw-headline" id="D"><a href="https://rosettacode.org/wiki/Category:D" title="Category:D">D</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=8" title="Edit section: D">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="d highlighted_source"><span class="kw2">import</span> std.<span class="me1">stdio</span><span class="sy0">,</span> std.<span class="me1">math</span><span class="sy0">,</span> std.<span class="me1">algorithm</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw4">immutable</span> <span class="kw4">struct</span> Point <span class="br0">{</span> <span class="kw4">double</span> x<span class="sy0">,</span> y<span class="sy0">;</span> <span class="br0">}</span><br><span class="kw4">immutable</span> <span class="kw4">struct</span> Edge <span class="br0">{</span> Point a<span class="sy0">,</span> b<span class="sy0">;</span> <span class="br0">}</span><br><span class="kw4">immutable</span> <span class="kw4">struct</span> Figure <span class="br0">{</span><br>    <span class="kw4">string</span> name<span class="sy0">;</span><br>    Edge<span class="br0">[</span><span class="br0">]</span> edges<span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw4">bool</span> contains<span class="br0">(</span><span class="kw2">in</span> Figure poly<span class="sy0">,</span> <span class="kw2">in</span> Point p<span class="br0">)</span> <span class="kw4">pure</span> <span class="kw4">nothrow</span> @<span class="kw4">safe</span> @nogc <span class="br0">{</span><br>    <span class="kw4">static</span> <span class="kw4">bool</span> raySegI<span class="br0">(</span><span class="kw2">in</span> Point p<span class="sy0">,</span> <span class="kw2">in</span> Edge edge<span class="br0">)</span><br>    <span class="kw4">pure</span> <span class="kw4">nothrow</span> @<span class="kw4">safe</span> @nogc <span class="br0">{</span><br>        <span class="kw4">enum</span> <span class="kw4">double</span> epsilon <span class="sy0">=</span> <span class="nu16">0.00001</span><span class="sy0">;</span><br>        <span class="kw2">with</span> <span class="br0">(</span>edge<span class="br0">)</span> <span class="br0">{</span><br>            <span class="kw1">if</span> <span class="br0">(</span>a.<span class="me1">y</span> <span class="sy0">&gt;</span> b.<span class="me1">y</span><span class="br0">)</span><br>                <span class="co1">//swap(a, b); // if edge is mutable</span><br>                <span class="kw1">return</span> raySegI<span class="br0">(</span>p<span class="sy0">,</span> Edge<span class="br0">(</span>b<span class="sy0">,</span> a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>            <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy0">==</span> a.<span class="me1">y</span> <span class="sy0">||</span> p.<span class="me1">y</span> <span class="sy0">==</span> b.<span class="me1">y</span><span class="br0">)</span><br>                <span class="co1">//p.y += epsilon; // if p is mutable</span><br>                <span class="kw1">return</span> raySegI<span class="br0">(</span>Point<span class="br0">(</span>p.<span class="me1">x</span><span class="sy0">,</span> p.<span class="me1">y</span> <span class="sy0">+</span> epsilon<span class="br0">)</span><span class="sy0">,</span> edge<span class="br0">)</span><span class="sy0">;</span><br>            <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy0">&gt;</span> b.<span class="me1">y</span> <span class="sy0">||</span> p.<span class="me1">y</span> <span class="sy0">&lt;</span> a.<span class="me1">y</span> <span class="sy0">||</span> p.<span class="me1">x</span> <span class="sy0">&gt;</span> max<span class="br0">(</span>a.<span class="me1">x</span><span class="sy0">,</span> b.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span><br>                <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span><br>            <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">x</span> <span class="sy0">&lt;</span> min<span class="br0">(</span>a.<span class="me1">x</span><span class="sy0">,</span> b.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span><br>                <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span><br>            <span class="kw4">immutable</span> blue <span class="sy0">=</span> <span class="br0">(</span>abs<span class="br0">(</span>a.<span class="me1">x</span> <span class="sy0">-</span> p.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="kw4">double</span>.<span class="me1">min_normal</span><span class="br0">)</span> <span class="sy0">?</span><br>                             <span class="br0">(</span><span class="br0">(</span>p.<span class="me1">y</span> <span class="sy0">-</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>p.<span class="me1">x</span> <span class="sy0">-</span> a.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">:</span><br>                             <span class="kw4">double</span>.<span class="me1">max</span><span class="sy0">;</span><br>            <span class="kw4">immutable</span> red <span class="sy0">=</span> <span class="br0">(</span>abs<span class="br0">(</span>a.<span class="me1">x</span> <span class="sy0">-</span> b.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="kw4">double</span>.<span class="me1">min_normal</span><span class="br0">)</span> <span class="sy0">?</span><br>                            <span class="br0">(</span><span class="br0">(</span>b.<span class="me1">y</span> <span class="sy0">-</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>b.<span class="me1">x</span> <span class="sy0">-</span> a.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">:</span><br>                            <span class="kw4">double</span>.<span class="me1">max</span><span class="sy0">;</span><br>            <span class="kw1">return</span> blue <span class="sy0">&gt;=</span> red<span class="sy0">;</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><br>&nbsp;<br>    <span class="kw1">return</span> poly.<span class="me1">edges</span>.<span class="me1">count</span><span class="sy0">!</span><span class="br0">(</span>e <span class="sy0">=&gt;</span> raySegI<span class="br0">(</span>p<span class="sy0">,</span> e<span class="br0">)</span><span class="br0">)</span> <span class="sy0">%</span> <span class="nu0">2</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw4">void</span> main<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw4">immutable</span> Figure<span class="br0">[</span><span class="br0">]</span> polys <span class="sy0">=</span> <span class="br0">[</span><br>  <span class="br0">{</span><span class="st0">"Square"</span><span class="sy0">,</span> <span class="br0">[</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="br0">]</span><span class="br0">}</span><span class="sy0">,</span><br>  <span class="br0">{</span><span class="st0">"Square hole"</span><span class="sy0">,</span> <span class="br0">[</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">7.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">7.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">7.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">7.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span><span class="br0">]</span><span class="br0">}</span><span class="sy0">,</span><br>  <span class="br0">{</span><span class="st0">"Strange"</span><span class="sy0">,</span> <span class="br0">[</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">7.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">7.5</span><span class="sy0">,</span>  <span class="nu16">7.5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span>   <span class="br0">{</span> <span class="nu16">2.5</span><span class="sy0">,</span>  <span class="nu16">2.5</span><span class="br0">}</span><span class="br0">}</span><span class="br0">]</span><span class="br0">}</span><span class="sy0">,</span><br>  <span class="br0">{</span><span class="st0">"Exagon"</span><span class="sy0">,</span> <span class="br0">[</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">3.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">7.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">7.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">5.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span><span class="nu16">10.0</span><span class="sy0">,</span>  <span class="nu16">5.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">7.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">7.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">3.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span><span class="br0">{</span> <span class="nu16">3.0</span><span class="sy0">,</span> <span class="nu16">10.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">5.0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">,</span>  <span class="br0">{</span><span class="br0">{</span> <span class="nu16">0.0</span><span class="sy0">,</span>  <span class="nu16">5.0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu16">3.0</span><span class="sy0">,</span>  <span class="nu16">0.0</span><span class="br0">}</span><span class="br0">}</span><span class="br0">]</span><span class="br0">}</span><br><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw4">immutable</span> Point<span class="br0">[</span><span class="br0">]</span> testPoints <span class="sy0">=</span> <span class="br0">[</span><span class="br0">{</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">8</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="sy0">-</span><span class="nu0">10</span><span class="sy0">,</span>  <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span><br>                                    <span class="br0">{</span><span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span><span class="nu0">8</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span> <span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">10</span><span class="br0">}</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">foreach</span> <span class="br0">(</span><span class="kw4">immutable</span> poly<span class="sy0">;</span> polys<span class="br0">)</span> <span class="br0">{</span><br>        writefln<span class="br0">(</span><span class="st_h">`Is point inside figure "%s"?`</span><span class="sy0">,</span> poly.<span class="me1">name</span><span class="br0">)</span><span class="sy0">;</span><br>        <span class="kw1">foreach</span> <span class="br0">(</span><span class="kw4">immutable</span> p<span class="sy0">;</span> testPoints<span class="br0">)</span><br>            writefln<span class="br0">(</span><span class="st0">"  (%3s,&nbsp;%2s):&nbsp;%s"</span><span class="sy0">,</span> p.<span class="me1">x</span><span class="sy0">,</span> p.<span class="me1">y</span><span class="sy0">,</span> contains<span class="br0">(</span>poly<span class="sy0">,</span> p<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>        writeln<span class="sy0">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Is point inside figure "Square"?
  (  5,  5): true
  (  5,  8): true
  (-10,  5): false
  (  0,  5): false
  ( 10,  5): true
  (  8,  5): true
  ( 10, 10): false

Is point inside figure "Square hole"?
  (  5,  5): false
  (  5,  8): true
  (-10,  5): false
  (  0,  5): false
  ( 10,  5): true
  (  8,  5): true
  ( 10, 10): false

Is point inside figure "Strange"?
  (  5,  5): true
  (  5,  8): false
  (-10,  5): false
  (  0,  5): false
  ( 10,  5): true
  (  8,  5): true
  ( 10, 10): false

Is point inside figure "Exagon"?
  (  5,  5): true
  (  5,  8): true
  (-10,  5): false
  (  0,  5): false
  ( 10,  5): true
  (  8,  5): true
  ( 10, 10): false</pre>
<h2><span class="mw-headline" id="Factor"><a href="https://rosettacode.org/wiki/Category:Factor" title="Category:Factor">Factor</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=9" title="Edit section: Factor">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To test whether a ray intersects a line, we test that the starting point is between the endpoints in y value, and that it is to the left of the point on the segment with the same y value. Note that this implementation does not support polygons with horizontal edges.
</p>
<pre class="text highlighted_source">USING: kernel prettyprint sequences arrays math math.vectors&nbsp;;<br>IN: raycasting<br>&nbsp;<br>: between ( a b x --&nbsp;? ) [ last ] tri@ [ &lt; ] curry bi@ xor&nbsp;;<br>&nbsp;<br>: lincomb ( a b x -- w )<br>  3dup [ last ] tri@<br>  [ - ] curry bi@<br>  [ drop ] 2dip<br>  neg 2dup + [ / ] curry bi@<br>  [ [ v*n ] curry ] bi@ bi*  v+&nbsp;;<br>: leftof ( a b x --&nbsp;? ) dup [ lincomb ] dip [ first ] bi@ &gt;&nbsp;;<br>&nbsp;<br>: ray ( a b x --&nbsp;? ) [ between ] [ leftof ] 3bi and&nbsp;;<br>&nbsp;<br>: raycast ( poly x --&nbsp;? )<br>  [ dup first suffix [ rest-slice ] [ but-last-slice ] bi ] dip<br>  [ ray ] curry 2map<br>  f [ xor ] reduce&nbsp;;</pre>
<p>Usage:
</p>
<pre class="text highlighted_source">( scratchpad ) CONSTANT: square { { -2 -1 } { 1 -2 } { 2 1 } { -1 2 } }<br>( scratchpad ) square { 0 0 } raycast .<br>t<br>( scratchpad ) square { 5 5 } raycast .<br>f<br>( scratchpad ) square { 2 0 } raycast .<br>f</pre>
<h2><span class="mw-headline" id="Fortran"><a href="https://rosettacode.org/wiki/Category:Fortran" title="Category:Fortran">Fortran</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=10" title="Edit section: Fortran">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="https://rosettacode.org/wiki/Fortran" title="Fortran" class="mw-redirect">Fortran</a> version 95 and later</div>
<p>The following code uses the <tt>Points_Module</tt> defined <a href="https://rosettacode.org/wiki/Closest_pair_problem#Fortran" title="Closest pair problem" class="mw-redirect">here</a>.
</p><p>This module <i>defines</i> "polygons".
</p>
<pre class="fortran highlighted_source"><span class="kw1">module</span> Polygons<br>  <span class="kw3">use</span> Points_Module<br>  <span class="kw3">implicit</span> <span class="kw3">none</span><br>&nbsp;<br>  <span class="kw3">type</span> polygon<br>     <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="sy0">:</span><span class="br0">)</span>, <span class="kw3">allocatable</span> <span class="sy0">::</span> <span class="me2">points</span><br>     <span class="kw3">integer</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="sy0">:</span><span class="br0">)</span>, <span class="kw3">allocatable</span> <span class="sy0">::</span> <span class="me2">vertices</span><br>  <span class="kw1">end</span> <span class="kw3">type</span> polygon<br>&nbsp;<br><span class="co1">contains</span><br>&nbsp;<br>  <span class="kw1">function</span> create_polygon<span class="br0">(</span>pts, vt<span class="br0">)</span><br>    <span class="kw3">type</span><span class="br0">(</span>polygon<span class="br0">)</span> <span class="sy0">::</span> <span class="me2">create_polygon</span><br>    <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="sy0">:</span><span class="br0">)</span>, <span class="kw3">intent</span><span class="br0">(</span><span class="kw3">in</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">pts</span><br>    <span class="kw3">integer</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="sy0">:</span><span class="br0">)</span>, <span class="kw3">intent</span><span class="br0">(</span><span class="kw3">in</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">vt</span><br>&nbsp;<br>    <span class="kw3">integer</span> <span class="sy0">::</span> <span class="me2">np</span>, nv<br>&nbsp;<br>    np <span class="sy0">=</span> <span class="kw4">size</span><span class="br0">(</span>pts,<span class="nu0">1</span><span class="br0">)</span><br>    nv <span class="sy0">=</span> <span class="kw4">size</span><span class="br0">(</span>vt,<span class="nu0">1</span><span class="br0">)</span><br>&nbsp;<br>    <span class="kw1">allocate</span><span class="br0">(</span>create_polygon<span class="sy0">%</span>points<span class="br0">(</span>np<span class="br0">)</span>, create_polygon<span class="sy0">%</span>vertices<span class="br0">(</span>nv<span class="br0">)</span><span class="br0">)</span><br>    create_polygon<span class="sy0">%</span>points <span class="sy0">=</span> pts<br>    create_polygon<span class="sy0">%</span>vertices <span class="sy0">=</span> vt<br>&nbsp;<br>  <span class="kw1">end</span> <span class="kw1">function</span> create_polygon<br>&nbsp;<br>  <span class="kw1">subroutine</span> free_polygon<span class="br0">(</span>pol<span class="br0">)</span><br>    <span class="kw3">type</span><span class="br0">(</span>polygon<span class="br0">)</span>, <span class="kw3">intent</span><span class="br0">(</span><span class="kw3">inout</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">pol</span><br>&nbsp;<br>    <span class="kw1">deallocate</span><span class="br0">(</span>pol<span class="sy0">%</span>points, pol<span class="sy0">%</span>vertices<span class="br0">)</span><br>&nbsp;<br>  <span class="kw1">end</span> <span class="kw1">subroutine</span> free_polygon<br>&nbsp;<br><span class="kw1">end</span> <span class="kw1">module</span> Polygons</pre>
<p>The ray casting algorithm module:
</p>
<pre class="fortran highlighted_source"><span class="kw1">module</span> Ray_Casting_Algo<br>  <span class="kw3">use</span> Polygons<br>  <span class="kw3">implicit</span> <span class="kw3">none</span><br>&nbsp;<br>  <span class="kw3">real</span>, <span class="kw3">parameter</span>, <span class="kw3">private</span> <span class="sy0">::</span> <span class="me2">eps</span> <span class="sy0">=</span> <span class="nu0">0.00001</span><br>  <span class="kw3">private</span> <span class="sy0">::</span> <span class="me2">ray_intersects_seg</span><br>&nbsp;<br><span class="co1">contains</span><br>&nbsp;<br>  <span class="kw1">function</span> ray_intersects_seg<span class="br0">(</span>p0, a0, b0<span class="br0">)</span> <span class="kw3">result</span><span class="br0">(</span>intersect<span class="br0">)</span><br>    <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span>, <span class="kw3">intent</span><span class="br0">(</span><span class="kw3">in</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">p0</span>, a0, b0<br>    <span class="kw3">logical</span> <span class="sy0">::</span> <span class="me2">intersect</span><br>&nbsp;<br>    <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span> <span class="sy0">::</span> <span class="me2">a</span>, b, p<br>    <span class="kw3">real</span> <span class="sy0">::</span> <span class="me2">m_red</span>, m_blue<br>&nbsp;<br>    p <span class="sy0">=</span> p0<br>    <span class="co1">! let variable "a" be the point with smallest y coordinate</span><br>    <span class="kw1">if</span> <span class="br0">(</span> a0<span class="sy0">%</span>y &gt; b0<span class="sy0">%</span>y <span class="br0">)</span> <span class="kw1">then</span><br>       b <span class="sy0">=</span> a0<br>       a <span class="sy0">=</span> b0<br>    <span class="kw1">else</span><br>       a <span class="sy0">=</span> a0<br>       b <span class="sy0">=</span> b0<br>    <span class="kw1">end</span> <span class="kw1">if</span><br>&nbsp;<br>    <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span>p<span class="sy0">%</span>y <span class="sy0">==</span> a<span class="sy0">%</span>y<span class="br0">)</span> <span class="kw2">.<span class="me1">or</span>.</span> <span class="br0">(</span>p<span class="sy0">%</span>y <span class="sy0">==</span> b<span class="sy0">%</span>y<span class="br0">)</span> <span class="br0">)</span> p<span class="sy0">%</span>y <span class="sy0">=</span> p<span class="sy0">%</span>y <span class="sy0">+</span> eps<br>&nbsp;<br>    intersect <span class="sy0">=</span> <span class="kw2">.<span class="me1">false</span>.</span><br>&nbsp;<br>    <span class="kw1">if</span> <span class="br0">(</span> <span class="br0">(</span>p<span class="sy0">%</span>y &gt; b<span class="sy0">%</span>y<span class="br0">)</span> <span class="kw2">.<span class="me1">or</span>.</span> <span class="br0">(</span>p<span class="sy0">%</span>y &lt; a<span class="sy0">%</span>y<span class="br0">)</span> <span class="br0">)</span> <span class="kw1">return</span><br>    <span class="kw1">if</span> <span class="br0">(</span> p<span class="sy0">%</span>x &gt; <span class="kw4">max</span><span class="br0">(</span>a<span class="sy0">%</span>x, b<span class="sy0">%</span>x<span class="br0">)</span> <span class="br0">)</span> <span class="kw1">return</span><br>&nbsp;<br>    <span class="kw1">if</span> <span class="br0">(</span> p<span class="sy0">%</span>x &lt; <span class="kw4">min</span><span class="br0">(</span>a<span class="sy0">%</span>x, b<span class="sy0">%</span>x<span class="br0">)</span> <span class="br0">)</span> <span class="kw1">then</span><br>       intersect <span class="sy0">=</span> <span class="kw2">.<span class="me1">true</span>.</span><br>    <span class="kw1">else</span><br>       <span class="kw1">if</span> <span class="br0">(</span> <span class="kw4">abs</span><span class="br0">(</span>a<span class="sy0">%</span>x <span class="sy0">-</span> b<span class="sy0">%</span>x<span class="br0">)</span> &gt; <span class="kw4">tiny</span><span class="br0">(</span>a<span class="sy0">%</span>x<span class="br0">)</span> <span class="br0">)</span> <span class="kw1">then</span><br>          m_red <span class="sy0">=</span> <span class="br0">(</span>b<span class="sy0">%</span>y <span class="sy0">-</span> a<span class="sy0">%</span>y<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>b<span class="sy0">%</span>x <span class="sy0">-</span> a<span class="sy0">%</span>x<span class="br0">)</span><br>       <span class="kw1">else</span><br>          m_red <span class="sy0">=</span> <span class="kw4">huge</span><span class="br0">(</span>m_red<span class="br0">)</span><br>       <span class="kw1">end</span> <span class="kw1">if</span><br>       <span class="kw1">if</span> <span class="br0">(</span> <span class="kw4">abs</span><span class="br0">(</span>a<span class="sy0">%</span>x <span class="sy0">-</span> p<span class="sy0">%</span>x<span class="br0">)</span> &gt; <span class="kw4">tiny</span><span class="br0">(</span>a<span class="sy0">%</span>x<span class="br0">)</span> <span class="br0">)</span> <span class="kw1">then</span><br>          m_blue <span class="sy0">=</span> <span class="br0">(</span>p<span class="sy0">%</span>y <span class="sy0">-</span> a<span class="sy0">%</span>y<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>p<span class="sy0">%</span>x <span class="sy0">-</span> a<span class="sy0">%</span>x<span class="br0">)</span><br>       <span class="kw1">else</span><br>          m_blue <span class="sy0">=</span> <span class="kw4">huge</span><span class="br0">(</span>m_blue<span class="br0">)</span><br>       <span class="kw1">end</span> <span class="kw1">if</span><br>       <span class="kw1">if</span> <span class="br0">(</span> m_blue &gt;<span class="sy0">=</span> m_red <span class="br0">)</span> <span class="kw1">then</span><br>          intersect <span class="sy0">=</span> <span class="kw2">.<span class="me1">true</span>.</span><br>       <span class="kw1">else</span><br>          intersect <span class="sy0">=</span> <span class="kw2">.<span class="me1">false</span>.</span><br>       <span class="kw1">end</span> <span class="kw1">if</span><br>    <span class="kw1">end</span> <span class="kw1">if</span><br>&nbsp;<br>  <span class="kw1">end</span> <span class="kw1">function</span> ray_intersects_seg<br>&nbsp;<br>  <span class="kw1">function</span> point_is_inside<span class="br0">(</span>p, pol<span class="br0">)</span> <span class="kw3">result</span><span class="br0">(</span>inside<span class="br0">)</span><br>    <span class="kw3">logical</span> <span class="sy0">::</span> <span class="me2">inside</span><br>    <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span>, <span class="kw3">intent</span><span class="br0">(</span><span class="kw3">in</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">p</span><br>    <span class="kw3">type</span><span class="br0">(</span>polygon<span class="br0">)</span>, <span class="kw3">intent</span><span class="br0">(</span><span class="kw3">in</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">pol</span><br>&nbsp;<br>    <span class="kw3">integer</span> <span class="sy0">::</span> <span class="me2">i</span>, cnt, pa, pb<br>&nbsp;<br>    cnt <span class="sy0">=</span> <span class="nu0">0</span><br>    <span class="kw1">do</span> i <span class="sy0">=</span> <span class="kw4">lbound</span><span class="br0">(</span>pol<span class="sy0">%</span>vertices,<span class="nu0">1</span><span class="br0">)</span>, <span class="kw4">ubound</span><span class="br0">(</span>pol<span class="sy0">%</span>vertices,<span class="nu0">1</span><span class="br0">)</span>, <span class="nu0">2</span><br>       pa <span class="sy0">=</span> pol<span class="sy0">%</span>vertices<span class="br0">(</span>i<span class="br0">)</span><br>       pb <span class="sy0">=</span> pol<span class="sy0">%</span>vertices<span class="br0">(</span>i<span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span><br>       <span class="kw1">if</span> <span class="br0">(</span> ray_intersects_seg<span class="br0">(</span>p, pol<span class="sy0">%</span>points<span class="br0">(</span>pa<span class="br0">)</span>, pol<span class="sy0">%</span>points<span class="br0">(</span>pb<span class="br0">)</span><span class="br0">)</span> <span class="br0">)</span> cnt <span class="sy0">=</span> cnt <span class="sy0">+</span> <span class="nu0">1</span><br>    <span class="kw1">end</span> <span class="kw1">do</span><br>&nbsp;<br>    inside <span class="sy0">=</span> <span class="kw2">.<span class="me1">true</span>.</span><br>    <span class="kw1">if</span> <span class="br0">(</span> <span class="kw4">mod</span><span class="br0">(</span>cnt, <span class="nu0">2</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">)</span> <span class="kw1">then</span><br>       inside <span class="sy0">=</span> <span class="kw2">.<span class="me1">false</span>.</span><br>    <span class="kw1">end</span> <span class="kw1">if</span><br>&nbsp;<br>  <span class="kw1">end</span> <span class="kw1">function</span> point_is_inside<br>&nbsp;<br><span class="kw1">end</span> <span class="kw1">module</span> Ray_Casting_Algo</pre>
<p><b>Testing</b>
</p>
<pre class="fortran highlighted_source"><span class="kw1">program</span> Pointpoly<br>  <span class="kw3">use</span> Points_Module<br>  <span class="kw3">use</span> Ray_Casting_Algo<br>  <span class="kw3">implicit</span> <span class="kw3">none</span><br>&nbsp;<br>  <span class="kw3">character</span><span class="br0">(</span><span class="kw4">len</span><span class="sy0">=</span><span class="nu0">16</span><span class="br0">)</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">names</span><br>  <span class="kw3">type</span><span class="br0">(</span>polygon<span class="br0">)</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">polys</span><br>  <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="nu0">14</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">pts</span><br>  <span class="kw3">type</span><span class="br0">(</span>point<span class="br0">)</span>, <span class="kw3">dimension</span><span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span> <span class="sy0">::</span> <span class="me2">p</span><br>&nbsp;<br>  <span class="kw3">integer</span> <span class="sy0">::</span> <span class="me2">i</span>, j<br>&nbsp;<br>  pts <span class="sy0">=</span> <span class="br0">(</span><span class="sy0">/</span> point<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">0</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">10</span><span class="br0">)</span>, <span class="sy0">&amp;</span><br>           point<span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">2.5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">7.5</span>,<span class="nu0">2.5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">7.5</span>,<span class="nu0">7.5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">7.5</span><span class="br0">)</span>, <span class="sy0">&amp;</span><br>           point<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span>, <span class="sy0">&amp;</span><br>           point<span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">0</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">7</span>,<span class="nu0">0</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">7</span>,<span class="nu0">10</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">10</span><span class="br0">)</span> <span class="sy0">/</span><span class="br0">)</span><br>&nbsp;<br>  polys<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">=</span> create_polygon<span class="br0">(</span>pts, <span class="br0">(</span><span class="sy0">/</span> <span class="nu0">1</span>,<span class="nu0">2</span>, <span class="nu0">2</span>,<span class="nu0">3</span>, <span class="nu0">3</span>,<span class="nu0">4</span>, <span class="nu0">4</span>,<span class="nu0">1</span> <span class="sy0">/</span><span class="br0">)</span> <span class="br0">)</span><br>  polys<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span> <span class="sy0">=</span> create_polygon<span class="br0">(</span>pts, <span class="br0">(</span><span class="sy0">/</span> <span class="nu0">1</span>,<span class="nu0">2</span>, <span class="nu0">2</span>,<span class="nu0">3</span>, <span class="nu0">3</span>,<span class="nu0">4</span>, <span class="nu0">4</span>,<span class="nu0">1</span>, <span class="nu0">5</span>,<span class="nu0">6</span>, <span class="nu0">6</span>,<span class="nu0">7</span>, <span class="nu0">7</span>,<span class="nu0">8</span>, <span class="nu0">8</span>,<span class="nu0">5</span> <span class="sy0">/</span><span class="br0">)</span> <span class="br0">)</span><br>  polys<span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span> <span class="sy0">=</span> create_polygon<span class="br0">(</span>pts, <span class="br0">(</span><span class="sy0">/</span> <span class="nu0">1</span>,<span class="nu0">5</span>, <span class="nu0">5</span>,<span class="nu0">4</span>, <span class="nu0">4</span>,<span class="nu0">8</span>, <span class="nu0">8</span>,<span class="nu0">7</span>, <span class="nu0">7</span>,<span class="nu0">3</span>, <span class="nu0">3</span>,<span class="nu0">2</span>, <span class="nu0">2</span>,<span class="nu0">5</span> <span class="sy0">/</span><span class="br0">)</span> <span class="br0">)</span><br>  polys<span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span> <span class="sy0">=</span> create_polygon<span class="br0">(</span>pts, <span class="br0">(</span><span class="sy0">/</span> <span class="nu0">11</span>,<span class="nu0">12</span>, <span class="nu0">12</span>,<span class="nu0">10</span>, <span class="nu0">10</span>,<span class="nu0">13</span>, <span class="nu0">13</span>,<span class="nu0">14</span>, <span class="nu0">14</span>,<span class="nu0">9</span>, <span class="nu0">9</span>,<span class="nu0">11</span> <span class="sy0">/</span><span class="br0">)</span> <span class="br0">)</span><br>&nbsp;<br>  names <span class="sy0">=</span> <span class="br0">(</span><span class="sy0">/</span> <span class="st0">"square"</span>, <span class="st0">"square hole"</span>, <span class="st0">"strange"</span>, <span class="st0">"hexagon"</span> <span class="sy0">/</span><span class="br0">)</span><br>&nbsp;<br>  p <span class="sy0">=</span> <span class="br0">(</span><span class="sy0">/</span> point<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">5</span>, <span class="nu0">8</span><span class="br0">)</span>, point<span class="br0">(</span><span class="sy0">-</span><span class="nu0">10</span>, <span class="nu0">5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span>, <span class="sy0">&amp;</span><br>         point<span class="br0">(</span><span class="nu0">8</span>,<span class="nu0">5</span><span class="br0">)</span>, point<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span> <span class="sy0">/</span><span class="br0">)</span><br>&nbsp;<br>  <span class="kw1">do</span> j <span class="sy0">=</span> <span class="nu0">1</span>, <span class="kw4">size</span><span class="br0">(</span>p<span class="br0">)</span><br>     <span class="kw1">do</span> i <span class="sy0">=</span> <span class="nu0">1</span>, <span class="kw4">size</span><span class="br0">(</span>polys<span class="br0">)</span><br>        write<span class="br0">(</span><span class="sy0">*</span>, <span class="st0">"('point (',F8.2,',',F8.2,') is inside ',A,'? ', L)"</span><span class="br0">)</span> <span class="sy0">&amp;</span><br>             p<span class="br0">(</span>j<span class="br0">)</span><span class="sy0">%</span>x, p<span class="br0">(</span>j<span class="br0">)</span><span class="sy0">%</span>y, names<span class="br0">(</span>i<span class="br0">)</span>, point_is_inside<span class="br0">(</span>p<span class="br0">(</span>j<span class="br0">)</span>, polys<span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><br>     <span class="kw1">end</span> <span class="kw1">do</span><br>     print <span class="sy0">*</span>, <span class="st0">""</span><br>  <span class="kw1">end</span> <span class="kw1">do</span><br>&nbsp;<br>  <span class="kw1">do</span> i <span class="sy0">=</span> <span class="nu0">1</span>, <span class="kw4">size</span><span class="br0">(</span>polys<span class="br0">)</span><br>     <span class="kw1">call</span> free_polygon<span class="br0">(</span>polys<span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><br>  <span class="kw1">end</span> <span class="kw1">do</span><br>&nbsp;<br><span class="kw1">end</span> <span class="kw1">program</span> Pointpoly</pre>
<h2><span class="mw-headline" id="FreeBASIC"><a href="https://rosettacode.org/wiki/Category:FreeBASIC" title="Category:FreeBASIC">FreeBASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=11" title="Edit section: FreeBASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Inpolygon by Winding number method
</p>
<pre class="freebasic highlighted_source"><span class="kw1">Type</span> <span class="kw1">Point</span><br>  <span class="kw1">As</span> <span class="kw1">Single</span> x,y<br><span class="kw1">End</span> <span class="kw1">Type</span><br>&nbsp;<br><span class="kw1">Function</span> inpolygon<span class="br0">(</span>p1<span class="br0">(</span><span class="br0">)</span> <span class="kw1">As</span> <span class="kw1">Point</span>,p2 <span class="kw1">As</span> <span class="kw1">Point</span><span class="br0">)</span> <span class="kw1">As</span> <span class="kw1">Integer</span><br>  <span class="co2">#Macro isleft2(L,p)</span><br>    -<span class="kw1">Sgn</span><span class="br0">(</span>  <span class="br0">(</span>L<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">x</span>-L<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">x</span><span class="br0">)</span>*<span class="br0">(</span>p.<span class="me1">y</span>-L<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">y</span><span class="br0">)</span> - <span class="br0">(</span>p.<span class="me1">x</span>-L<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">x</span><span class="br0">)</span>*<span class="br0">(</span>L<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">y</span>-L<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span><br>  <span class="co2">#EndMacro</span><br>  <span class="kw1">Dim</span> <span class="kw1">As</span> <span class="kw1">Integer</span> index,nextindex<br>  <span class="kw1">Dim</span> k <span class="kw1">As</span> <span class="kw1">Integer</span>=<span class="kw1">UBound</span><span class="br0">(</span>p1<span class="br0">)</span>+<span class="nu0">1</span><br>  <span class="kw1">Dim</span> send <span class="br0">(</span><span class="nu0">1</span> <span class="kw1">To</span> <span class="nu0">2</span><span class="br0">)</span> <span class="kw1">As</span> <span class="kw1">Point</span><br>  <span class="kw1">Dim</span> wn <span class="kw1">As</span> <span class="kw1">Integer</span>=<span class="nu0">0</span><br>  <span class="kw1">For</span> n <span class="kw1">As</span> <span class="kw1">Integer</span>=<span class="nu0">1</span> <span class="kw1">To</span> <span class="kw1">UBound</span><span class="br0">(</span>p1<span class="br0">)</span><br>    index=n <span class="kw1">Mod</span> k:nextindex=<span class="br0">(</span>n+<span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Mod</span> k<br>    <span class="kw1">If</span> nextindex=<span class="nu0">0</span> <span class="kw1">Then</span> nextindex=<span class="nu0">1</span><br>    send<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">x</span>=p1<span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">x</span>:send<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">x</span>=p1<span class="br0">(</span>nextindex<span class="br0">)</span>.<span class="me1">x</span><br>    send<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>.<span class="me1">y</span>=p1<span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">y</span>:send<span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>.<span class="me1">y</span>=p1<span class="br0">(</span>nextindex<span class="br0">)</span>.<span class="me1">y</span><br>    <span class="kw1">If</span> p1<span class="br0">(</span>index<span class="br0">)</span>.<span class="me1">y</span>&lt;=p2.<span class="me1">y</span> <span class="kw1">Then</span><br>      <span class="kw1">If</span> p1<span class="br0">(</span>nextindex<span class="br0">)</span>.<span class="me1">y</span>&gt;p2.<span class="me1">y</span> <span class="kw1">Then</span><br>        <span class="kw1">If</span> isleft2<span class="br0">(</span>send,p2<span class="br0">)</span>&gt;=<span class="nu0">0</span> <span class="kw1">Then</span> <span class="co1">'=</span><br>          wn=wn+<span class="nu0">1</span><br>        <span class="kw1">End</span> <span class="kw1">If</span><br>      <span class="kw1">End</span> <span class="kw1">If</span><br>    <span class="kw1">Else</span><br>      <span class="kw1">If</span> p1<span class="br0">(</span>nextindex<span class="br0">)</span>.<span class="me1">y</span>&lt;=p2.<span class="me1">y</span> <span class="kw1">Then</span><br>        <span class="kw1">If</span> isleft2<span class="br0">(</span>send,p2<span class="br0">)</span>&lt;=<span class="nu0">0</span> <span class="kw1">Then</span><span class="co1">'=</span><br>          wn=wn-<span class="nu0">1</span><br>        <span class="kw1">End</span> <span class="kw1">If</span><br>      <span class="kw1">End</span> <span class="kw1">If</span><br>    <span class="kw1">End</span> <span class="kw1">If</span><br>  <span class="kw1">Next</span> n<br>  <span class="kw1">Return</span> wn<br><span class="kw1">End</span> <span class="kw1">Function</span><br>&nbsp;<br>&nbsp;<br><span class="kw1">Dim</span> <span class="kw1">As</span> <span class="kw1">Point</span> square<span class="br0">(</span><span class="nu0">1</span> <span class="kw1">To</span> <span class="nu0">4</span><span class="br0">)</span>  =<span class="br0">{</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">0</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">10</span><span class="br0">)</span><span class="br0">}</span><br>&nbsp;<br><span class="kw1">Dim</span> <span class="kw1">As</span> <span class="kw1">Point</span> hole<span class="br0">(</span><span class="nu0">1</span> <span class="kw1">To</span> <span class="nu0">4</span><span class="br0">)</span>    =<span class="br0">{</span><span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">2.5</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">7.5</span>,<span class="nu0">2.5</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">7.5</span>,<span class="nu0">7.5</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">7.5</span><span class="br0">)</span><span class="br0">}</span><br>&nbsp;<br><span class="kw1">Dim</span> <span class="kw1">As</span> <span class="kw1">Point</span> strange<span class="br0">(</span><span class="nu0">1</span> <span class="kw1">To</span> <span class="nu0">8</span><span class="br0">)</span> =<span class="br0">{</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">2.5</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">10</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">7.5</span><span class="br0">)</span>,_<br>                              <span class="br0">(</span><span class="nu0">7.5</span>,<span class="nu0">7.5</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">0</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">2.5</span>,<span class="nu0">2.5</span><span class="br0">)</span><span class="br0">}</span><br>&nbsp;<br><span class="kw1">Dim</span> <span class="kw1">As</span> <span class="kw1">Point</span> exagon<span class="br0">(</span><span class="nu0">1</span> <span class="kw1">To</span> <span class="nu0">6</span><span class="br0">)</span>  =<span class="br0">{</span><span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">0</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">7</span>,<span class="nu0">0</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">7</span>,<span class="nu0">10</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">10</span><span class="br0">)</span>,<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">}</span><br>&nbsp;<br><span class="co1">'printouts</span><br><span class="kw1">For</span> z <span class="kw1">As</span> <span class="kw1">Integer</span>=<span class="nu0">1</span> <span class="kw1">To</span> <span class="nu0">4</span><br>  Select <span class="kw1">Case</span> z<br>    <span class="kw1">Case</span> <span class="nu0">1</span>: <span class="kw1">Print</span> <span class="st0">"squared"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,8)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(-10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span>-<span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(0,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(8,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">8</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,10)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span><br>    <span class="kw1">Case</span> <span class="nu0">2</span>:<span class="kw1">Print</span> <span class="st0">"squared hole"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,8)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span> And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span><span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(-10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span>-<span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span>And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span>-<span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(0,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span>And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span>And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(8,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">8</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span>And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">8</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,10)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> <span class="kw1">Not</span> inpolygon<span class="br0">(</span>hole<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span>And inpolygon<span class="br0">(</span>square<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span><br>    <span class="kw1">Case</span> <span class="nu0">3</span>:<span class="kw1">Print</span> <span class="st0">"strange"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,8)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(-10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span>-<span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(0,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(8,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">8</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,10)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>strange<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span><br>    <span class="kw1">Case</span> <span class="nu0">4</span>:<span class="kw1">Print</span> <span class="st0">"exagon"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(5,8)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">8</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(-10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span>-<span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(0,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(8,5)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">8</span>,<span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span> <span class="st0">"(10,10)  "</span>&nbsp;;<span class="kw1">Tab</span><span class="br0">(</span><span class="nu0">12</span><span class="br0">)</span>;<br>      <span class="kw1">If</span> inpolygon<span class="br0">(</span>exagon<span class="br0">(</span><span class="br0">)</span>,Type&lt;Point&gt;<span class="br0">(</span><span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Print</span> <span class="st0">"in"</span> <span class="kw1">Else</span> <span class="kw1">Print</span> <span class="st0">"out"</span><br>      <span class="kw1">Print</span><br>  <span class="kw1">End</span> Select<br><span class="kw1">Next</span> z<br><span class="kw1">Sleep</span></pre>
<p>Output:
</p>
<pre>squared
(5,5)      in
(5,8)      in
(-10,5)    out
(0,5)      out
(10,5)     in
(8,5)      in
(10,10)    out

squared hole
(5,5)      out
(5,8)      in
(-10,5)    out
(0,5)      out
(10,5)     in
(8,5)      in
(10,10)    out

strange
(5,5)      in
(5,8)      out
(-10,5)    out
(0,5)      out
(10,5)     in
(8,5)      in
(10,10)    out

exagon
(5,5)      in
(5,8)      in
(-10,5)    out
(0,5)      out
(10,5)     in
(8,5)      in
(10,10)    out</pre>
<h2><span class="mw-headline" id="Go"><a href="https://rosettacode.org/wiki/Category:Go" title="Category:Go">Go</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=12" title="Edit section: Go">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Segment solution, task algorithm</b>
</p><p>The first solution given here follows the model of most other solutions on the page in defining a polygon as a list of segments. Unfortunately this representation does not require that the polygon is <i>closed</i>. Input to the ray-casting algorithm, as noted in the WP article though, is specified to be a closed polygon. The "strange" shape defined here is not a closed polygon and so gives incorrect results against some points. (Graphically it may appear closed but mathematically it needs an additional segment returning to the starting point.)
</p>
<pre class="go highlighted_source"><span class="kw1">package</span> main<br>&nbsp;<br><span class="kw1">import</span> <span class="sy1">(</span><br>    <span class="st0">"fmt"</span><br>    <span class="st0">"math"</span><br><span class="sy1">)</span><br>&nbsp;<br><span class="kw1">type</span> xy <span class="kw4">struct</span> <span class="sy1">{</span><br>    x<span class="sy1">,</span> y <span class="kw4">float64</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">type</span> seg <span class="kw4">struct</span> <span class="sy1">{</span><br>    p1<span class="sy1">,</span> p2 xy<br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">type</span> poly <span class="kw4">struct</span> <span class="sy1">{</span><br>    name  <span class="kw4">string</span><br>    sides <span class="sy1">[]</span>seg<br><span class="sy1">}</span><br>&nbsp;<br><span class="kw4">func</span> inside<span class="sy1">(</span>pt xy<span class="sy1">,</span> pg poly<span class="sy1">)</span> <span class="sy1">(</span><span class="nu2">i</span> <span class="kw4">bool</span><span class="sy1">)</span> <span class="sy1">{</span><br>    <span class="kw1">for</span> _<span class="sy1">,</span> side <span class="sy2">:=</span> <span class="kw1">range</span> pg<span class="sy3">.</span>sides <span class="sy1">{</span><br>        <span class="kw1">if</span> rayIntersectsSegment<span class="sy1">(</span>pt<span class="sy1">,</span> side<span class="sy1">)</span> <span class="sy1">{</span><br>            <span class="nu2">i</span> <span class="sy2">=</span> <span class="sy3">!</span><span class="nu2">i</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span><br>    <span class="kw1">return</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw4">func</span> rayIntersectsSegment<span class="sy1">(</span>p xy<span class="sy1">,</span> s seg<span class="sy1">)</span> <span class="kw4">bool</span> <span class="sy1">{</span><br>    <span class="kw1">var</span> a<span class="sy1">,</span> b xy<br>    <span class="kw1">if</span> s<span class="sy3">.</span>p1<span class="sy3">.</span>y &lt; s<span class="sy3">.</span>p2<span class="sy3">.</span>y <span class="sy1">{</span><br>        a<span class="sy1">,</span> b <span class="sy2">=</span> s<span class="sy3">.</span>p1<span class="sy1">,</span> s<span class="sy3">.</span>p2<br>    <span class="sy1">}</span> <span class="kw1">else</span> <span class="sy1">{</span><br>        a<span class="sy1">,</span> b <span class="sy2">=</span> s<span class="sy3">.</span>p2<span class="sy1">,</span> s<span class="sy3">.</span>p1<br>    <span class="sy1">}</span><br>    <span class="kw1">for</span> p<span class="sy3">.</span>y <span class="sy3">==</span> a<span class="sy3">.</span>y <span class="sy3">||</span> p<span class="sy3">.</span>y <span class="sy3">==</span> b<span class="sy3">.</span>y <span class="sy1">{</span><br>        p<span class="sy3">.</span>y <span class="sy2">=</span> math<span class="sy3">.</span>Nextafter<span class="sy1">(</span>p<span class="sy3">.</span>y<span class="sy1">,</span> math<span class="sy3">.</span>Inf<span class="sy1">(</span><span class="nu0">1</span><span class="sy1">))</span><br>    <span class="sy1">}</span><br>    <span class="kw1">if</span> p<span class="sy3">.</span>y &lt; a<span class="sy3">.</span>y <span class="sy3">||</span> p<span class="sy3">.</span>y &gt; b<span class="sy3">.</span>y <span class="sy1">{</span><br>        <span class="kw1">return</span> <span class="kw2">false</span><br>    <span class="sy1">}</span><br>    <span class="kw1">if</span> a<span class="sy3">.</span>x &gt; b<span class="sy3">.</span>x <span class="sy1">{</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &gt; a<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">false</span><br>        <span class="sy1">}</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &lt; b<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">true</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span> <span class="kw1">else</span> <span class="sy1">{</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &gt; b<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">false</span><br>        <span class="sy1">}</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &lt; a<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">true</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span><br>    <span class="kw1">return</span> <span class="sy1">(</span>p<span class="sy3">.</span>y<span class="sy3">-</span>a<span class="sy3">.</span>y<span class="sy1">)</span><span class="sy3">/</span><span class="sy1">(</span>p<span class="sy3">.</span>x<span class="sy3">-</span>a<span class="sy3">.</span>x<span class="sy1">)</span> &gt;<span class="sy2">=</span> <span class="sy1">(</span>b<span class="sy3">.</span>y<span class="sy3">-</span>a<span class="sy3">.</span>y<span class="sy1">)</span><span class="sy3">/</span><span class="sy1">(</span>b<span class="sy3">.</span>x<span class="sy3">-</span>a<span class="sy3">.</span>x<span class="sy1">)</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">var</span> <span class="sy1">(</span><br>    p1  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">}</span><br>    p2  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">}</span><br>    p3  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">}</span><br>    p4  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">}</span><br>    p5  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">}</span><br>    p6  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">}</span><br>    p7  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">}</span><br>    p8  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">}</span><br>    p9  <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">}</span><br>    p10 <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">}</span><br>    p11 <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">3</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">}</span><br>    p12 <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">7</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">}</span><br>    p13 <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">7</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">}</span><br>    p14 <span class="sy2">=</span> xy<span class="sy1">{</span><span class="nu0">3</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">}</span><br><span class="sy1">)</span><br>&nbsp;<br><span class="kw1">var</span> tpg <span class="sy2">=</span> <span class="sy1">[]</span>poly<span class="sy1">{</span><br>    <span class="sy1">{</span><span class="st0">"square"</span><span class="sy1">,</span> <span class="sy1">[]</span>seg<span class="sy1">{{</span>p1<span class="sy1">,</span> p2<span class="sy1">},</span> <span class="sy1">{</span>p2<span class="sy1">,</span> p3<span class="sy1">},</span> <span class="sy1">{</span>p3<span class="sy1">,</span> p4<span class="sy1">},</span> <span class="sy1">{</span>p4<span class="sy1">,</span> p1<span class="sy1">}}},</span><br>    <span class="sy1">{</span><span class="st0">"square hole"</span><span class="sy1">,</span> <span class="sy1">[]</span>seg<span class="sy1">{{</span>p1<span class="sy1">,</span> p2<span class="sy1">},</span> <span class="sy1">{</span>p2<span class="sy1">,</span> p3<span class="sy1">},</span> <span class="sy1">{</span>p3<span class="sy1">,</span> p4<span class="sy1">},</span> <span class="sy1">{</span>p4<span class="sy1">,</span> p1<span class="sy1">},</span><br>        <span class="sy1">{</span>p5<span class="sy1">,</span> p6<span class="sy1">},</span> <span class="sy1">{</span>p6<span class="sy1">,</span> p7<span class="sy1">},</span> <span class="sy1">{</span>p7<span class="sy1">,</span> p8<span class="sy1">},</span> <span class="sy1">{</span>p8<span class="sy1">,</span> p5<span class="sy1">}}},</span><br>    <span class="sy1">{</span><span class="st0">"strange"</span><span class="sy1">,</span> <span class="sy1">[]</span>seg<span class="sy1">{{</span>p1<span class="sy1">,</span> p5<span class="sy1">},</span><br>        <span class="sy1">{</span>p5<span class="sy1">,</span> p4<span class="sy1">},</span> <span class="sy1">{</span>p4<span class="sy1">,</span> p8<span class="sy1">},</span> <span class="sy1">{</span>p8<span class="sy1">,</span> p7<span class="sy1">},</span> <span class="sy1">{</span>p7<span class="sy1">,</span> p3<span class="sy1">},</span> <span class="sy1">{</span>p3<span class="sy1">,</span> p2<span class="sy1">},</span> <span class="sy1">{</span>p2<span class="sy1">,</span> p5<span class="sy1">}}},</span><br>    <span class="sy1">{</span><span class="st0">"exagon"</span><span class="sy1">,</span> <span class="sy1">[]</span>seg<span class="sy1">{{</span>p11<span class="sy1">,</span> p12<span class="sy1">},</span> <span class="sy1">{</span>p12<span class="sy1">,</span> p10<span class="sy1">},</span> <span class="sy1">{</span>p10<span class="sy1">,</span> p13<span class="sy1">},</span><br>        <span class="sy1">{</span>p13<span class="sy1">,</span> p14<span class="sy1">},</span> <span class="sy1">{</span>p14<span class="sy1">,</span> p9<span class="sy1">},</span> <span class="sy1">{</span>p9<span class="sy1">,</span> p11<span class="sy1">}}},</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">var</span> tpt <span class="sy2">=</span> <span class="sy1">[]</span>xy<span class="sy1">{</span><br>    <span class="co1">// test points common in other solutions on this page</span><br>    <span class="sy1">{</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">8</span><span class="sy1">},</span> <span class="sy1">{</span><span class="sy3">-</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">8</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span><br>    <span class="co1">// test points that show the problem with "strange"</span><br>    <span class="sy1">{</span><span class="nu0">1</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy1">,</span> <span class="nu0">1</span><span class="sy1">},</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw4">func</span> main<span class="sy1">()</span> <span class="sy1">{</span><br>    <span class="kw1">for</span> _<span class="sy1">,</span> pg <span class="sy2">:=</span> <span class="kw1">range</span> tpg <span class="sy1">{</span><br>        fmt<span class="sy3">.</span>Printf<span class="sy1">(</span><span class="st0">"%s:<span class="es1">\n</span>"</span><span class="sy1">,</span> pg<span class="sy3">.</span>name<span class="sy1">)</span><br>        <span class="kw1">for</span> _<span class="sy1">,</span> pt <span class="sy2">:=</span> <span class="kw1">range</span> tpt <span class="sy1">{</span><br>            fmt<span class="sy3">.</span>Println<span class="sy1">(</span>pt<span class="sy1">,</span> inside<span class="sy1">(</span>pt<span class="sy1">,</span> pg<span class="sy1">))</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span><br><span class="sy1">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>square:
{5 5} true
{5 8} true
{-10 5} false
{0 5} false
{10 5} true
{8 5} true
{10 10} false
{1 2} true
{2 1} true
square hole:
{5 5} false
{5 8} true
{-10 5} false
{0 5} false
{10 5} true
{8 5} true
{10 10} false
{1 2} true
{2 1} true
strange:
{5 5} true
{5 8} false
{-10 5} false
{0 5} false
{10 5} true
{8 5} true
{10 10} false
{1 2} true
{2 1} false
exagon:
{5 5} true
{5 8} true
{-10 5} false
{0 5} false
{10 5} true
{8 5} true
{10 10} false
{1 2} false
{2 1} false
</pre>
<p><b>Closed polygon solution</b>
</p><p>Here input is given as a list of N vertices defining N segments, where one segment extends from each vertex to the next, and one more extends from the last vertex to the first. In the case of the "strange" shape, this mathematically closes the polygon and allows the program to give correct results.
</p>
<pre class="go highlighted_source"><span class="kw1">package</span> main<br>&nbsp;<br><span class="kw1">import</span> <span class="sy1">(</span><br>    <span class="st0">"math"</span><br>    <span class="st0">"fmt"</span><br><span class="sy1">)</span><br>&nbsp;<br><span class="kw1">type</span> xy <span class="kw4">struct</span> <span class="sy1">{</span><br>    x<span class="sy1">,</span> y <span class="kw4">float64</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">type</span> closedPoly <span class="kw4">struct</span> <span class="sy1">{</span><br>    name <span class="kw4">string</span><br>    vert <span class="sy1">[]</span>xy<br><span class="sy1">}</span><br>&nbsp;<br><span class="kw4">func</span> inside<span class="sy1">(</span>pt xy<span class="sy1">,</span> pg closedPoly<span class="sy1">)</span> <span class="kw4">bool</span> <span class="sy1">{</span><br>    <span class="kw1">if</span> <span class="kw3">len</span><span class="sy1">(</span>pg<span class="sy3">.</span>vert<span class="sy1">)</span> &lt; <span class="nu0">3</span> <span class="sy1">{</span><br>        <span class="kw1">return</span> <span class="kw2">false</span><br>    <span class="sy1">}</span><br>    in <span class="sy2">:=</span> rayIntersectsSegment<span class="sy1">(</span>pt<span class="sy1">,</span> pg<span class="sy3">.</span>vert<span class="sy1">[</span><span class="kw3">len</span><span class="sy1">(</span>pg<span class="sy3">.</span>vert<span class="sy1">)</span><span class="sy3">-</span><span class="nu0">1</span><span class="sy1">],</span> pg<span class="sy3">.</span>vert<span class="sy1">[</span><span class="nu0">0</span><span class="sy1">])</span><br>    <span class="kw1">for</span> <span class="nu2">i</span> <span class="sy2">:=</span> <span class="nu0">1</span><span class="sy1">;</span> <span class="nu2">i</span> &lt; <span class="kw3">len</span><span class="sy1">(</span>pg<span class="sy3">.</span>vert<span class="sy1">);</span> <span class="nu2">i</span><span class="sy2">++</span> <span class="sy1">{</span><br>        <span class="kw1">if</span> rayIntersectsSegment<span class="sy1">(</span>pt<span class="sy1">,</span> pg<span class="sy3">.</span>vert<span class="sy1">[</span><span class="nu2">i</span><span class="sy3">-</span><span class="nu0">1</span><span class="sy1">],</span> pg<span class="sy3">.</span>vert<span class="sy1">[</span><span class="nu2">i</span><span class="sy1">])</span> <span class="sy1">{</span><br>            in <span class="sy2">=</span> <span class="sy3">!</span>in<br>        <span class="sy1">}</span><br>    <span class="sy1">}</span><br>    <span class="kw1">return</span> in<br><span class="sy1">}</span><br>&nbsp;<br><span class="kw4">func</span> rayIntersectsSegment<span class="sy1">(</span>p<span class="sy1">,</span> a<span class="sy1">,</span> b xy<span class="sy1">)</span> <span class="kw4">bool</span> <span class="sy1">{</span><br>    <span class="kw1">if</span> a<span class="sy3">.</span>y &gt; b<span class="sy3">.</span>y <span class="sy1">{</span><br>        a<span class="sy1">,</span> b <span class="sy2">=</span> b<span class="sy1">,</span> a<br>    <span class="sy1">}</span><br>    <span class="kw1">for</span> p<span class="sy3">.</span>y <span class="sy3">==</span> a<span class="sy3">.</span>y <span class="sy3">||</span> p<span class="sy3">.</span>y <span class="sy3">==</span> b<span class="sy3">.</span>y <span class="sy1">{</span><br>        p<span class="sy3">.</span>y <span class="sy2">=</span> math<span class="sy3">.</span>Nextafter<span class="sy1">(</span>p<span class="sy3">.</span>y<span class="sy1">,</span> math<span class="sy3">.</span>Inf<span class="sy1">(</span><span class="nu0">1</span><span class="sy1">))</span><br>    <span class="sy1">}</span><br>    <span class="kw1">if</span> p<span class="sy3">.</span>y &lt; a<span class="sy3">.</span>y <span class="sy3">||</span> p<span class="sy3">.</span>y &gt; b<span class="sy3">.</span>y <span class="sy1">{</span><br>        <span class="kw1">return</span> <span class="kw2">false</span><br>    <span class="sy1">}</span><br>    <span class="kw1">if</span> a<span class="sy3">.</span>x &gt; b<span class="sy3">.</span>x <span class="sy1">{</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &gt; a<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">false</span><br>        <span class="sy1">}</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &lt; b<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">true</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span> <span class="kw1">else</span> <span class="sy1">{</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &gt; b<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">false</span><br>        <span class="sy1">}</span><br>        <span class="kw1">if</span> p<span class="sy3">.</span>x &lt; a<span class="sy3">.</span>x <span class="sy1">{</span><br>            <span class="kw1">return</span> <span class="kw2">true</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span><br>    <span class="kw1">return</span> <span class="sy1">(</span>p<span class="sy3">.</span>y<span class="sy3">-</span>a<span class="sy3">.</span>y<span class="sy1">)</span><span class="sy3">/</span><span class="sy1">(</span>p<span class="sy3">.</span>x<span class="sy3">-</span>a<span class="sy3">.</span>x<span class="sy1">)</span> &gt;<span class="sy2">=</span> <span class="sy1">(</span>b<span class="sy3">.</span>y<span class="sy3">-</span>a<span class="sy3">.</span>y<span class="sy1">)</span><span class="sy3">/</span><span class="sy1">(</span>b<span class="sy3">.</span>x<span class="sy3">-</span>a<span class="sy3">.</span>x<span class="sy1">)</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">var</span> tpg <span class="sy2">=</span> <span class="sy1">[]</span>closedPoly<span class="sy1">{</span><br>    <span class="sy1">{</span><span class="st0">"square"</span><span class="sy1">,</span> <span class="sy1">[]</span>xy<span class="sy1">{{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">}}},</span><br>    <span class="sy1">{</span><span class="st0">"square hole"</span><span class="sy1">,</span> <span class="sy1">[]</span>xy<span class="sy1">{{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span><br>        <span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">}}},</span><br>    <span class="sy1">{</span><span class="st0">"strange"</span><span class="sy1">,</span> <span class="sy1">[]</span>xy<span class="sy1">{{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">7</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">},</span><br>        <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy3">.</span><span class="nu0">5</span><span class="sy1">}}},</span><br>    <span class="sy1">{</span><span class="st0">"exagon"</span><span class="sy1">,</span> <span class="sy1">[]</span>xy<span class="sy1">{{</span><span class="nu0">3</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">7</span><span class="sy1">,</span> <span class="nu0">0</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">10</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">7</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">3</span><span class="sy1">,</span> <span class="nu0">10</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">0</span><span class="sy1">,</span> <span class="nu0">5</span><span class="sy1">}}},</span><br><span class="sy1">}</span><br>&nbsp;<br><span class="kw1">var</span> tpt <span class="sy2">=</span> <span class="sy1">[]</span>xy<span class="sy1">{{</span><span class="nu0">1</span><span class="sy1">,</span> <span class="nu0">2</span><span class="sy1">},</span> <span class="sy1">{</span><span class="nu0">2</span><span class="sy1">,</span> <span class="nu0">1</span><span class="sy1">}}</span><br>&nbsp;<br><span class="kw4">func</span> main<span class="sy1">()</span> <span class="sy1">{</span><br>    <span class="kw1">for</span> _<span class="sy1">,</span> pg <span class="sy2">:=</span> <span class="kw1">range</span> tpg <span class="sy1">{</span><br>        fmt<span class="sy3">.</span>Printf<span class="sy1">(</span><span class="st0">"%s:<span class="es1">\n</span>"</span><span class="sy1">,</span> pg<span class="sy3">.</span>name<span class="sy1">)</span><br>        <span class="kw1">for</span> _<span class="sy1">,</span> pt <span class="sy2">:=</span> <span class="kw1">range</span> tpt <span class="sy1">{</span><br>            fmt<span class="sy3">.</span>Println<span class="sy1">(</span>pt<span class="sy1">,</span> inside<span class="sy1">(</span>pt<span class="sy1">,</span> pg<span class="sy1">))</span><br>        <span class="sy1">}</span><br>    <span class="sy1">}</span><br><span class="sy1">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>square:
{1 2} true
{2 1} true
square hole:
{1 2} true
{2 1} true
strange:
{1 2} false
{2 1} false
exagon:
{1 2} false
{2 1} false
</pre>
<p><b>PNPoly algorithm</b>
</p><p>This solution replaces the <code>rayIntersectsSegment</code> function above with the expression from the popular PNPoly algorithm described at <a rel="nofollow" class="external free" href="https://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html">https://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html</a>. The expression is not only simpler but more accurate.
</p><p>This solution is preferred over the two above.
</p>
<pre class="text highlighted_source">package main<br>&nbsp;<br>import "fmt"<br>&nbsp;<br>type xy struct {<br>    x, y float64<br>}<br>&nbsp;<br>type closedPoly struct {<br>    name string<br>    vert []xy<br>}<br>&nbsp;<br>func inside(pt xy, pg closedPoly) bool {<br>    if len(pg.vert) &lt; 3 {<br>        return false<br>    }<br>    in&nbsp;:= rayIntersectsSegment(pt, pg.vert[len(pg.vert)-1], pg.vert[0])<br>    for i&nbsp;:= 1; i &lt; len(pg.vert); i++ {<br>        if rayIntersectsSegment(pt, pg.vert[i-1], pg.vert[i]) {<br>            in =&nbsp;!in<br>        }<br>    }<br>    return in<br>}<br>&nbsp;<br>func rayIntersectsSegment(p, a, b xy) bool {<br>    return (a.y &gt; p.y)&nbsp;!= (b.y &gt; p.y) &amp;&amp;<br>        p.x &lt; (b.x-a.x)*(p.y-a.y)/(b.y-a.y)+a.x<br>}<br>&nbsp;<br>var tpg = []closedPoly{<br>    {"square", []xy{{0, 0}, {10, 0}, {10, 10}, {0, 10}}},<br>    {"square hole", []xy{{0, 0}, {10, 0}, {10, 10}, {0, 10}, {0, 0},<br>        {2.5, 2.5}, {7.5, 2.5}, {7.5, 7.5}, {2.5, 7.5}, {2.5, 2.5}}},<br>    {"strange", []xy{{0, 0}, {2.5, 2.5}, {0, 10}, {2.5, 7.5}, {7.5, 7.5},<br>        {10, 10}, {10, 0}, {2.5, 2.5}}},<br>    {"exagon", []xy{{3, 0}, {7, 0}, {10, 5}, {7, 10}, {3, 10}, {0, 5}}},<br>}<br>&nbsp;<br>var tpt = []xy{{1, 2}, {2, 1}}<br>&nbsp;<br>func main() {<br>    for _, pg&nbsp;:= range tpg {<br>        fmt.Printf("%s:\n", pg.name)<br>        for _, pt&nbsp;:= range tpt {<br>            fmt.Println(pt, inside(pt, pg))<br>        }<br>    }<br>}</pre>
<h2><span class="mw-headline" id="Haskell"><a href="https://rosettacode.org/wiki/Category:Haskell" title="Category:Haskell">Haskell</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=13" title="Edit section: Haskell">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="haskell highlighted_source"><span class="kw1">import</span> Data<span class="sy0">.</span>Ratio<br>&nbsp;<br><span class="kw1">type</span> Point <span class="sy0">=</span> <span class="br0">(</span><a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Rational"><span class="kw4">Rational</span></a><span class="sy0">,</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Rational"><span class="kw4">Rational</span></a><span class="br0">)</span><br><span class="kw1">type</span> Polygon <span class="sy0">=</span> <span class="br0">[</span>Point<span class="br0">]</span><br><span class="kw1">data</span> Line <span class="sy0">=</span> Sloped <span class="br0">{</span>lineSlope<span class="sy0">,</span> lineYIntercept <span class="sy0">::</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Rational"><span class="kw4">Rational</span></a><span class="br0">}</span> <span class="sy0">|</span><br>            Vert <span class="br0">{</span>lineXIntercept <span class="sy0">::</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Rational"><span class="kw4">Rational</span></a><span class="br0">}</span><br>&nbsp;<br>polygonSides <span class="sy0">::</span> Polygon <span class="sy0">-&gt;</span> <span class="br0">[</span><span class="br0">(</span>Point<span class="sy0">,</span> Point<span class="br0">)</span><span class="br0">]</span><br>polygonSides poly<span class="sy0">@</span><span class="br0">(</span>p1&nbsp;: ps<span class="br0">)</span> <span class="sy0">=</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:zip"><span class="kw3">zip</span></a> poly <span class="sy0">$</span> ps <span class="sy0">++</span> <span class="br0">[</span>p1<span class="br0">]</span><br>&nbsp;<br>intersects <span class="sy0">::</span> Point <span class="sy0">-&gt;</span> Line <span class="sy0">-&gt;</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Bool"><span class="kw4">Bool</span></a><br><span class="coMULTI">{- @intersects (px, py) l@ is true if the ray {(x, py) | x ≥ px}<br>intersects l. -}</span><br>intersects <span class="br0">(</span>px<span class="sy0">,</span> <span class="sy0">_</span><span class="br0">)</span>  <span class="br0">(</span>Vert xint<span class="br0">)</span>  <span class="sy0">=</span> px <span class="sy0">&lt;=</span> xint<br>intersects <span class="br0">(</span>px<span class="sy0">,</span> py<span class="br0">)</span> <span class="br0">(</span>Sloped m b<span class="br0">)</span> <span class="sy0">|</span> m <span class="sy0">&lt;</span> <span class="nu0">0</span>     <span class="sy0">=</span> py <span class="sy0">&lt;=</span> m <span class="sy0">*</span> px <span class="sy0">+</span> b<br>                                 <span class="sy0">|</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:otherwise"><span class="kw3">otherwise</span></a> <span class="sy0">=</span> py <span class="sy0">&gt;=</span> m <span class="sy0">*</span> px <span class="sy0">+</span> b<br>&nbsp;<br>onLine <span class="sy0">::</span> Point <span class="sy0">-&gt;</span> Line <span class="sy0">-&gt;</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Bool"><span class="kw4">Bool</span></a><br><span class="coMULTI">{- Is the point on the line? -}</span><br>onLine <span class="br0">(</span>px<span class="sy0">,</span> <span class="sy0">_</span><span class="br0">)</span>  <span class="br0">(</span>Vert xint<span class="br0">)</span>  <span class="sy0">=</span> px <span class="sy0">==</span> xint<br>onLine <span class="br0">(</span>px<span class="sy0">,</span> py<span class="br0">)</span> <span class="br0">(</span>Sloped m b<span class="br0">)</span> <span class="sy0">=</span> py <span class="sy0">==</span> m <span class="sy0">*</span> px <span class="sy0">+</span> b<br>&nbsp;<br>carrier <span class="sy0">::</span> <span class="br0">(</span>Point<span class="sy0">,</span> Point<span class="br0">)</span> <span class="sy0">-&gt;</span> Line<br><span class="coMULTI">{- Finds the line containing the given line segment. -}</span><br>carrier <span class="br0">(</span><span class="br0">(</span>ax<span class="sy0">,</span> ay<span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span>bx<span class="sy0">,</span> by<span class="br0">)</span><span class="br0">)</span> <span class="sy0">|</span> ax <span class="sy0">==</span> bx  <span class="sy0">=</span> Vert ax<br>                             <span class="sy0">|</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:otherwise"><span class="kw3">otherwise</span></a> <span class="sy0">=</span> Sloped slope yint<br>  <span class="kw1">where</span> slope <span class="sy0">=</span> <span class="br0">(</span>ay <span class="sy0">-</span> by<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>ax <span class="sy0">-</span> bx<span class="br0">)</span><br>        yint <span class="sy0">=</span> ay <span class="sy0">-</span> slope <span class="sy0">*</span> ax<br>&nbsp;<br>between <span class="sy0">::</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Ord"><span class="kw4">Ord</span></a> a <span class="sy0">=&gt;</span> a <span class="sy0">-&gt;</span> a <span class="sy0">-&gt;</span> a <span class="sy0">-&gt;</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Bool"><span class="kw4">Bool</span></a><br>between x a b <span class="sy0">|</span> a <span class="sy0">&gt;</span> b     <span class="sy0">=</span> b <span class="sy0">&lt;=</span> x <span class="sy0">&amp;&amp;</span> x <span class="sy0">&lt;=</span> a<br>              <span class="sy0">|</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:otherwise"><span class="kw3">otherwise</span></a> <span class="sy0">=</span> a <span class="sy0">&lt;=</span> x <span class="sy0">&amp;&amp;</span> x <span class="sy0">&lt;=</span> b<br>&nbsp;<br>inPolygon <span class="sy0">::</span> Point <span class="sy0">-&gt;</span> Polygon <span class="sy0">-&gt;</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t:Bool"><span class="kw4">Bool</span></a><br>inPolygon p<span class="sy0">@</span><span class="br0">(</span>px<span class="sy0">,</span> py<span class="br0">)</span> <span class="sy0">=</span> f <span class="nu0">0</span> <span class="sy0">.</span> polygonSides<br>  <span class="kw1">where</span> f n <span class="br0">[</span><span class="br0">]</span>                             <span class="sy0">=</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:odd"><span class="kw3">odd</span></a> n<br>        f n <span class="br0">(</span>side&nbsp;: sides<span class="br0">)</span> <span class="sy0">|</span> far           <span class="sy0">=</span> f n       sides<br>                           <span class="sy0">|</span> onSegment     <span class="sy0">=</span> True<br>                           <span class="sy0">|</span> rayIntersects <span class="sy0">=</span> f <span class="br0">(</span>n <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> sides<br>                           <span class="sy0">|</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:otherwise"><span class="kw3">otherwise</span></a>     <span class="sy0">=</span> f n       sides<br>          <span class="kw1">where</span> far <span class="sy0">=</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:not"><span class="kw3">not</span></a> <span class="sy0">$</span> between py ay by<br>                onSegment <span class="sy0">|</span> ay <span class="sy0">==</span> by  <span class="sy0">=</span> between px ax bx<br>                          <span class="sy0">|</span> <a href="http://haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:otherwise"><span class="kw3">otherwise</span></a> <span class="sy0">=</span> p `onLine` line<br>                rayIntersects <span class="sy0">=</span><br>                    intersects p line <span class="sy0">&amp;&amp;</span><br>                    <span class="br0">(</span>py <span class="sy0">/=</span> ay <span class="sy0">||</span> by <span class="sy0">&lt;</span> py<span class="br0">)</span> <span class="sy0">&amp;&amp;</span><br>                    <span class="br0">(</span>py <span class="sy0">/=</span> by <span class="sy0">||</span> ay <span class="sy0">&lt;</span> py<span class="br0">)</span><br>                <span class="br0">(</span><span class="br0">(</span>ax<span class="sy0">,</span> ay<span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span>bx<span class="sy0">,</span> by<span class="br0">)</span><span class="br0">)</span> <span class="sy0">=</span> side<br>                line <span class="sy0">=</span> carrier side</pre>
<h2><span class="mw-headline" id="J"><a href="https://rosettacode.org/wiki/Category:J" title="Category:J">J</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=14" title="Edit section: J">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="j highlighted_source"><span class="co1">NB.*crossPnP v point in closed polygon, crossing number</span><br><span class="co1">NB.  bool=. points crossPnP polygon</span><br>crossPnP=: <span class="nu0">4</span>&nbsp;: <span class="nu0">0</span>"<span class="nu0">2</span><br>  <span class="st_h">'X Y'</span>=. |:<span class="kw2">x</span><br>  <span class="st_h">'x0 y0 x1 y1'</span>=. |:<span class="nu0">2</span> ,/\^:<span class="sy0">(</span><span class="nu0">2</span>={:@$@]<span class="sy0">)</span> <span class="kw2">y</span><br>  p1=. <span class="sy0">((</span>y0&lt;:/Y<span class="sy0">)</span>*. y1&gt;/Y<span class="sy0">)</span> +. <span class="sy0">(</span>y0&gt;/Y<span class="sy0">)</span>*. y1&lt;:/Y<br>  p2=. <span class="sy0">(</span>x0-/X<span class="sy0">)</span> &lt; <span class="sy0">(</span>x0-x1<span class="sy0">)</span> * <span class="sy0">(</span>y0-/Y<span class="sy0">)</span>&nbsp;% <span class="sy0">(</span>y0 - y1<span class="sy0">)</span><br>  <span class="nu0">2</span>|+/ p1*.p2<br><span class="sy0">)</span></pre>
<p>Sample data:
</p>
<pre class="j highlighted_source">SQUAREV=:          <span class="nu0">0</span>   <span class="nu0">0</span>   , <span class="nu0">10</span>  <span class="nu0">0</span>   , <span class="nu0">10</span>  <span class="nu0">10</span>  ,: <span class="nu0">0</span>   <span class="nu0">10</span><br>SQUAREV=: SQUAREV, <span class="nu0">2.5</span> <span class="nu0">2.5</span> , <span class="nu0">7.5</span> <span class="nu0">0.1</span> , <span class="nu0">7.5</span> <span class="nu0">7.5</span> ,: <span class="nu0">2.5</span> <span class="nu0">7.5</span><br>&nbsp;<br>ESAV=: <span class="nu0">3</span> <span class="nu0">0</span> , <span class="nu0">7</span> <span class="nu0">0</span> , <span class="nu0">10</span> <span class="nu0">5</span> , <span class="nu0">7</span> <span class="nu0">10</span> , <span class="nu0">3</span> <span class="nu0">10</span> ,: <span class="nu0">0</span> <span class="nu0">5</span><br>&nbsp;<br>ESA=:        <span class="sy0">(</span><span class="nu0">0</span> <span class="nu0">1</span>,<span class="nu0">1</span> <span class="nu0">2</span>,<span class="nu0">2</span> <span class="nu0">3</span>,<span class="nu0">3</span> <span class="nu0">4</span>,<span class="nu0">4</span> <span class="nu0">5</span>,:<span class="nu0">5</span> <span class="nu0">0</span><span class="sy0">)</span> , .{ ESAV<br>SQUARE=:     <span class="sy0">(</span><span class="nu0">0</span> <span class="nu0">1</span>,<span class="nu0">1</span> <span class="nu0">2</span>,<span class="nu0">2</span> <span class="nu0">3</span>,:<span class="nu0">3</span> <span class="nu0">0</span><span class="sy0">)</span>         , .{ SQUAREV<br>SQUAREHOLE=: <span class="sy0">(</span><span class="nu0">0</span> <span class="nu0">1</span>,<span class="nu0">1</span> <span class="nu0">2</span>,<span class="nu0">2</span> <span class="nu0">3</span>,<span class="nu0">3</span> <span class="nu0">0</span>,<span class="nu0">4</span> <span class="nu0">5</span>,<span class="nu0">5</span> <span class="nu0">6</span>,<span class="nu0">6</span> <span class="nu0">7</span>,:<span class="nu0">7</span> <span class="nu0">4</span><span class="sy0">)</span> , .{ SQUAREV<br>STRANGE=:    <span class="sy0">(</span><span class="nu0">0</span> <span class="nu0">4</span>,<span class="nu0">4</span> <span class="nu0">3</span>,<span class="nu0">3</span> <span class="nu0">7</span>,<span class="nu0">7</span> <span class="nu0">6</span>,<span class="nu0">6</span> <span class="nu0">2</span>,<span class="nu0">2</span> <span class="nu0">1</span>,<span class="nu0">1</span> <span class="nu0">5</span>,:<span class="nu0">5</span> <span class="nu0">0</span><span class="sy0">)</span> , .{ SQUAREV<br>&nbsp;<br>POINTS=: <span class="nu0">5</span> <span class="nu0">5</span>,<span class="nu0">5</span> <span class="nu0">8</span>,<span class="nu0">2</span> <span class="nu0">2</span>,<span class="nu0">0</span> <span class="nu0">0</span>,<span class="nu0">10</span> <span class="nu0">10</span>,<span class="nu0">2.5</span> <span class="nu0">2.5</span>,<span class="nu0">0.01</span> <span class="nu0">5</span>,<span class="nu0">2.2</span> <span class="nu0">7.4</span>,<span class="nu0">0</span> <span class="nu0">5</span>,<span class="nu0">10</span> <span class="nu0">5</span>,:<span class="nu0">_4</span> <span class="nu0">10</span></pre>
<p>Testing:
</p>
<pre class="j highlighted_source">   <span class="sy0">(</span>&lt;POINTS<span class="sy0">)</span> crossPnP every ESA;SQUARE;SQUAREHOLE;STRANGE<br><span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">0</span><br><span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">0</span><br><span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">0</span><br><span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">0</span> <span class="nu0">1</span> <span class="nu0">0</span></pre>
<h2><span class="mw-headline" id="Java"><a href="https://rosettacode.org/wiki/Category:Java" title="Category:Java">Java</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=15" title="Edit section: Java">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="java highlighted_source"><span class="kw1">import</span> <span class="co2">static</span> java.<span class="me1">lang</span>.<a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Amath+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">Math</span></a>.<span class="sy0">*;</span><br>&nbsp;<br><span class="kw1">public</span> <span class="kw1">class</span> RayCasting <span class="br0">{</span><br>&nbsp;<br>    <span class="kw1">static</span> <span class="kw4">boolean</span> intersects<span class="br0">(</span><span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span> A, <span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span> B, <span class="kw4">double</span><span class="br0">[</span><span class="br0">]</span> P<span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw1">if</span> <span class="br0">(</span>A<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">&gt;</span> B<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><br>            <span class="kw1">return</span> intersects<span class="br0">(</span>B, A, P<span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>        <span class="kw1">if</span> <span class="br0">(</span>P<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">==</span> A<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">||</span> P<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">==</span> B<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><br>            P<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">+=</span> <span class="nu0">0.0001</span><span class="sy0">;</span><br>&nbsp;<br>        <span class="kw1">if</span> <span class="br0">(</span>P<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">&gt;</span> B<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">||</span> P<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">&lt;</span> A<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">||</span> P<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">&gt;=</span> max<span class="br0">(</span>A<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>, B<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>            <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span><br>&nbsp;<br>        <span class="kw1">if</span> <span class="br0">(</span>P<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">&lt;</span> min<span class="br0">(</span>A<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>, B<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>            <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span><br>&nbsp;<br>        <span class="kw4">double</span> red <span class="sy0">=</span> <span class="br0">(</span>P<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">-</span> A<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span><span class="kw4">double</span><span class="br0">)</span> <span class="br0">(</span>P<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">-</span> A<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>        <span class="kw4">double</span> blue <span class="sy0">=</span> <span class="br0">(</span>B<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">-</span> A<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span><span class="kw4">double</span><span class="br0">)</span> <span class="br0">(</span>B<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">-</span> A<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>        <span class="kw1">return</span> red <span class="sy0">&gt;=</span> blue<span class="sy0">;</span><br>    <span class="br0">}</span><br>&nbsp;<br>    <span class="kw1">static</span> <span class="kw4">boolean</span> contains<span class="br0">(</span><span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> shape, <span class="kw4">double</span><span class="br0">[</span><span class="br0">]</span> pnt<span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw4">boolean</span> inside <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span><br>        <span class="kw4">int</span> len <span class="sy0">=</span> shape.<span class="me1">length</span><span class="sy0">;</span><br>        <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> len<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>            <span class="kw1">if</span> <span class="br0">(</span>intersects<span class="br0">(</span>shape<span class="br0">[</span>i<span class="br0">]</span>, shape<span class="br0">[</span><span class="br0">(</span>i <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">%</span> len<span class="br0">]</span>, pnt<span class="br0">)</span><span class="br0">)</span><br>                inside <span class="sy0">=</span> <span class="sy0">!</span>inside<span class="sy0">;</span><br>        <span class="br0">}</span><br>        <span class="kw1">return</span> inside<span class="sy0">;</span><br>    <span class="br0">}</span><br>&nbsp;<br>    <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">(</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Astring+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">String</span></a><span class="br0">[</span><span class="br0">]</span> a<span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw4">double</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> testPoints <span class="sy0">=</span> <span class="br0">{</span><span class="br0">{</span><span class="nu0">10</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">10</span>, <span class="nu0">16</span><span class="br0">}</span>, <span class="br0">{</span><span class="sy0">-</span><span class="nu0">20</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">10</span><span class="br0">}</span>,<br>        <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">16</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>        <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> shape <span class="sy0">:</span> shapes<span class="br0">)</span> <span class="br0">{</span><br>            <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">double</span><span class="br0">[</span><span class="br0">]</span> pnt <span class="sy0">:</span> testPoints<span class="br0">)</span><br>                <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">printf</span><span class="br0">(</span><span class="st0">"%7s "</span>, contains<span class="br0">(</span>shape, pnt<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>            <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Asystem+java.sun.com&amp;btnI=I%27m%20Feeling%20Lucky"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><br>&nbsp;<br>    <span class="kw1">final</span> <span class="kw1">static</span> <span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> square <span class="sy0">=</span> <span class="br0">{</span><span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">20</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">final</span> <span class="kw1">static</span> <span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> squareHole <span class="sy0">=</span> <span class="br0">{</span><span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">20</span><span class="br0">}</span>,<br>    <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">15</span>, <span class="nu0">5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">15</span>, <span class="nu0">15</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">15</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">final</span> <span class="kw1">static</span> <span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> strange <span class="sy0">=</span> <span class="br0">{</span><span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">5</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">15</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">15</span>, <span class="nu0">15</span><span class="br0">}</span>,<br>    <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">0</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">final</span> <span class="kw1">static</span> <span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> hexagon <span class="sy0">=</span> <span class="br0">{</span><span class="br0">{</span><span class="nu0">6</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">14</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">14</span>, <span class="nu0">20</span><span class="br0">}</span>,<br>    <span class="br0">{</span><span class="nu0">6</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">10</span><span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">final</span> <span class="kw1">static</span> <span class="kw4">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> shapes <span class="sy0">=</span> <span class="br0">{</span>square, squareHole, strange, hexagon<span class="br0">}</span><span class="sy0">;</span><br><span class="br0">}</span></pre>
<pre>   true    true   false   false    true    true   false 
  false    true   false   false    true    true   false 
   true   false   false   false    true    true   false 
   true    true   false   false    true    true   false </pre>
<h2><span class="mw-headline" id="JavaScript"><a href="https://rosettacode.org/wiki/Category:JavaScript" title="Category:JavaScript">JavaScript</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=16" title="Edit section: JavaScript">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="javascript highlighted_source">&nbsp;<br><span class="coMULTI">/**<br> * @return {boolean} true if (lng, lat) is in bounds<br> */</span><br><span class="kw1">function</span> contains<span class="br0">(</span>bounds<span class="sy0">,</span> lat<span class="sy0">,</span> lng<span class="br0">)</span> <span class="br0">{</span><br>    <span class="co1">//https://rosettacode.org/wiki/Ray-casting_algorithm</span><br>    <span class="kw1">var</span> count <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><br>    <span class="kw1">for</span> <span class="br0">(</span><span class="kw1">var</span> b <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> b <span class="sy0">&lt;</span> bounds.<span class="me1">length</span><span class="sy0">;</span> b<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw1">var</span> vertex1 <span class="sy0">=</span> bounds<span class="br0">[</span>b<span class="br0">]</span><span class="sy0">;</span><br>        <span class="kw1">var</span> vertex2 <span class="sy0">=</span> bounds<span class="br0">[</span><span class="br0">(</span>b <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">%</span> bounds.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span><br>        <span class="kw1">if</span> <span class="br0">(</span>west<span class="br0">(</span>vertex1<span class="sy0">,</span> vertex2<span class="sy0">,</span> lng<span class="sy0">,</span> lat<span class="br0">)</span><span class="br0">)</span><br>            <span class="sy0">++</span>count<span class="sy0">;</span><br>    <span class="br0">}</span><br>    <span class="kw1">return</span> count <span class="sy0">%</span> <span class="nu0">2</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="coMULTI">/**<br>     * @return {boolean} true if (x,y) is west of the line segment connecting A and B<br>     */</span><br>    <span class="kw1">function</span> west<span class="br0">(</span>A<span class="sy0">,</span> B<span class="sy0">,</span> x<span class="sy0">,</span> y<span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw1">if</span> <span class="br0">(</span>A.<span class="me1">y</span> <span class="sy0">&lt;=</span> B.<span class="me1">y</span><span class="br0">)</span> <span class="br0">{</span><br>            <span class="kw1">if</span> <span class="br0">(</span>y <span class="sy0">&lt;=</span> A.<span class="me1">y</span> <span class="sy0">||</span> y <span class="sy0">&gt;</span> B.<span class="me1">y</span> <span class="sy0">||</span><br>                x <span class="sy0">&gt;=</span> A.<span class="me1">x</span> <span class="sy0">&amp;&amp;</span> x <span class="sy0">&gt;=</span> B.<span class="me1">x</span><span class="br0">)</span> <span class="br0">{</span><br>                <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span><br>            <span class="br0">}</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>x <span class="sy0">&lt;</span> A.<span class="me1">x</span> <span class="sy0">&amp;&amp;</span> x <span class="sy0">&lt;</span> B.<span class="me1">x</span><span class="br0">)</span> <span class="br0">{</span><br>                <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span><br>            <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>                <span class="kw1">return</span> <span class="br0">(</span>y <span class="sy0">-</span> A.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>x <span class="sy0">-</span> A.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> <span class="br0">(</span>B.<span class="me1">y</span> <span class="sy0">-</span> A.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>B.<span class="me1">x</span> <span class="sy0">-</span> A.<span class="me1">x</span><span class="br0">)</span><span class="sy0">;</span><br>            <span class="br0">}</span><br>        <span class="br0">}</span> <span class="kw1">else</span> <span class="br0">{</span><br>            <span class="kw1">return</span> west<span class="br0">(</span>B<span class="sy0">,</span> A<span class="sy0">,</span> x<span class="sy0">,</span> y<span class="br0">)</span><span class="sy0">;</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">var</span> square <span class="sy0">=</span> <span class="br0">{</span>name<span class="sy0">:</span> <span class="st0">'square'</span><span class="sy0">,</span> bounds<span class="sy0">:</span> <span class="br0">[</span><span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="br0">]</span><span class="br0">}</span><span class="sy0">;</span><br><span class="kw1">var</span> squareHole <span class="sy0">=</span> <span class="br0">{</span><br>    name<span class="sy0">:</span> <span class="st0">'squareHole'</span><span class="sy0">,</span><br>    bounds<span class="sy0">:</span> <span class="br0">[</span><span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">5</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">15</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">15</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">15</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">5</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">15</span><span class="br0">}</span><span class="br0">]</span><br><span class="br0">}</span><span class="sy0">;</span><br><span class="kw1">var</span> strange <span class="sy0">=</span> <span class="br0">{</span><br>    name<span class="sy0">:</span> <span class="st0">'strange'</span><span class="sy0">,</span><br>    bounds<span class="sy0">:</span> <span class="br0">[</span><span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">5</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">5</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">5</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">15</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">15</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">15</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="br0">]</span><br><span class="br0">}</span><span class="sy0">;</span><br><span class="kw1">var</span> hexagon <span class="sy0">=</span> <span class="br0">{</span><br>    name<span class="sy0">:</span> <span class="st0">'hexagon'</span><span class="sy0">,</span><br>    bounds<span class="sy0">:</span> <span class="br0">[</span><span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">6</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">14</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">0</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">14</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">6</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>x<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="br0">]</span><br><span class="br0">}</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">var</span> shapes <span class="sy0">=</span> <span class="br0">[</span>square<span class="sy0">,</span> squareHole<span class="sy0">,</span> strange<span class="sy0">,</span> hexagon<span class="br0">]</span><span class="sy0">;</span><br><span class="kw1">var</span> testPoints <span class="sy0">=</span> <span class="br0">[</span><span class="br0">{</span>lng<span class="sy0">:</span> <span class="nu0">10</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>lng<span class="sy0">:</span> <span class="nu0">10</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">16</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>lng<span class="sy0">:</span> <span class="sy0">-</span><span class="nu0">20</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span><br>    <span class="br0">{</span>lng<span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>lng<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>lng<span class="sy0">:</span> <span class="nu0">16</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">10</span><span class="br0">}</span><span class="sy0">,</span> <span class="br0">{</span>lng<span class="sy0">:</span> <span class="nu0">20</span><span class="sy0">,</span> lat<span class="sy0">:</span> <span class="nu0">20</span><span class="br0">}</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">for</span> <span class="br0">(</span><span class="kw1">var</span> s <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> s <span class="sy0">&lt;</span> shapes.<span class="me1">length</span><span class="sy0">;</span> s<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>    <span class="kw1">var</span> shape <span class="sy0">=</span> shapes<span class="br0">[</span>s<span class="br0">]</span><span class="sy0">;</span><br>    <span class="kw1">for</span> <span class="br0">(</span><span class="kw1">var</span> tp <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> tp <span class="sy0">&lt;</span> testPoints.<span class="me1">length</span><span class="sy0">;</span> tp<span class="sy0">++</span><span class="br0">)</span> <span class="br0">{</span><br>        <span class="kw1">var</span> testPoint <span class="sy0">=</span> testPoints<span class="br0">[</span>tp<span class="br0">]</span><span class="sy0">;</span><br>        console.<span class="me1">log</span><span class="br0">(</span>JSON.<span class="me1">stringify</span><span class="br0">(</span>testPoint<span class="br0">)</span> <span class="sy0">+</span> <span class="st0">'<span class="es0">\t</span>in '</span> <span class="sy0">+</span> shape.<span class="me1">name</span> <span class="sy0">+</span> <span class="st0">'<span class="es0">\t</span>'</span> <span class="sy0">+</span> contains<span class="br0">(</span>shape.<span class="me1">bounds</span><span class="sy0">,</span> testPoint.<span class="me1">lat</span><span class="sy0">,</span> testPoint.<span class="me1">lng</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span><br>&nbsp;</pre>
<h2><span class="mw-headline" id="Julia"><a href="https://rosettacode.org/wiki/Category:Julia" title="Category:Julia">Julia</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=17" title="Edit section: Julia">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="https://rosettacode.org/wiki/Julia" title="Julia" class="mw-redirect">Julia</a> version 0.6</div>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Python">Python</a></div>
<p><b>Module</b>:
</p>
<pre class="text highlighted_source">module RayCastings<br>&nbsp;<br>export Point<br>&nbsp;<br>struct Point{T}<br>    x::T<br>    y::T<br>end<br>Base.show(io::IO, p::Point) = print(io, "($(p.x), $(p.y))")<br>&nbsp;<br>const Edge = Tuple{Point{T}, Point{T}} where T<br>Base.show(io::IO, e::Edge) = print(io, "$(e[1]) ∘-∘ $(e[2])")<br>&nbsp;<br>function rayintersectseg(p::Point{T}, edge::Edge{T}) where T<br>    a, b = edge<br>    if a.y &gt; b.y<br>        a, b = b, a<br>    end<br>    if p.y ∈ (a.y, b.y)<br>        p = Point(p.x, p.y + eps(p.y))<br>    end<br>&nbsp;<br>    rst = false<br>    if (p.y &gt; b.y || p.y &lt; a.y) || (p.x &gt; max(a.x, b.x))<br>        return false<br>    end<br>&nbsp;<br>    if p.x &lt; min(a.x, b.x)<br>        rst = true<br>    else<br>        mred = (b.y - a.y) / (b.x - a.x)<br>        mblu = (p.y - a.y) / (p.x - a.x)<br>        rst = mblu ≥ mred<br>    end<br>&nbsp;<br>    return rst<br>end<br>&nbsp;<br>isinside(poly::Vector{Tuple{Point{T}, Point{T}}}, p::Point{T}) where T =<br>    isodd(count(edge -&gt; rayintersectseg(p, edge), poly))<br>&nbsp;<br>connect(a::Point{T}, b::Point{T}...) where T =<br>    [(a, b) for (a, b) in zip(vcat(a, b...), vcat(b..., a))]<br>&nbsp;<br>end  # module RayCastings</pre>
<p><b>Main</b>:
</p>
<pre class="text highlighted_source">let A = Point(0.0, 0.0),<br>    B = Point(0.0, 10.0),<br>    C = Point(10.0, 10.0),<br>    D = Point(10.0, 0.0),<br>    E = Point(2.5, 2.5),<br>    F = Point(2.5, 7.5),<br>    G = Point(7.5, 7.5),<br>    H = Point(7.5, 2.5),<br>    I = Point(3.0, 0.0),<br>    J = Point(7.0, 0.0),<br>    K = Point(10.0, 5.0),<br>    L = Point(7.0, 10.0),<br>    M = Point(3.0, 10.0),<br>    N = Point(0.0, 5.0),<br>    testpts = (Point(5.0, 5.0), Point(5.0, 8.0), Point(-10.0, 5.0), Point(0.0, 5.0),<br>        Point(10.0, 5.0), Point(8.0, 5.0), Point(10.0, 10.0))<br>&nbsp;<br>    square = RayCastings.connect(A, B, C, D)<br>    square_withhole = vcat(square, RayCastings.connect(E, F, G, H))<br>    strange = RayCastings.connect(A, E, B, F, G, C, D, E)<br>    exagon = RayCastings.connect(I, J, K, L, M, N)<br>&nbsp;<br>    println("\n# TESTING WHETHER POINTS ARE WITHIN POLYGONS")<br>    for poly in (square, square_withhole, strange, exagon)<br>        println("\nEdges: \n - ", join(poly, "\n - "))<br>        println("Inside/outside:")<br>        for p in testpts<br>            @printf(" -&nbsp;%-12s is&nbsp;%s\n", p, RayCastings.isinside(poly, p)&nbsp;? "inside"&nbsp;: "outside")<br>        end<br>    end<br>end</pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre># TESTING WHETHER POINTS ARE WITHIN POLYGONS

Edges:
 - (0.0, 0.0) ∘-∘ (0.0, 10.0)
 - (0.0, 10.0) ∘-∘ (10.0, 10.0)
 - (10.0, 10.0) ∘-∘ (10.0, 0.0)
 - (10.0, 0.0) ∘-∘ (0.0, 0.0)
Inside/outside:
 - (5.0, 5.0)   is inside
 - (5.0, 8.0)   is inside
 - (-10.0, 5.0) is outside
 - (0.0, 5.0)   is outside
 - (10.0, 5.0)  is inside
 - (8.0, 5.0)   is inside
 - (10.0, 10.0) is outside

Edges:
 - (0.0, 0.0) ∘-∘ (0.0, 10.0)
 - (0.0, 10.0) ∘-∘ (10.0, 10.0)
 - (10.0, 10.0) ∘-∘ (10.0, 0.0)
 - (10.0, 0.0) ∘-∘ (0.0, 0.0)
 - (2.5, 2.5) ∘-∘ (2.5, 7.5)
 - (2.5, 7.5) ∘-∘ (7.5, 7.5)
 - (7.5, 7.5) ∘-∘ (7.5, 2.5)
 - (7.5, 2.5) ∘-∘ (2.5, 2.5)
Inside/outside:
 - (5.0, 5.0)   is outside
 - (5.0, 8.0)   is inside
 - (-10.0, 5.0) is outside
 - (0.0, 5.0)   is outside
 - (10.0, 5.0)  is inside
 - (8.0, 5.0)   is inside
 - (10.0, 10.0) is outside

Edges:
 - (0.0, 0.0) ∘-∘ (2.5, 2.5)
 - (2.5, 2.5) ∘-∘ (0.0, 10.0)
 - (0.0, 10.0) ∘-∘ (2.5, 7.5)
 - (2.5, 7.5) ∘-∘ (7.5, 7.5)
 - (7.5, 7.5) ∘-∘ (10.0, 10.0)
 - (10.0, 10.0) ∘-∘ (10.0, 0.0)
 - (10.0, 0.0) ∘-∘ (2.5, 2.5)
 - (2.5, 2.5) ∘-∘ (0.0, 0.0)
Inside/outside:
 - (5.0, 5.0)   is inside
 - (5.0, 8.0)   is outside
 - (-10.0, 5.0) is outside
 - (0.0, 5.0)   is outside
 - (10.0, 5.0)  is inside
 - (8.0, 5.0)   is inside
 - (10.0, 10.0) is outside

Edges:
 - (3.0, 0.0) ∘-∘ (7.0, 0.0)
 - (7.0, 0.0) ∘-∘ (10.0, 5.0)
 - (10.0, 5.0) ∘-∘ (7.0, 10.0)
 - (7.0, 10.0) ∘-∘ (3.0, 10.0)
 - (3.0, 10.0) ∘-∘ (0.0, 5.0)
 - (0.0, 5.0) ∘-∘ (3.0, 0.0)
Inside/outside:
 - (5.0, 5.0)   is inside
 - (5.0, 8.0)   is inside
 - (-10.0, 5.0) is outside
 - (0.0, 5.0)   is outside
 - (10.0, 5.0)  is inside
 - (8.0, 5.0)   is inside
 - (10.0, 10.0) is outside</pre>
<h2><span class="mw-headline" id="Kotlin"><a href="https://rosettacode.org/wiki/Category:Kotlin" title="Category:Kotlin">Kotlin</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=18" title="Edit section: Kotlin">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#D">D</a></div>
<pre class="scala highlighted_source"><a href="http://scala-lang.org/"><span class="kw1">import</span></a> java.<span class="me1">lang</span>.<span class="me1">Double</span>.<span class="me1">MAX_VALUE</span><br><a href="http://scala-lang.org/"><span class="kw1">import</span></a> java.<span class="me1">lang</span>.<span class="me1">Double</span>.<span class="me1">MIN_VALUE</span><br><a href="http://scala-lang.org/"><span class="kw1">import</span></a> java.<span class="me1">lang</span>.<span class="me1">Math</span>.<span class="me1">abs</span><br>&nbsp;<br>data <a href="http://scala-lang.org/"><span class="kw1">class</span></a> Point<span class="br0">(</span><a href="http://scala-lang.org/"><span class="kw1">val</span></a> x<span class="sy0">:</span> Double, <a href="http://scala-lang.org/"><span class="kw1">val</span></a> y<span class="sy0">:</span> Double<span class="br0">)</span><br>&nbsp;<br>data <a href="http://scala-lang.org/"><span class="kw1">class</span></a> Edge<span class="br0">(</span><a href="http://scala-lang.org/"><span class="kw1">val</span></a> s<span class="sy0">:</span> Point, <a href="http://scala-lang.org/"><span class="kw1">val</span></a> e<span class="sy0">:</span> Point<span class="br0">)</span> <span class="br0">{</span><br>    operator fun invoke<span class="br0">(</span>p<span class="sy0">:</span> Point<span class="br0">)</span> <span class="sy0">:</span> Boolean <span class="sy0">=</span> when <span class="br0">{</span><br>        s.<span class="me1">y</span> <span class="sy0">&gt;</span> e.<span class="me1">y</span> -<span class="sy0">&gt;</span> Edge<span class="br0">(</span>e, s<span class="br0">)</span>.<span class="me1">invoke</span><span class="br0">(</span>p<span class="br0">)</span><br>        p.<span class="me1">y</span> <span class="sy0">==</span> s.<span class="me1">y</span> || p.<span class="me1">y</span> <span class="sy0">==</span> e.<span class="me1">y</span> -<span class="sy0">&gt;</span> invoke<span class="br0">(</span>Point<span class="br0">(</span>p.<span class="me1">x</span>, p.<span class="me1">y</span> + epsilon<span class="br0">)</span><span class="br0">)</span><br>        p.<span class="me1">y</span> <span class="sy0">&gt;</span> e.<span class="me1">y</span> || p.<span class="me1">y</span> <span class="sy0">&lt;</span> s.<span class="me1">y</span> || p.<span class="me1">x</span> <span class="sy0">&gt;</span> Math.<span class="me1">max</span><span class="br0">(</span>s.<span class="me1">x</span>, e.<span class="me1">x</span><span class="br0">)</span> -<span class="sy0">&gt;</span> <a href="http://scala-lang.org/"><span class="kw1">false</span></a><br>        p.<span class="me1">x</span> <span class="sy0">&lt;</span> Math.<span class="me1">min</span><span class="br0">(</span>s.<span class="me1">x</span>, e.<span class="me1">x</span><span class="br0">)</span> -<span class="sy0">&gt;</span> <a href="http://scala-lang.org/"><span class="kw1">true</span></a><br>        <a href="http://scala-lang.org/"><span class="kw1">else</span></a> -<span class="sy0">&gt;</span> <span class="br0">{</span><br>            <a href="http://scala-lang.org/"><span class="kw1">val</span></a> blue <span class="sy0">=</span> <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>abs<span class="br0">(</span>s.<span class="me1">x</span> - p.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> MIN<span class="sy0">_</span>VALUE<span class="br0">)</span> <span class="br0">(</span>p.<span class="me1">y</span> - s.<span class="me1">y</span><span class="br0">)</span> / <span class="br0">(</span>p.<span class="me1">x</span> - s.<span class="me1">x</span><span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">else</span></a> MAX<span class="sy0">_</span>VALUE<br>            <a href="http://scala-lang.org/"><span class="kw1">val</span></a> red <span class="sy0">=</span> <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>abs<span class="br0">(</span>s.<span class="me1">x</span> - e.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> MIN<span class="sy0">_</span>VALUE<span class="br0">)</span> <span class="br0">(</span>e.<span class="me1">y</span> - s.<span class="me1">y</span><span class="br0">)</span> / <span class="br0">(</span>e.<span class="me1">x</span> - s.<span class="me1">x</span><span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">else</span></a> MAX<span class="sy0">_</span>VALUE<br>            blue <span class="sy0">&gt;=</span> red<br>        <span class="br0">}</span><br>    <span class="br0">}</span><br>&nbsp;<br>    <a href="http://scala-lang.org/"><span class="kw1">val</span></a> epsilon <span class="sy0">=</span> <span class="nu0">0.00001</span><br><span class="br0">}</span><br>&nbsp;<br><a href="http://scala-lang.org/"><span class="kw1">class</span></a> Figure<span class="br0">(</span><a href="http://scala-lang.org/"><span class="kw1">val</span></a> name<span class="sy0">:</span> String, <a href="http://scala-lang.org/"><span class="kw1">val</span></a> edges<span class="sy0">:</span> Array<span class="sy0">&lt;</span>Edge<span class="sy0">&gt;</span><span class="br0">)</span> <span class="br0">{</span><br>    operator fun contains<span class="br0">(</span>p<span class="sy0">:</span> Point<span class="br0">)</span> <span class="sy0">=</span> edges.<span class="me1">count</span><span class="br0">(</span><span class="br0">{</span> it<span class="br0">(</span>p<span class="br0">)</span> <span class="br0">}</span><span class="br0">)</span> <span class="sy0">%</span> <span class="nu0">2</span> <span class="sy0">!=</span> <span class="nu0">0</span><br><span class="br0">}</span><br>&nbsp;<br><a href="http://scala-lang.org/"><span class="kw1">object</span></a> Ray<span class="sy0">_</span>casting <span class="br0">{</span><br>    fun check<span class="br0">(</span>figures <span class="sy0">:</span> Array<span class="sy0">&lt;</span>Figure<span class="sy0">&gt;</span>, points <span class="sy0">:</span> List<span class="sy0">&lt;</span>Point<span class="sy0">&gt;</span><span class="br0">)</span> <span class="br0">{</span><br>        println<span class="br0">(</span><span class="st0">"points: "</span> + points<span class="br0">)</span><br>        figures.<span class="me1">forEach</span> <span class="br0">{</span> f -<span class="sy0">&gt;</span><br>            println<span class="br0">(</span><span class="st0">"figure: "</span> + f.<span class="me1">name</span><span class="br0">)</span><br>            f.<span class="me1">edges</span>.<span class="me1">forEach</span> <span class="br0">{</span> println<span class="br0">(</span><span class="st0">"        "</span> + it<span class="br0">)</span> <span class="br0">}</span><br>            println<span class="br0">(</span><span class="st0">"result: "</span> + <span class="br0">(</span>points.<span class="me1">map</span> <span class="br0">{</span> it in f <span class="br0">}</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="br0">}</span><br>    <span class="br0">}</span><br><span class="br0">}</span></pre>
<pre class="scala highlighted_source">fun main<span class="br0">(</span>args<span class="sy0">:</span> Array<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span><span class="br0">)</span> <span class="br0">{</span><br>    <a href="http://scala-lang.org/"><span class="kw1">val</span></a> figures <span class="sy0">=</span> arrayOf<span class="br0">(</span>Figure<span class="br0">(</span><span class="st0">"Square"</span>, arrayOf<span class="br0">(</span>Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>            Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<br>    Figure<span class="br0">(</span><span class="st0">"Square hole"</span>, arrayOf<span class="br0">(</span>Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>            Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span>,<br>            Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">2.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>,Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<br>    Figure<span class="br0">(</span><span class="st0">"Strange"</span>, arrayOf<span class="br0">(</span>Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>            Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>            Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<br>    Figure<span class="br0">(</span><span class="st0">"Exagon"</span>, arrayOf<span class="br0">(</span>Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>            Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span>, Edge<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>    <a href="http://scala-lang.org/"><span class="kw1">val</span></a> points <span class="sy0">=</span> listOf<span class="br0">(</span>Point<span class="br0">(</span><span class="nu0">5.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">5.0</span>, <span class="nu0">8.0</span><span class="br0">)</span>, Point<span class="br0">(</span>-<span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>,<br>            Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">8.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, Point<span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>    Ray<span class="sy0">_</span>casting.<span class="me1">check</span><span class="br0">(</span>figures, points<span class="br0">)</span><br><span class="br0">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>points: [Point(x=5.0, y=5.0), Point(x=5.0, y=8.0), Point(x=-10.0, y=5.0), Point(x=0.0, y=5.0), Point(x=10.0, y=5.0), Point(x=8.0, y=5.0), Point(x=10.0, y=10.0)]
figure: Square
        Edge(s=Point(x=0.0, y=0.0), e=Point(x=10.0, y=0.0))
        Edge(s=Point(x=10.0, y=0.0), e=Point(x=10.0, y=10.0))
        Edge(s=Point(x=10.0, y=10.0), e=Point(x=0.0, y=10.0))
        Edge(s=Point(x=0.0, y=10.0), e=Point(x=0.0, y=0.0))
result: [true, true, false, false, true, true, false]
figure: Square hole
        Edge(s=Point(x=0.0, y=0.0), e=Point(x=10.0, y=0.0))
        Edge(s=Point(x=10.0, y=0.0), e=Point(x=10.0, y=10.0))
        Edge(s=Point(x=10.0, y=10.0), e=Point(x=0.0, y=10.0))
        Edge(s=Point(x=0.0, y=10.0), e=Point(x=0.0, y=0.0))
        Edge(s=Point(x=2.5, y=2.5), e=Point(x=7.5, y=2.5))
        Edge(s=Point(x=7.5, y=2.5), e=Point(x=7.5, y=7.5))
        Edge(s=Point(x=7.5, y=7.5), e=Point(x=2.5, y=7.5))
        Edge(s=Point(x=2.5, y=7.5), e=Point(x=2.5, y=2.5))
result: [false, true, false, false, true, true, false]
figure: Strange
        Edge(s=Point(x=0.0, y=0.0), e=Point(x=2.5, y=2.5))
        Edge(s=Point(x=2.5, y=2.5), e=Point(x=0.0, y=10.0))
        Edge(s=Point(x=0.0, y=10.0), e=Point(x=2.5, y=7.5))
        Edge(s=Point(x=2.5, y=7.5), e=Point(x=7.5, y=7.5))
        Edge(s=Point(x=7.5, y=7.5), e=Point(x=10.0, y=10.0))
        Edge(s=Point(x=10.0, y=10.0), e=Point(x=10.0, y=0.0))
        Edge(s=Point(x=10.0, y=0.0), e=Point(x=2.5, y=2.5))
result: [true, false, false, false, true, true, false]
figure: Exagon
        Edge(s=Point(x=3.0, y=0.0), e=Point(x=7.0, y=0.0))
        Edge(s=Point(x=7.0, y=0.0), e=Point(x=10.0, y=5.0))
        Edge(s=Point(x=10.0, y=5.0), e=Point(x=7.0, y=10.0))
        Edge(s=Point(x=7.0, y=10.0), e=Point(x=3.0, y=10.0))
        Edge(s=Point(x=3.0, y=10.0), e=Point(x=0.0, y=5.0))
        Edge(s=Point(x=0.0, y=5.0), e=Point(x=3.0, y=0.0))
result: [true, true, false, false, true, true, false]
</pre>
<h2><span class="mw-headline" id="Liberty_BASIC"><a href="https://rosettacode.org/wiki/Category:Liberty_BASIC" title="Category:Liberty BASIC">Liberty BASIC</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=19" title="Edit section: Liberty BASIC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Translated from C code at: <a rel="nofollow" class="external free" href="http://alienryderflex.com/polygon/">http://alienryderflex.com/polygon/</a>
</p><p>Displays interactively on-screen.
</p>
<pre class="lb highlighted_source"><span class="kw1">NoMainWin</span><br><span class="kw1">Global</span> sw<span class="sy0">,</span> sh<span class="sy0">,</span> verts<br>&nbsp;<br>sw <span class="sy0">=</span> <span class="nu0">640</span> <span class="sy0">:</span>   sh <span class="sy0">=</span> <span class="nu0">480</span><br><span class="kw3">WindowWidth</span>  <span class="sy0">=</span> sw<span class="sy0">+</span><span class="nu0">8</span> <span class="sy0">:</span> <span class="kw3">WindowHeight</span> <span class="sy0">=</span> sh<span class="sy0">+</span><span class="nu0">31</span><br><span class="kw3">UpperLeftX</span> <span class="sy0">=</span> <span class="br0">(</span><span class="kw3">DisplayWidth</span> <span class="sy0">-</span>sw<span class="br0">)</span><span class="sy0">/</span><span class="nu0">2</span><br><span class="kw3">UpperLeftY</span> <span class="sy0">=</span> <span class="br0">(</span>DisplayHeight<span class="sy0">-</span>sh<span class="br0">)</span><span class="sy0">/</span><span class="nu0">2</span><br><span class="kw1">Open</span><span class="st0">"Ray Casting Algorithm"</span> <span class="kw1">For</span> Graphics_nf_nsb <span class="kw1">As</span> <span class="sy0">#</span>g<br><span class="sy0">#</span>g <span class="st0">"Down; TrapClose [halt]"</span><br>h$ <span class="sy0">=</span> <span class="st0">"#g"</span><br>&nbsp;<br><span class="kw1">Dim</span> xp<span class="br0">(</span><span class="nu0">15</span><span class="br0">)</span><span class="sy0">,</span>yp<span class="br0">(</span><span class="nu0">15</span><span class="br0">)</span><br><span class="sy0">#</span>g <span class="st0">"when leftButtonDown [halt];when mouseMove checkPoint"</span><br><span class="sy0">#</span>g <span class="st0">"when rightButtonDown [Repeat]"</span><br>&nbsp;<br><span class="br0">[</span>Repeat<span class="br0">]</span><br>    <span class="sy0">#</span>g <span class="st0">"Cls;Fill 32 160 255; Color white;BackColor 32 160 255"</span><br>    <span class="sy0">#</span>g <span class="st0">"Place 5 460;\L-click to exit"</span><br>    <span class="sy0">#</span>g <span class="st0">"Place 485 460;\R-click for new polygon"</span><br>&nbsp;<br>    <span class="co1">'generate polygon from random points</span><br>    numPoints <span class="sy0">=</span>  rand<span class="br0">(</span><span class="nu0">4</span><span class="sy0">,</span><span class="nu0">15</span><span class="br0">)</span><br>    verts <span class="sy0">=</span> numPoints<br>    <span class="kw1">For</span> i <span class="sy0">=</span> <span class="nu0">0</span> <span class="kw1">To</span> numPoints<span class="sy0">-</span><span class="nu0">1</span><br>        xp<span class="br0">(</span>i<span class="br0">)</span> <span class="sy0">=</span> rand<span class="br0">(</span><span class="nu0">20</span><span class="sy0">,</span><span class="nu0">620</span><span class="br0">)</span><br>        yp<span class="br0">(</span>i<span class="br0">)</span> <span class="sy0">=</span> rand<span class="br0">(</span><span class="nu0">40</span><span class="sy0">,</span><span class="nu0">420</span><span class="br0">)</span><br>    <span class="kw1">Next</span><br>    <span class="kw1">Call</span> drawPoly h$<span class="sy0">,</span> verts<span class="sy0">,</span> <span class="st0">"white"</span><br>    <span class="sy0">#</span>g <span class="st0">"Flush"</span><br>    <span class="kw1">Wait</span><br>&nbsp;<br><span class="br0">[</span>halt<span class="br0">]</span><br><span class="kw1">Close</span> <span class="sy0">#</span>g<br><span class="kw1">End</span><br>&nbsp;<br><span class="co1">'Point In Polygon Function</span><br><span class="kw1">Function</span> pnp<span class="br0">(</span>x<span class="sy0">,</span> y<span class="sy0">,</span> numSides<span class="br0">)</span><br>    j<span class="sy0">=</span> numSides<span class="sy0">-</span><span class="nu0">1</span><span class="sy0">:</span> oddNodes <span class="sy0">=</span> <span class="nu0">0</span><br>    <span class="kw1">For</span> i <span class="sy0">=</span> <span class="nu0">0</span> <span class="kw1">To</span> numSides<span class="sy0">-</span><span class="nu0">1</span><br>        <span class="kw1">If</span> <span class="br0">(</span><span class="br0">(</span>yp<span class="br0">(</span>i<span class="br0">)</span><span class="sy0">&lt;</span>y<span class="br0">)</span> <span class="kw1">And</span> <span class="br0">(</span>yp<span class="br0">(</span>j<span class="br0">)</span><span class="sy0">&gt;=</span>y<span class="br0">)</span><span class="br0">)</span> <span class="kw1">Or</span> <span class="br0">(</span><span class="br0">(</span>yp<span class="br0">(</span>j<span class="br0">)</span><span class="sy0">&lt;</span>y<span class="br0">)</span> <span class="kw1">And</span> <span class="br0">(</span>yp<span class="br0">(</span>i<span class="br0">)</span><span class="sy0">&gt;=</span>y<span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span><br>            f1 <span class="sy0">=</span> y <span class="sy0">-</span> yp<span class="br0">(</span>i<span class="br0">)</span><span class="sy0">:</span>f2 <span class="sy0">=</span> yp<span class="br0">(</span>j<span class="br0">)</span> <span class="sy0">-</span> yp<span class="br0">(</span>i<span class="br0">)</span><span class="sy0">:</span> f3 <span class="sy0">=</span> xp<span class="br0">(</span>j<span class="br0">)</span> <span class="sy0">-</span> xp<span class="br0">(</span>i<span class="br0">)</span><br>            <span class="kw1">If</span> <span class="br0">(</span>xp<span class="br0">(</span>i<span class="br0">)</span> <span class="sy0">+</span> f1 <span class="sy0">/</span> f2 <span class="sy0">*</span> f3<span class="br0">)</span> <span class="sy0">&lt;</span> x <span class="kw1">Then</span> oddNodes <span class="sy0">=</span> <span class="nu0">1</span> <span class="sy0">-</span> oddNodes<br>        <span class="kw1">End</span> <span class="kw1">If</span><br>        j <span class="sy0">=</span> i<br>    <span class="kw1">Next</span><br>    pnp <span class="sy0">=</span> oddNodes<br><span class="kw1">End</span> <span class="kw1">Function</span><br>&nbsp;<br><span class="co1">'draw the polygon</span><br><span class="kw1">Sub</span> drawPoly h$<span class="sy0">,</span> verts<span class="sy0">,</span> colour$<br>    <span class="sy0">#</span>h$<span class="sy0">,</span> <span class="st0">"Color "</span>;colour$<br>    j <span class="sy0">=</span> verts<span class="sy0">-</span><span class="nu0">1</span><br>    <span class="kw1">For</span> i <span class="sy0">=</span> <span class="nu0">0</span> <span class="kw1">To</span> verts<span class="sy0">-</span><span class="nu0">1</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Line "</span>;xp<span class="br0">(</span>j<span class="br0">)</span>;<span class="st0">" "</span>;yp<span class="br0">(</span>j<span class="br0">)</span>;<span class="st0">" "</span>;xp<span class="br0">(</span>i<span class="br0">)</span>;<span class="st0">" "</span>;yp<span class="br0">(</span>i<span class="br0">)</span><br>        j <span class="sy0">=</span> i<br>    <span class="kw1">Next</span><br><span class="kw1">End</span> <span class="kw1">Sub</span><br>&nbsp;<br><span class="co1">'change message and color of polygon</span><br><span class="kw1">Sub</span> checkPoint h$<span class="sy0">,</span> x<span class="sy0">,</span> y<br>    <span class="kw1">If</span> pnp<span class="br0">(</span>x<span class="sy0">,</span>y<span class="sy0">,</span>verts<span class="br0">)</span> <span class="kw1">Then</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Color 32 160 255;BackColor 32 160 255"</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Place 5 0;BoxFilled 150 20;Color white"</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Place 7 15;\Mouse In Polygon"</span><br>        <span class="kw1">Call</span> drawPoly h$<span class="sy0">,</span> verts<span class="sy0">,</span> <span class="st0">"red"</span><br>    <span class="kw1">Else</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Color 32 160 255;BackColor 32 160 255"</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Place 5 0;BoxFilled 150 20;Color white"</span><br>        <span class="sy0">#</span>h$ <span class="st0">"Place 7 15;\Mouse Not In Polygon"</span><br>        <span class="kw1">Call</span> drawPoly h$<span class="sy0">,</span> verts<span class="sy0">,</span> <span class="st0">"white"</span><br>    <span class="kw1">End</span> <span class="kw1">If</span><br><span class="kw1">End</span> <span class="kw1">Sub</span><br>&nbsp;<br><span class="kw1">Function</span> rand<span class="br0">(</span>loNum<span class="sy0">,</span>hiNum<span class="br0">)</span><br>    rand <span class="sy0">=</span> <span class="kw2">Int</span><span class="br0">(</span><span class="kw2">Rnd</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">*</span><span class="br0">(</span>hiNum<span class="sy0">-</span>loNum<span class="sy0">+</span><span class="nu0">1</span><span class="br0">)</span><span class="sy0">+</span>loNum<span class="br0">)</span><br><span class="kw1">End</span> <span class="kw1">Function</span> </pre>
<h2><span class="mw-headline" id="OCaml"><a href="https://rosettacode.org/wiki/Category:OCaml" title="Category:OCaml">OCaml</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=20" title="Edit section: OCaml">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#C">C</a></div>
<pre class="ocaml highlighted_source"><span class="kw1">type</span> point <span class="sy0">=</span> <span class="br0">{</span> x<span class="sy0">:</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALfloat"><span class="kw3">float</span></a><span class="sy0">;</span> y<span class="sy0">:</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALfloat"><span class="kw3">float</span></a> <span class="br0">}</span><br>&nbsp;<br><span class="kw1">type</span> polygon <span class="sy0">=</span> <span class="br0">{</span><br>  vertices<span class="sy0">:</span> point <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#TYPEarray"><span class="kw4">array</span></a><span class="sy0">;</span><br>  edges<span class="sy0">:</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#TYPEint"><span class="kw4">int</span></a> <span class="sy0">*</span> <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#TYPEint"><span class="kw4">int</span></a><span class="br0">)</span> <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#TYPElist"><span class="kw4">list</span></a><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">let</span> p x y <span class="sy0">=</span> <span class="br0">{</span> x<span class="sy0">=</span>x<span class="sy0">;</span> y<span class="sy0">=</span>y <span class="br0">}</span><br>&nbsp;<br><span class="kw1">let</span> square_v <span class="sy0">=</span> <span class="br0">[</span><span class="sy0">|</span><br>  <span class="br0">(</span>p <span class="nu0">0</span><span class="sy0">.</span> <span class="nu0">0</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">10</span><span class="sy0">.</span> <span class="nu0">0</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">10</span><span class="sy0">.</span> <span class="nu0">10</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">0</span><span class="sy0">.</span> <span class="nu0">10</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span><br>  <span class="br0">(</span>p <span class="nu0">2.5</span> <span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">7.5</span> <span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">2.5</span> <span class="nu0">7.5</span><span class="br0">)</span><br><span class="sy0">|</span><span class="br0">]</span><br>&nbsp;<br><span class="kw1">let</span> esa_v <span class="sy0">=</span> <span class="br0">[</span><span class="sy0">|</span><br>  <span class="br0">(</span>p <span class="nu0">3</span><span class="sy0">.</span> <span class="nu0">0</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">7</span><span class="sy0">.</span> <span class="nu0">0</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">10</span><span class="sy0">.</span> <span class="nu0">5</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">7</span><span class="sy0">.</span> <span class="nu0">10</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">3</span><span class="sy0">.</span> <span class="nu0">10</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">0</span><span class="sy0">.</span> <span class="nu0">5</span><span class="sy0">.</span><span class="br0">)</span><br><span class="sy0">|</span><span class="br0">]</span><br>&nbsp;<br><span class="kw1">let</span> esa <span class="sy0">=</span> <span class="br0">{</span><br>  vertices <span class="sy0">=</span> esa_v<span class="sy0">;</span><br>  edges <span class="sy0">=</span> <span class="br0">[</span> <span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">1</span>,<span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">2</span>,<span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">4</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">0</span><span class="br0">)</span> <span class="br0">]</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">let</span> square <span class="sy0">=</span> <span class="br0">{</span><br>  vertices <span class="sy0">=</span> square_v<span class="sy0">;</span><br>  edges <span class="sy0">=</span> <span class="br0">[</span> <span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">1</span>,<span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">2</span>,<span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">0</span><span class="br0">)</span> <span class="br0">]</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">let</span> squarehole <span class="sy0">=</span> <span class="br0">{</span><br>  vertices <span class="sy0">=</span> square_v<span class="sy0">;</span><br>  edges <span class="sy0">=</span> <span class="br0">[</span> <span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">1</span>,<span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">2</span>,<span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">6</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">6</span>,<span class="nu0">7</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">7</span>,<span class="nu0">4</span><span class="br0">)</span> <span class="br0">]</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">let</span> strange <span class="sy0">=</span> <span class="br0">{</span><br>  vertices <span class="sy0">=</span> square_v<span class="sy0">;</span><br>  edges <span class="sy0">=</span> <span class="br0">[</span> <span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">4</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">4</span>,<span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">3</span>,<span class="nu0">7</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">7</span>,<span class="nu0">6</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">6</span>,<span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">2</span>,<span class="nu0">1</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">1</span>,<span class="nu0">5</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">0</span><span class="br0">)</span> <span class="br0">]</span><br><span class="br0">}</span><br>&nbsp;<br>&nbsp;<br><span class="kw1">let</span> min_y <span class="re1">~a</span> <span class="re1">~b</span> <span class="sy0">=</span> <span class="kw1">if</span> a<span class="sy0">.</span>y <span class="sy0">&gt;</span> b<span class="sy0">.</span>y <span class="kw1">then</span> <span class="br0">(</span>b<span class="br0">)</span> <span class="kw1">else</span> <span class="br0">(</span>a<span class="br0">)</span><br>&nbsp;<br><span class="kw1">let</span> coeff_ang <span class="re1">~pa</span> <span class="re1">~pb</span> <span class="sy0">=</span> <span class="br0">(</span>pb<span class="sy0">.</span>y <span class="sy0">-.</span> pa<span class="sy0">.</span>y<span class="br0">)</span> <span class="sy0">/.</span> <span class="br0">(</span>pb<span class="sy0">.</span>x <span class="sy0">-.</span> pa<span class="sy0">.</span>x<span class="br0">)</span><br>&nbsp;<br><span class="kw1">let</span> huge_val <span class="sy0">=</span> <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALinfinity"><span class="kw3">infinity</span></a><br>&nbsp;<br><span class="kw1">let</span> hseg_intersect_seg <span class="re1">~s</span> <span class="re1">~a</span> <span class="re1">~b</span> <span class="sy0">=</span><br>  <span class="kw1">let</span> _eps <span class="sy0">=</span><br>    <span class="kw1">if</span> s<span class="sy0">.</span>y <span class="sy0">=</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmax"><span class="kw3">max</span></a> a<span class="sy0">.</span>y b<span class="sy0">.</span>y<span class="br0">)</span> <span class="sy0">||</span><br>       s<span class="sy0">.</span>y <span class="sy0">=</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmin"><span class="kw3">min</span></a> a<span class="sy0">.</span>y b<span class="sy0">.</span>y<span class="br0">)</span> <span class="kw1">then</span> <span class="nu0">0.00001</span> <span class="kw1">else</span> <span class="nu0">0.0</span><br>  <span class="kw1">in</span><br>  <span class="kw1">if</span>  <span class="br0">(</span>s<span class="sy0">.</span>y <span class="sy0">+.</span> _eps<span class="br0">)</span> <span class="sy0">&gt;</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmax"><span class="kw3">max</span></a> a<span class="sy0">.</span>y b<span class="sy0">.</span>y<span class="br0">)</span> <span class="sy0">||</span><br>      <span class="br0">(</span>s<span class="sy0">.</span>y <span class="sy0">+.</span> _eps<span class="br0">)</span> <span class="sy0">&lt;</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmin"><span class="kw3">min</span></a> a<span class="sy0">.</span>y b<span class="sy0">.</span>y<span class="br0">)</span> <span class="sy0">||</span><br>       s<span class="sy0">.</span>x <span class="sy0">&gt;</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmax"><span class="kw3">max</span></a> a<span class="sy0">.</span>x b<span class="sy0">.</span>x<span class="br0">)</span> <span class="kw1">then</span> <span class="br0">(</span><span class="kw1">false</span><span class="br0">)</span><br>  <span class="kw1">else</span> <span class="kw1">if</span> s<span class="sy0">.</span>x <span class="sy0">&lt;=</span> <span class="br0">(</span><a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALmin"><span class="kw3">min</span></a> a<span class="sy0">.</span>x b<span class="sy0">.</span>x<span class="br0">)</span> <span class="kw1">then</span> <span class="br0">(</span><span class="kw1">true</span><span class="br0">)</span><br>  <span class="kw1">else</span><br>    <span class="kw1">let</span> ca <span class="sy0">=</span> <span class="kw1">if</span> a<span class="sy0">.</span>x <span class="sy0">&lt;&gt;</span> b<span class="sy0">.</span>x <span class="kw1">then</span> <span class="br0">(</span>coeff_ang a b<span class="br0">)</span> <span class="kw1">else</span> <span class="br0">(</span>huge_val<span class="br0">)</span> <span class="kw1">in</span><br>    <span class="kw1">let</span> my <span class="sy0">=</span> min_y <span class="re1">~a</span> <span class="re1">~b</span> <span class="kw1">in</span><br>    <span class="kw1">let</span> cp <span class="sy0">=</span> <span class="kw1">if</span> <span class="br0">(</span>s<span class="sy0">.</span>x <span class="sy0">-.</span> my<span class="sy0">.</span>x<span class="br0">)</span> <span class="sy0">&lt;&gt;</span> <span class="nu0">0.0</span> <span class="kw1">then</span> <span class="br0">(</span>coeff_ang my s<span class="br0">)</span> <span class="kw1">else</span> <span class="br0">(</span>huge_val<span class="br0">)</span> <span class="kw1">in</span><br>    <span class="br0">(</span>cp <span class="sy0">&gt;=</span> ca<span class="br0">)</span><br><span class="sy0">;;</span><br>&nbsp;<br>&nbsp;<br><span class="kw1">let</span> point_is_inside <span class="re1">~poly</span> <span class="re1">~pt</span> <span class="sy0">=</span><br>  <span class="kw1">let</span> cross <span class="sy0">=</span> <span class="kw1">ref</span> <span class="nu0">0</span> <span class="kw1">in</span><br>  <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html"><span class="kw2">List</span></a><span class="sy0">.</span>iter <span class="br0">(</span><span class="kw1">fun</span> <span class="br0">(</span>a,b<span class="br0">)</span> <span class="sy0">-&gt;</span><br>    <span class="kw1">if</span> hseg_intersect_seg pt<br>             poly<span class="sy0">.</span>vertices<span class="sy0">.</span><span class="br0">(</span>a<span class="br0">)</span><br>             poly<span class="sy0">.</span>vertices<span class="sy0">.</span><span class="br0">(</span>b<span class="br0">)</span><br>    <span class="kw1">then</span> <span class="kw1">incr</span> cross<br>  <span class="br0">)</span> poly<span class="sy0">.</span>edges<span class="sy0">;</span><br>  <span class="br0">(</span> <span class="br0">(</span><span class="sy0">!</span>cross <span class="kw1">mod</span> <span class="nu0">2</span><span class="br0">)</span> <span class="sy0">&lt;&gt;</span> <span class="nu0">0</span><span class="br0">)</span><br><span class="sy0">;;</span><br>&nbsp;<br>&nbsp;<br><span class="kw1">let</span> make_test p label s <span class="sy0">=</span><br>  <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html"><span class="kw2">Printf</span></a><span class="sy0">.</span>printf <span class="st0">"point (%.5f,%.5f) is "</span> p<span class="sy0">.</span>x p<span class="sy0">.</span>y<span class="sy0">;</span><br>  <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALprint_string"><span class="kw3">print_string</span></a> <span class="br0">(</span><span class="kw1">if</span> point_is_inside s p<br>                <span class="kw1">then</span> <span class="st0">"INSIDE "</span><br>                <span class="kw1">else</span> <span class="st0">"OUTSIDE "</span><span class="br0">)</span><span class="sy0">;</span><br>  <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALprint_endline"><span class="kw3">print_endline</span></a> label<span class="sy0">;</span><br><span class="sy0">;;</span><br>&nbsp;<br>&nbsp;<br><span class="kw1">let</span> <span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span><br>  <span class="kw1">let</span> test_points <span class="sy0">=</span> <span class="br0">[</span><br>    <span class="br0">(</span>p <span class="nu0">5</span><span class="sy0">.</span> <span class="nu0">5</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">5</span><span class="sy0">.</span> <span class="nu0">8</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">2</span><span class="sy0">.</span> <span class="nu0">2</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">0</span><span class="sy0">.</span> <span class="nu0">0</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">(</span>p <span class="nu0">10</span><span class="sy0">.</span> <span class="nu0">10</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">2.5</span> <span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">0.01</span> <span class="nu0">5</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">(</span>p <span class="nu0">2.2</span> <span class="nu0">7.4</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">0</span><span class="sy0">.</span> <span class="nu0">5</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="nu0">10</span><span class="sy0">.</span> <span class="nu0">5</span><span class="sy0">.</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">(</span>p <span class="br0">(</span><span class="sy0">-</span><span class="nu0">4</span><span class="sy0">.</span><span class="br0">)</span> <span class="nu0">10</span><span class="sy0">.</span><span class="br0">)</span> <span class="br0">]</span> <span class="kw1">in</span><br>&nbsp;<br>  <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html"><span class="kw2">List</span></a><span class="sy0">.</span>iter <span class="br0">(</span><span class="kw1">fun</span> p <span class="sy0">-&gt;</span><br>    make_test p <span class="st0">"square"</span>     square<span class="sy0">;</span><br>    make_test p <span class="st0">"squarehole"</span> squarehole<span class="sy0">;</span><br>    make_test p <span class="st0">"strange"</span>    strange<span class="sy0">;</span><br>    make_test p <span class="st0">"esa"</span>        esa<span class="sy0">;</span><br>    <a href="http://caml.inria.fr/pub/docs/manual-ocaml/libref/Pervasives.html#VALprint_newline"><span class="kw3">print_newline</span></a><span class="br0">(</span><span class="br0">)</span><br>  <span class="br0">)</span> test_points<span class="sy0">;</span><br><span class="sy0">;;</span></pre>
<h2><span class="mw-headline" id="Perl"><a href="https://rosettacode.org/wiki/Category:Perl" title="Category:Perl">Perl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=21" title="Edit section: Perl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="perl highlighted_source"><span class="kw2">use</span> strict<span class="sy0">;</span><br><span class="kw2">use</span> List<span class="sy0">::</span><span class="me2">Util</span> <a href="http://perldoc.perl.org/functions/qw.html"><span class="kw3">qw</span></a><span class="br0">(</span>max min<span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw2">sub</span> point_in_polygon<br><span class="br0">{</span><br>    <span class="kw1">my</span> <span class="br0">(</span> <span class="re0">$point</span><span class="sy0">,</span> <span class="re0">$polygon</span> <span class="br0">)</span> <span class="sy0">=</span> <span class="co5">@_</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">my</span> <span class="re0">$count</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span><br>    <span class="kw1">foreach</span> <span class="kw1">my</span> <span class="re0">$side</span> <span class="br0">(</span> <span class="re0">@$polygon</span> <span class="br0">)</span> <span class="br0">{</span><br>	<span class="re0">$count</span><span class="sy0">++</span> <span class="kw1">if</span> ray_intersect_segment<span class="br0">(</span><span class="re0">$point</span><span class="sy0">,</span> <span class="re0">$side</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><br>    <a href="http://perldoc.perl.org/functions/return.html"><span class="kw3">return</span></a> <span class="br0">(</span><span class="re0">$count</span> <span class="sy0">%</span> <span class="nu0">2</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> <span class="sy0">?</span> <span class="nu0">0</span> <span class="sy0">:</span> <span class="nu0">1</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br>&nbsp;<br><span class="kw1">my</span> <span class="re0">$eps</span> <span class="sy0">=</span> <span class="nu0">0.0001</span><span class="sy0">;</span><br><span class="kw1">my</span> <span class="re0">$inf</span> <span class="sy0">=</span> 1e600<span class="sy0">;</span><br>&nbsp;<br><span class="kw2">sub</span> ray_intersect_segment<br><span class="br0">{</span><br>    <span class="kw1">my</span> <span class="br0">(</span><span class="re0">$point</span><span class="sy0">,</span> <span class="re0">$segment</span><span class="br0">)</span> <span class="sy0">=</span> <span class="co5">@_</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">my</span> <span class="br0">(</span><span class="re0">$A</span><span class="sy0">,</span> <span class="re0">$B</span><span class="br0">)</span> <span class="sy0">=</span> <span class="re0">@$segment</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">my</span> <span class="re0">@P</span> <span class="sy0">=</span> <span class="re0">@$point</span><span class="sy0">;</span> <span class="co1"># copy it</span><br>&nbsp;<br>    <span class="br0">(</span><span class="re0">$A</span><span class="sy0">,</span> <span class="re0">$B</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">(</span><span class="re0">$B</span><span class="sy0">,</span> <span class="re0">$A</span><span class="br0">)</span> <span class="kw1">if</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">&gt;</span> <span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="re0">$P</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">+=</span> <span class="re0">$eps</span> <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$P</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">==</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="re0">$P</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">==</span> <span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>    <a href="http://perldoc.perl.org/functions/return.html"><span class="kw3">return</span></a> <span class="nu0">0</span> <span class="kw1">if</span> <span class="br0">(</span><span class="re0">$P</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">&lt;</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span> <span class="re0">$P</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">&gt;</span> <span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">||</span> <span class="br0">(</span><span class="re0">$P</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">&gt;</span> max<span class="br0">(</span><span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span><span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">)</span><span class="sy0">;</span><br>    <a href="http://perldoc.perl.org/functions/return.html"><span class="kw3">return</span></a> <span class="nu0">1</span> <span class="kw1">if</span> <span class="re0">$P</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">&lt;</span> min<span class="br0">(</span><span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span> <span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">my</span> <span class="re0">$m_red</span> <span class="sy0">=</span> <span class="br0">(</span><span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">!=</span> <span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">?</span> <span class="br0">(</span> <span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">-</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span><span class="re0">$B</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">-</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">:</span> <span class="re0">$inf</span><span class="sy0">;</span><br>    <span class="kw1">my</span> <span class="re0">$m_blue</span> <span class="sy0">=</span> <span class="br0">(</span><span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">!=</span> <span class="re0">$P</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">?</span> <span class="br0">(</span> <span class="re0">$P</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">-</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="br0">)</span><span class="sy0">/</span><span class="br0">(</span><span class="re0">$P</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">-</span> <span class="re0">$A</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="sy0">:</span> <span class="re0">$inf</span><span class="sy0">;</span><br>&nbsp;<br>    <a href="http://perldoc.perl.org/functions/return.html"><span class="kw3">return</span></a> <span class="br0">(</span><span class="re0">$m_blue</span> <span class="sy0">&gt;=</span> <span class="re0">$m_red</span><span class="br0">)</span> <span class="sy0">?</span> <span class="nu0">1</span> <span class="sy0">:</span> <span class="nu0">0</span><span class="sy0">;</span><br><span class="br0">}</span></pre>
<p>Testing:
</p>
<pre class="perl highlighted_source"><span class="co1"># the following are utilities to use the same Fortran data...</span><br><span class="kw2">sub</span> point<br><span class="br0">{</span><br>    <span class="br0">[</span><a href="http://perldoc.perl.org/functions/shift.html"><span class="kw3">shift</span></a><span class="sy0">,</span> <a href="http://perldoc.perl.org/functions/shift.html"><span class="kw3">shift</span></a><span class="br0">]</span><span class="sy0">;</span><br><span class="br0">}</span><br><span class="kw2">sub</span> create_polygon<br><span class="br0">{</span><br>    <span class="kw1">my</span> <span class="br0">(</span><span class="re0">$pts</span><span class="sy0">,</span> <span class="re0">$sides</span><span class="br0">)</span> <span class="sy0">=</span> <span class="co5">@_</span><span class="sy0">;</span><br>    <span class="kw1">my</span> <span class="re0">@poly</span><span class="sy0">;</span><br>    <span class="kw1">for</span><span class="br0">(</span><span class="kw1">my</span> <span class="re0">$i</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">&lt;</span> <span class="co5">$#</span><span class="re0">$sides</span><span class="sy0">;</span> <span class="re0">$i</span> <span class="sy0">+=</span> <span class="nu0">2</span><span class="br0">)</span> <span class="br0">{</span><br>	<a href="http://perldoc.perl.org/functions/push.html"><span class="kw3">push</span></a> <span class="re0">@poly</span><span class="sy0">,</span> <span class="br0">[</span> <span class="re0">$pts</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="re0">$sides</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="re0">$i</span><span class="br0">]</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span> <span class="re0">$pts</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="re0">$sides</span><span class="sy0">-&gt;</span><span class="br0">[</span><span class="re0">$i</span><span class="sy0">+</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">]</span> <span class="br0">]</span><span class="sy0">;</span><br>    <span class="br0">}</span><br>    <span class="re0">\@poly</span><span class="sy0">;</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">my</span> <span class="re0">@pts</span> <span class="sy0">=</span> <span class="br0">(</span> point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> <br>	    point<span class="br0">(</span><span class="nu0">2.5</span><span class="sy0">,</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7.5</span><span class="sy0">,</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7.5</span><span class="sy0">,</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">2.5</span><span class="sy0">,</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> <br>	    point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> <br>	    point<span class="br0">(</span><span class="nu0">3</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">3</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span> <span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">my</span> <span class="re0">%pgs</span> <span class="sy0">=</span> <span class="br0">(</span><br>    squared <span class="sy0">=&gt;</span> create_polygon<span class="br0">(</span><span class="re0">\@pts</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span><span class="nu0">1</span> <span class="br0">]</span> <span class="br0">)</span><span class="sy0">,</span><br>    squaredhole <span class="sy0">=&gt;</span> create_polygon<span class="br0">(</span><span class="re0">\@pts</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span><span class="nu0">6</span><span class="sy0">,</span> <span class="nu0">6</span><span class="sy0">,</span><span class="nu0">7</span><span class="sy0">,</span> <span class="nu0">7</span><span class="sy0">,</span><span class="nu0">8</span><span class="sy0">,</span> <span class="nu0">8</span><span class="sy0">,</span><span class="nu0">5</span> <span class="br0">]</span> <span class="br0">)</span><span class="sy0">,</span><br>    strange <span class="sy0">=&gt;</span> create_polygon<span class="br0">(</span><span class="re0">\@pts</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span><span class="nu0">8</span><span class="sy0">,</span> <span class="nu0">8</span><span class="sy0">,</span><span class="nu0">7</span><span class="sy0">,</span> <span class="nu0">7</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span><span class="nu0">5</span> <span class="br0">]</span> <span class="br0">)</span><span class="sy0">,</span><br>    exagon <span class="sy0">=&gt;</span> create_polygon<span class="br0">(</span><span class="re0">\@pts</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">11</span><span class="sy0">,</span><span class="nu0">12</span><span class="sy0">,</span> <span class="nu0">12</span><span class="sy0">,</span><span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">10</span><span class="sy0">,</span><span class="nu0">13</span><span class="sy0">,</span> <span class="nu0">13</span><span class="sy0">,</span><span class="nu0">14</span><span class="sy0">,</span> <span class="nu0">14</span><span class="sy0">,</span><span class="nu0">9</span><span class="sy0">,</span> <span class="nu0">9</span><span class="sy0">,</span><span class="nu0">11</span> <span class="br0">]</span><span class="br0">)</span> <span class="sy0">,</span><br><span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">my</span> <span class="re0">@p</span> <span class="sy0">=</span> <span class="br0">(</span> point<span class="br0">(</span><span class="nu0">5</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">8</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="sy0">-</span><span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> <span class="sy0">&amp;</span><br>	  point<span class="br0">(</span><span class="nu0">8</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span> <span class="br0">)</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">foreach</span> <span class="kw1">my</span> <span class="re0">$pol</span> <span class="br0">(</span> <a href="http://perldoc.perl.org/functions/sort.html"><span class="kw3">sort</span></a> <a href="http://perldoc.perl.org/functions/keys.html"><span class="kw3">keys</span></a> <span class="re0">%pgs</span> <span class="br0">)</span> <span class="br0">{</span><br>    <a href="http://perldoc.perl.org/functions/no.html"><span class="kw3">no</span></a> strict <span class="st_h">'refs'</span><span class="sy0">;</span><br>    <a href="http://perldoc.perl.org/functions/print.html"><span class="kw3">print</span></a> <span class="st0">"$pol<span class="es0">\n</span>"</span><span class="sy0">;</span><br>    <span class="kw1">my</span> <span class="re0">$rp</span> <span class="sy0">=</span> <span class="re0">$pgs</span><span class="br0">{</span><span class="re0">$pol</span><span class="br0">}</span><span class="sy0">;</span><br>    <span class="kw1">foreach</span> <span class="kw1">my</span> <span class="re0">$tp</span> <span class="br0">(</span> <span class="re0">@p</span> <span class="br0">)</span> <span class="br0">{</span><br>	<a href="http://perldoc.perl.org/functions/print.html"><span class="kw3">print</span></a> <span class="st0">"<span class="es0">\t</span>($tp-&gt;[0],$tp-&gt;[1]) "</span> <span class="sy0">.</span> <br>           <span class="br0">(</span> point_in_polygon<span class="br0">(</span><span class="re0">$tp</span><span class="sy0">,</span> <span class="re0">$rp</span><span class="br0">)</span> <span class="sy0">?</span> <span class="st0">"INSIDE"</span> <span class="sy0">:</span> <span class="st0">"OUTSIDE"</span> <span class="br0">)</span> <span class="sy0">.</span> <span class="st0">"<span class="es0">\n</span>"</span><span class="sy0">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span></pre>
<h2><span class="mw-headline" id="Perl_6"><a href="https://rosettacode.org/wiki/Category:Perl_6" title="Category:Perl 6">Perl 6</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=22" title="Edit section: Perl 6">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="perl6 highlighted_source"><span class="kw1">constant</span> ε <span class="sy0">=</span> <span class="nu0">0.0001</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw2">sub</span> ray<span class="sy0">-</span>hits<span class="sy0">-</span>seg<span class="br0">(</span><span class="br0">[</span>\Px<span class="sy0">,</span>\Py<span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="br0">[</span>\Ax<span class="sy0">,</span>\Ay<span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span>\Bx<span class="sy0">,</span>\By<span class="br0">]</span><span class="br0">]</span> <span class="sy0">--&gt;</span> Bool<span class="br0">)</span> <span class="br0">{</span><br>    Py <span class="sy0">+=</span> ε <span class="kw1">if</span> Py <span class="sy0">==</span> Ay <span class="sy0">|</span> By<span class="sy0">;</span><br>&nbsp;<br>    <span class="kw1">if</span> Py <span class="sy0">&lt;</span> Ay <span class="kw1">or</span> Py <span class="sy0">&gt;</span> By <span class="kw1">or</span> Px <span class="sy0">&gt;</span> <span class="br0">(</span>Ax <span class="kw3">max</span> Bx<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">False</span><span class="sy0">;</span><br>    <span class="br0">}</span><br>    <span class="kw1">elsif</span> Px <span class="sy0">&lt;</span> <span class="br0">(</span>Ax <span class="kw3">min</span> Bx<span class="br0">)</span> <span class="br0">{</span><br>	<span class="kw1">True</span><span class="sy0">;</span><br>    <span class="br0">}</span><br>    <span class="kw1">else</span> <span class="br0">{</span><br>	<span class="kw1">my</span> \red  <span class="sy0">=</span> Ax <span class="sy0">==</span> Bx <span class="sy0">??</span> Inf <span class="sy0">!!</span> <span class="br0">(</span>By <span class="sy0">-</span> Ay<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>Bx <span class="sy0">-</span> Ax<span class="br0">)</span><span class="sy0">;</span><br>	<span class="kw1">my</span> \blue <span class="sy0">=</span> Ax <span class="sy0">==</span> Px <span class="sy0">??</span> Inf <span class="sy0">!!</span> <span class="br0">(</span>Py <span class="sy0">-</span> Ay<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>Px <span class="sy0">-</span> Ax<span class="br0">)</span><span class="sy0">;</span><br>	blue <span class="sy0">&gt;=</span> red<span class="sy0">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw2">sub</span> point<span class="sy0">-</span>in<span class="sy0">-</span>poly<span class="br0">(</span><span class="re0">@point</span><span class="sy0">,</span> <span class="re0">@polygon</span> <span class="sy0">--&gt;</span> Bool<span class="br0">)</span> <span class="br0">{</span><br>    so <span class="nu0">2</span> R<span class="sy0">%</span> <span class="br0">[</span><span class="sy0">+</span><span class="br0">]</span> gather <span class="kw1">for</span> <span class="re0">@polygon</span> <span class="sy0">-&gt;</span> <span class="re0">@side</span> <span class="br0">{</span><br>	take ray<span class="sy0">-</span>hits<span class="sy0">-</span>seg <span class="re0">@point</span><span class="sy0">,</span> <span class="re0">@side</span><span class="sy0">.</span><span class="kw3">sort</span><span class="br0">(</span><span class="sy0">*.</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">my</span> <span class="re0">%poly</span> <span class="sy0">=</span><br>    squared <span class="sy0">=&gt;</span> <br>	 <span class="br0">[</span><span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>    squaredhole <span class="sy0">=&gt;</span><br>	 <span class="br0">[</span><span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">7.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">7.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">7.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">7.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>    strange <span class="sy0">=&gt;</span><br>	 <span class="br0">[</span><span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">7.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">7.5</span><span class="sy0">,</span>  <span class="nu0">7.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">2.5</span><span class="sy0">,</span>  <span class="nu0">2.5</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span>  <span class="co1"># conjecturally close polygon</span><br>    exagon <span class="sy0">=&gt;</span><br>	 <span class="br0">[</span><span class="br0">[</span><span class="br0">[</span> <span class="nu0">3.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">7.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">7.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">7.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">7.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">3.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">3.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="br0">[</span> <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span> <span class="br0">[</span> <span class="nu0">3.0</span><span class="sy0">,</span>  <span class="nu0">0.0</span><span class="br0">]</span><span class="br0">]</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">my</span> <span class="re0">@test</span><span class="sy0">-</span>points <span class="sy0">=</span><br>	  <span class="br0">[</span>  <span class="nu0">5.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span>  <span class="nu0">5.0</span><span class="sy0">,</span>  <span class="nu0">8.0</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span><span class="sy0">-</span><span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span>  <span class="nu0">0.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span> <span class="nu0">10.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span>  <span class="nu0">8.0</span><span class="sy0">,</span>  <span class="nu0">5.0</span><span class="br0">]</span><span class="sy0">,</span><br>	  <span class="br0">[</span> <span class="nu0">10.0</span><span class="sy0">,</span> <span class="nu0">10.0</span><span class="br0">]</span><span class="sy0">;</span><br>&nbsp;<br><span class="kw1">for</span> <span class="sy0">&lt;</span>squared squaredhole strange exagon<span class="sy0">&gt;</span> <span class="sy0">-&gt;</span> <span class="re0">$polywanna</span> <span class="br0">{</span><br>    <span class="kw3">say</span> <span class="st0">"$polywanna"</span><span class="sy0">;</span><br>    <span class="kw1">my</span> <span class="re0">@poly</span> <span class="sy0">=</span> <span class="re0">%poly</span><span class="br0">{</span><span class="re0">$polywanna</span><span class="br0">}</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span><br>    <span class="kw1">for</span> <span class="re0">@test</span><span class="sy0">-</span>points <span class="sy0">-&gt;</span> <span class="re0">@point</span> <span class="br0">{</span><br>	<span class="kw3">say</span> <span class="st0">"<span class="es0">\t</span>(@point.fmt('%.1f',','))<span class="es0">\t</span>{ point-in-poly(@point, @poly)&nbsp;?? 'IN'&nbsp;!! 'OUT' }"</span><span class="sy0">;</span><br>    <span class="br0">}</span><br><span class="br0">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>squared
	(5.0,5.0)	IN
	(5.0,8.0)	IN
	(-10.0,5.0)	OUT
	(0.0,5.0)	OUT
	(10.0,5.0)	IN
	(8.0,5.0)	IN
	(10.0,10.0)	OUT
squaredhole
	(5.0,5.0)	OUT
	(5.0,8.0)	IN
	(-10.0,5.0)	OUT
	(0.0,5.0)	OUT
	(10.0,5.0)	IN
	(8.0,5.0)	IN
	(10.0,10.0)	OUT
strange
	(5.0,5.0)	IN
	(5.0,8.0)	OUT
	(-10.0,5.0)	OUT
	(0.0,5.0)	OUT
	(10.0,5.0)	IN
	(8.0,5.0)	IN
	(10.0,10.0)	OUT
exagon
	(5.0,5.0)	IN
	(5.0,8.0)	IN
	(-10.0,5.0)	OUT
	(0.0,5.0)	OUT
	(10.0,5.0)	IN
	(8.0,5.0)	IN
	(10.0,10.0)	OUT</pre>
<h2><span class="mw-headline" id="Phix"><a href="https://rosettacode.org/wiki/Category:Phix" title="Category:Phix">Phix</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=23" title="Edit section: Phix">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="text highlighted_source">constant true = (1=1), false = not true<br>constant inf = 1e300*1e300<br>&nbsp;<br>function rayIntersectsSegment(sequence point, sequence segment)<br>atom {pX,pY} = point<br>atom {{aX,aY},{bX,bY}} = segment<br>atom m_red,m_blue<br>    -- ensure {aX,aY} is the segment end-point with the smallest y coordinate<br>    if aY&gt;bY then<br>        {{bX,bY},{aX,aY}} = segment<br>    end if<br>    if pY=aY or pY=bY then<br>        --<br>        -- Consider a ray passing through the top or left corner of a diamond:<br>        --          /<br>        --  --- or  -<br>        --   ^      \<br>        -- In both cases it touches both edges, but ends up outside in the<br>        --  top case, whereas it ends up inside in the left case. Just move<br>        --  the y co-ordinate down a smidge and it'll work properly, by <br>        --  missing one line in the left/right cases and hitting both/none <br>        --  in the top/bottom cases.<br>        --<br>        pY += 0.000001<br>    end if<br>    if pY&lt;aY or pY&gt;bY then return false end if<br>    if pX&gt;max(aX,bX) then return false end if<br>    if pX&lt;min(aX,bX) then return true end if<br>    if aX!=bX then<br>        m_red = (bY-aY)/(bX-aX)<br>    else<br>        m_red = inf<br>    end if<br>    if aX!=pX then<br>        m_blue = (pY-aY)/(pX-aX)<br>    else<br>        m_blue = inf<br>    end if<br>    return m_blue &gt;= m_red<br>end function<br>&nbsp;<br>function inside(sequence point, sequence poly)<br>integer in = 0<br>    for i=1 to length(poly) do<br>        if rayIntersectsSegment(point,poly[i]) then<br>            in = not in<br>        end if<br>    end for<br>    return in<br>end function<br>&nbsp;<br>constant INOUT = {"in", "out"}<br>function in(integer flag, integer expected)<br>    if flag=expected then<br>        return INOUT[2-flag]<br>    end if<br>    return INOUT[2-flag] &amp; "*** ERROR ***" <br>end function<br>&nbsp;<br>constant INSTAR = "* "<br>function instar(integer flag)<br>    return INSTAR[2-flag]<br>end function<br>&nbsp;<br>constant test_points = {{5,5},{5,8},{-10,5},{0,5},{10,5},{8,5},{10,10}}<br>&nbsp;<br>--constant NAME = 1, POLY = 2, EXPECTED = 3<br>constant test_polygons = {<br>        {"square",      {{{0,0},{10,0}},{{10,0},{10,10}},{{10,10},{0,10}},{{0,10},{0,0}}},<br>                        {true,true,false,false,true,true,false}},<br>        {"square hole", {{{0,0},{10,0}},{{10,0},{10,10}},{{10,10},{0,10}},{{0,10},{0,0}},<br>                         {{2.5,2.5},{7.5,2.5}},{{7.5,2.5},{7.5,7.5}},{{7.5,7.5},{2.5,7.5}},{{2.5,7.5},{2.5,2.5}}},<br>                        {false,true,false,false,true,true,false}},<br>        {"strange",     {{{0,5},{2.5,2.5}},{{2.5,2.5},{0,10}},{{0,10},{2.5,7.5}},{{2.5,7.5},{7.5,7.5}},<br>                         {{7.5,7.5},{10,10}},{{10,10},{10,0}},{{10,0},{2.5,2.5}}},<br>                        {true,false,false,false,true,true,false}},<br>        {"exagon",      {{{3,0},{7,0}},{{7,0},{10,5}},{{10,5},{7,10}},{{7,10},{3,10}},{{3,10},{0,5}},{{0,5},{3,0}}},<br>                        {true,true,false,false,true,true,false}}<br>}<br>&nbsp;<br>sequence name, poly, expected, tp<br>&nbsp;<br>    for i=1 to length(test_polygons) do<br>        {name,poly,expected} = test_polygons[i]<br>        printf(1,"\n%12s:",{name})<br>        for j=1 to length(test_points) do<br>            tp = test_points[j]<br>            printf(1,"&nbsp;%s,&nbsp;%-4s",{sprint(tp),in(inside(tp,poly),expected[j])})<br>        end for<br>    end for<br>&nbsp;<br>    puts(1,"\n\n\n")<br>&nbsp;<br>    for i=0 to 10 do<br>        for j=1 to length(test_polygons) do<br>            puts(1,"     ")<br>            poly = test_polygons[j][2]<br>            for k=0 to 10 do<br>                puts(1,instar(inside({k+0.5,10.5-i},poly)))<br>            end for<br>        end for<br>        puts(1,"\n")<br>    end for</pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>      square: {5,5}, in   {5,8}, in   {-10,5}, out  {0,5}, out  {10,5}, in   {8,5}, in   {10,10}, out
 square hole: {5,5}, out  {5,8}, in   {-10,5}, out  {0,5}, out  {10,5}, in   {8,5}, in   {10,10}, out
     strange: {5,5}, in   {5,8}, out  {-10,5}, out  {0,5}, out  {10,5}, in   {8,5}, in   {10,10}, out
      exagon: {5,5}, in   {5,8}, in   {-10,5}, out  {0,5}, out  {10,5}, in   {8,5}, in   {10,10}, out


     **********      **********      *                  ****
     **********      **********       *       *        ******
     **********      **********       *      **        *******
     **********      ***     **       * *******       ********
     **********      ***     **         *******      **********
     **********      ***     **      * ********      **********
     **********      ***     **      **********       ********
     **********      ***     **      **********        *******
     **********      **********            ****        ******
     **********      **********               *         ****
</pre>
<h2><span class="mw-headline" id="PicoLisp"><a href="https://rosettacode.org/wiki/Category:PicoLisp" title="Category:PicoLisp">PicoLisp</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=24" title="Edit section: PicoLisp">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="text highlighted_source">(scl 4)<br>&nbsp;<br>(de intersects (Px Py Ax Ay Bx By)<br>   (when (&gt; Ay By)<br>      (xchg 'Ax 'Bx)<br>      (xchg 'Ay 'By) )<br>   (when (or (= Py Ay) (= Py By))<br>      (inc 'Py) )<br>   (and<br>      (&gt;= Py Ay)<br>      (&gt;= By Py)<br>      (&gt;= (max Ax Bx) Px)<br>      (or<br>         (&gt; (min Ax Bx) Px)<br>         (= Ax Px)<br>         (and<br>            (&lt;&gt; Ax Bx)<br>            (&gt;=<br>               (*/ (- Py Ay) 1.0 (- Px Ax))            # Blue<br>               (*/ (- By Ay) 1.0 (- Bx Ax)) ) ) ) ) )  # Red<br>&nbsp;<br>(de inside (Pt Poly)<br>   (let Res NIL<br>      (for Edge Poly<br>         (when (apply intersects Edge (car Pt) (cdr Pt))<br>            (onOff Res) ) )<br>      Res ) )</pre>
<p>Test data:
</p>
<pre style="height:20em;overflow:scroll">(de Square
   ( 0.0  0.0  10.0  0.0)
   (10.0  0.0  10.0 10.0)
   (10.0 10.0   0.0 10.0)
   ( 0.0 10.0   0.0  0.0) )

(de SquareHole
   ( 0.0  0.0  10.0  0.0)
   (10.0  0.0  10.0 10.0)
   (10.0 10.0   0.0 10.0)
   ( 0.0 10.0   0.0  0.0)
   ( 2.5  2.5   7.5  2.5)
   ( 7.5  2.5   7.5  7.5)
   ( 7.5  7.5   2.5  7.5)
   ( 2.5  7.5   2.5  2.5) )

(de Strange
   ( 0.0  0.0   2.5  2.5)
   ( 2.5  2.5   0.0 10.0)
   ( 0.0 10.0   2.5  7.5)
   ( 2.5  7.5   7.5  7.5)
   ( 7.5  7.5  10.0 10.0)
   (10.0 10.0  10.0  0.0)
   (10.0  0.0   2.5  2.5) )

(de Exagon
   ( 3.0  0.0   7.0  0.0)
   ( 7.0  0.0  10.0  5.0)
   (10.0  5.0   7.0 10.0)
   ( 7.0 10.0   3.0 10.0)
   ( 3.0 10.0   0.0  5.0)
   ( 0.0  5.0   3.0  0.0) )</pre>
<p>Output:
</p>
<pre style="height:20em;overflow:scroll">: (inside (5.0 . 5.0) Square)
-&gt; T
: (inside (5.0 . 8.0) Square)
-&gt; T
: (inside (-10.0 . 5.0) Square)
-&gt; NIL
: (inside (0.0 . 5.0) Square)
-&gt; NIL
: (inside (10.0 . 5.0) Square)
-&gt; T
: (inside (8.0 . 5.0) Square)
-&gt; T
: (inside (10.0 . 10.0) Square)
-&gt; NIL

: (inside (5.0 . 5.0) SquareHole)
-&gt; NIL
: (inside (5.0 . 8.0) SquareHole)
-&gt; T
: (inside (-10.0 . 5.0) SquareHole)
-&gt; NIL
: (inside (0 . 5.0) SquareHole)
-&gt; NIL
: (inside (10.0 . 5.0) SquareHole)
-&gt; T
: (inside (8.0 . 5.0) SquareHole)
-&gt; T
: (inside (10.0 . 10.0) SquareHole)
-&gt; NIL

: (inside (5.0 . 5.0) Strange)
-&gt; T
: (inside (5.0 . 8.0) Strange)
-&gt; NIL
: (inside (-10.0 . 5.0) Strange)
-&gt; NIL
: (inside (0 . 5.0) Strange)
-&gt; NIL
: (inside (10.0 . 5.0) Strange)
-&gt; T
: (inside (8.0 . 5.0) Strange)
-&gt; T
: (inside (10.0 . 10.0) Strange)
-&gt; NIL

: (inside (5.0 . 5.0) Exagon)
-&gt; T
: (inside (5.0 . 8.0) Exagon)
-&gt; T
: (inside (-10.0 . 5.0) Exagon)
-&gt; NIL
: (inside (0.0 . 5.0) Exagon)
-&gt; NIL
: (inside (10.0 . 5.0) Exagon)
-&gt; T
: (inside (8.0 . 5.0) Exagon)
-&gt; T
: (inside (10.0 . 10.0) Exagon)
-&gt; NIL</pre>
<h2><span class="mw-headline" id="PureBasic"><a href="https://rosettacode.org/wiki/Category:PureBasic" title="Category:PureBasic">PureBasic</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=25" title="Edit section: PureBasic">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The code below is includes a GUI for drawing a polygon with the mouse that constantly tests whether the mouse is inside or outside the polygon. It displays a message and changes the windows color slightly to indicate if the pointer is inside or outside the polygon being drawn. The routine that does the checking is called inpoly() and it returns a value of one if the point is with the polygon and zero if it isn't.
</p>
<pre class="purebasic highlighted_source"><span class="kw1">Structure</span> point_f<br>  x.f<br>  y.f<br><span class="kw1">EndStructure</span><br><span class="kw1">Procedure</span> inpoly<span class="br0">(</span><span class="sy0">*</span>p.point_f, List poly.point_f<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><br>  <span class="kw1">Protected</span>.point_f new, old, lp, rp<br>  <span class="kw1">Protected</span> inside<br>  <span class="kw1">If</span> ListSize<span class="br0">(</span>poly<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="nu0">3</span>: <span class="kw1">ProcedureReturn</span> <span class="nu0">0</span>: <span class="kw1">EndIf</span> <br>  <span class="kw2">LastElement</span><span class="br0">(</span>poly<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>: old <span class="sy0">=</span> poly<span class="br0">(</span><span class="br0">)</span><br>  <span class="kw1">ForEach</span> poly<span class="br0">(</span><span class="br0">)</span><br>    <span class="co1">;find leftmost endpoint 'lp' and the rightmost endpoint 'rp' based on x value</span><br>    <span class="kw1">If</span> poly<span class="br0">(</span><span class="br0">)</span><span class="sy0">\</span>x <span class="sy0">&gt;</span> old<span class="sy0">\</span>x <br>      lp <span class="sy0">=</span> old<br>      rp <span class="sy0">=</span> poly<span class="br0">(</span><span class="br0">)</span><br>    <span class="kw1">Else</span><br>      lp <span class="sy0">=</span> poly<span class="br0">(</span><span class="br0">)</span><br>      rp <span class="sy0">=</span> old<br>    <span class="kw1">EndIf</span> <br>    <span class="kw1">If</span> lp<span class="sy0">\</span>x <span class="sy0">&lt;</span> <span class="sy0">*</span>p<span class="sy0">\</span>x <span class="kw1">And</span> <span class="sy0">*</span>p<span class="sy0">\</span>x <span class="sy0">&lt;=</span> rp<span class="sy0">\</span>x <span class="kw1">And</span> <span class="br0">(</span><span class="sy0">*</span>p<span class="sy0">\</span>y <span class="sy0">-</span> lp<span class="sy0">\</span>y<span class="br0">)</span> <span class="sy0">*</span> <span class="br0">(</span>rp<span class="sy0">\</span>x <span class="sy0">-</span> lp<span class="sy0">\</span>x<span class="br0">)</span> <span class="sy0">&lt;</span> <span class="br0">(</span>rp<span class="sy0">\</span>y <span class="sy0">-</span> lp<span class="sy0">\</span>y<span class="br0">)</span> <span class="sy0">*</span> <span class="br0">(</span><span class="sy0">*</span>p<span class="sy0">\</span>x <span class="sy0">-</span> lp<span class="sy0">\</span>x<span class="br0">)</span><br>      inside <span class="sy0">=</span> <span class="sy0">~</span>inside<br>    <span class="kw1">EndIf</span> <br>    old <span class="sy0">=</span> poly<span class="br0">(</span><span class="br0">)</span><br>  <span class="kw1">Next</span> <br>  <span class="kw1">ProcedureReturn</span> inside <span class="sy0">&amp;</span> <span class="nu0">1</span><br><span class="kw1">EndProcedure</span><br>&nbsp;<br><span class="kw1">If</span> <span class="kw2">InitSprite</span><span class="br0">(</span><span class="br0">)</span><br>  <span class="kw1">If</span> <span class="kw2">InitKeyboard</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">And</span> <span class="kw2">InitMouse</span><span class="br0">(</span><span class="br0">)</span><br>    <span class="kw2">OpenWindow</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">800</span>, <span class="nu0">600</span>, <span class="st0">"Press [Esc] to close, [Left mouse button] Add Point, [Right mouse button] Clear All Points."</span>, #PB_Window_ScreenCentered <span class="sy0">|</span> #PB_Window_SystemMenu<span class="br0">)</span><br>    <span class="kw2">OpenWindowedScreen</span><span class="br0">(</span><span class="kw2">WindowID</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">800</span>, <span class="nu0">600</span>, <span class="nu0">1</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span><br>    <span class="kw2">SetFrameRate</span><span class="br0">(</span><span class="nu0">60</span><span class="br0">)</span><br>  <span class="kw1">EndIf</span><br><span class="kw1">Else</span><br>  <span class="kw2">MessageRequester</span><span class="br0">(</span><span class="st0">""</span>, <span class="st0">"Unable to initsprite"</span><span class="br0">)</span>: <span class="kw1">End</span><br><span class="kw1">EndIf</span><br>&nbsp;<br><span class="kw1">NewList</span> v.point_f<span class="br0">(</span><span class="br0">)</span><br><span class="kw1">Define</span>.point_f pvp, mp<br><span class="kw1">Define</span> Col, EventID, mode.b, modetxt.s<br><span class="kw1">Repeat</span><br>  <span class="kw2">Delay</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><br>  EventID <span class="sy0">=</span> <span class="kw2">WindowEvent</span><span class="br0">(</span><span class="br0">)</span><br>  <span class="kw2">ExamineKeyboard</span><span class="br0">(</span><span class="br0">)</span><br>  <span class="kw2">ExamineMouse</span><span class="br0">(</span><span class="br0">)</span><br>  <span class="kw2">ClearScreen</span><span class="br0">(</span>Col<span class="br0">)</span><br>&nbsp;<br>  mp<span class="sy0">\</span>x <span class="sy0">=</span> <span class="kw2">MouseX</span><span class="br0">(</span><span class="br0">)</span><br>  mp<span class="sy0">\</span>y <span class="sy0">=</span> <span class="kw2">MouseY</span><span class="br0">(</span><span class="br0">)</span><br>  <span class="kw1">If</span> <span class="kw2">MouseButton</span><span class="br0">(</span>#PB_MouseButton_Left<span class="br0">)</span><br>    <span class="kw2">AddElement</span><span class="br0">(</span>v<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><br>    v<span class="br0">(</span><span class="br0">)</span><span class="sy0">\</span>x <span class="sy0">=</span> mp<span class="sy0">\</span>x<br>    v<span class="br0">(</span><span class="br0">)</span><span class="sy0">\</span>y <span class="sy0">=</span> mp<span class="sy0">\</span>y<br>    <span class="kw2">Delay</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span><br>  <span class="kw1">EndIf</span><br>&nbsp;<br>  <span class="kw1">If</span> <span class="kw2">MouseButton</span><span class="br0">(</span>#PB_MouseButton_Right<span class="br0">)</span><br>    <span class="kw2">ClearList</span><span class="br0">(</span>v<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><br>    <span class="kw2">Delay</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span><br>  <span class="kw1">EndIf</span><br>&nbsp;<br>  <span class="kw2">StartDrawing</span><span class="br0">(</span><span class="kw2">ScreenOutput</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><br>    <span class="kw1">If</span> <span class="kw2">LastElement</span><span class="br0">(</span>v<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><br>      pvp <span class="sy0">=</span> v<span class="br0">(</span><span class="br0">)</span><br>      <span class="kw1">ForEach</span> v<span class="br0">(</span><span class="br0">)</span><br>        <span class="kw2">LineXY</span><span class="br0">(</span>pvp<span class="sy0">\</span>x, pvp<span class="sy0">\</span>y, v<span class="br0">(</span><span class="br0">)</span><span class="sy0">\</span>x, v<span class="br0">(</span><span class="br0">)</span><span class="sy0">\</span>y, <span class="kw2">RGB</span><span class="br0">(</span><span class="nu0">0</span>, $FF, <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="co1">;Green</span><br>        <span class="kw2">Circle</span><span class="br0">(</span>pvp<span class="sy0">\</span>x, pvp<span class="sy0">\</span>y, <span class="nu0">5</span>, <span class="kw2">RGB</span><span class="br0">(</span>$FF, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="co1">;Red</span><br>        pvp <span class="sy0">=</span> v<span class="br0">(</span><span class="br0">)</span><br>      <span class="kw1">Next</span><br>    <span class="kw1">EndIf</span> <br>    <span class="kw2">Circle</span><span class="br0">(</span><span class="kw2">MouseX</span><span class="br0">(</span><span class="br0">)</span>, <span class="kw2">MouseY</span><span class="br0">(</span><span class="br0">)</span>, <span class="nu0">5</span>, <span class="kw2">RGB</span><span class="br0">(</span>$C0, $C0, $FF<span class="br0">)</span><span class="br0">)</span> <span class="co1">;LightBlue </span><br>&nbsp;<br>    <span class="kw1">If</span> inpoly<span class="br0">(</span>mp, v<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><br>      modetxt <span class="sy0">=</span> <span class="st0">"You are in the polygon."</span><br>      Col <span class="sy0">=</span> <span class="kw2">RGB</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span><br>    <span class="kw1">Else</span><br>      modetxt <span class="sy0">=</span> <span class="st0">"You are not in the polygon."</span><br>      Col <span class="sy0">=</span> <span class="kw2">RGB</span><span class="br0">(</span>$50, $50, $50<span class="br0">)</span><br>    <span class="kw1">EndIf</span><br>    <span class="kw2">DrawText</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">800</span> <span class="sy0">-</span> <span class="kw2">TextWidth</span><span class="br0">(</span>modetxt<span class="br0">)</span><span class="br0">)</span> <span class="sy0">/</span> <span class="nu0">2</span>, <span class="nu0">0</span>, modetxt<span class="br0">)</span> <br>  <span class="kw2">StopDrawing</span><span class="br0">(</span><span class="br0">)</span><br>&nbsp;<br>  <span class="kw2">FlipBuffers</span><span class="br0">(</span><span class="br0">)</span><br><span class="kw1">Until</span> <span class="kw2">KeyboardReleased</span><span class="br0">(</span>#PB_Key_Escape<span class="br0">)</span> <span class="kw1">Or</span> EventID <span class="sy0">=</span> #PB_Event_CloseWindow</pre>
<h2><span class="mw-headline" id="Python"><a href="https://rosettacode.org/wiki/Category:Python" title="Category:Python">Python</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=26" title="Edit section: Python">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="python highlighted_source"><span class="kw1">from</span> <span class="kw3">collections</span> <span class="kw1">import</span> namedtuple<br><span class="kw1">from</span> <span class="kw3">pprint</span> <span class="kw1">import</span> <span class="kw3">pprint</span> <span class="kw1">as</span> pp<br><span class="kw1">import</span> <span class="kw3">sys</span><br>&nbsp;<br>Pt <span class="sy0">=</span> namedtuple<span class="br0">(</span><span class="st0">'Pt'</span><span class="sy0">,</span> <span class="st0">'x, y'</span><span class="br0">)</span>               <span class="co1"># Point</span><br>Edge <span class="sy0">=</span> namedtuple<span class="br0">(</span><span class="st0">'Edge'</span><span class="sy0">,</span> <span class="st0">'a, b'</span><span class="br0">)</span>           <span class="co1"># Polygon edge from a to b</span><br>Poly <span class="sy0">=</span> namedtuple<span class="br0">(</span><span class="st0">'Poly'</span><span class="sy0">,</span> <span class="st0">'name, edges'</span><span class="br0">)</span>    <span class="co1"># Polygon</span><br>&nbsp;<br>_eps <span class="sy0">=</span> <span class="nu0">0.00001</span><br>_huge <span class="sy0">=</span> <span class="kw3">sys</span>.<span class="me1">float_info</span>.<span class="kw2">max</span><br>_tiny <span class="sy0">=</span> <span class="kw3">sys</span>.<span class="me1">float_info</span>.<span class="kw2">min</span><br>&nbsp;<br><span class="kw1">def</span> rayintersectseg<span class="br0">(</span>p<span class="sy0">,</span> edge<span class="br0">)</span>:<br>    <span class="st0">''' takes a point p=Pt() and an edge of two endpoints a,b=Pt() of a line segment returns boolean<br>    '''</span><br>    a<span class="sy0">,</span>b <span class="sy0">=</span> edge<br>    <span class="kw1">if</span> a.<span class="me1">y</span> <span class="sy0">&gt;</span> b.<span class="me1">y</span>:<br>        a<span class="sy0">,</span>b <span class="sy0">=</span> b<span class="sy0">,</span>a<br>    <span class="kw1">if</span> p.<span class="me1">y</span> <span class="sy0">==</span> a.<span class="me1">y</span> <span class="kw1">or</span> p.<span class="me1">y</span> <span class="sy0">==</span> b.<span class="me1">y</span>:<br>        p <span class="sy0">=</span> Pt<span class="br0">(</span>p.<span class="me1">x</span><span class="sy0">,</span> p.<span class="me1">y</span> + _eps<span class="br0">)</span><br>&nbsp;<br>    intersect <span class="sy0">=</span> <span class="kw2">False</span><br>&nbsp;<br>    <span class="kw1">if</span> <span class="br0">(</span>p.<span class="me1">y</span> <span class="sy0">&gt;</span> b.<span class="me1">y</span> <span class="kw1">or</span> p.<span class="me1">y</span> <span class="sy0">&lt;</span> a.<span class="me1">y</span><span class="br0">)</span> <span class="kw1">or</span> <span class="br0">(</span><br>        p.<span class="me1">x</span> <span class="sy0">&gt;</span> <span class="kw2">max</span><span class="br0">(</span>a.<span class="me1">x</span><span class="sy0">,</span> b.<span class="me1">x</span><span class="br0">)</span><span class="br0">)</span>:<br>        <span class="kw1">return</span> <span class="kw2">False</span><br>&nbsp;<br>    <span class="kw1">if</span> p.<span class="me1">x</span> <span class="sy0">&lt;</span> <span class="kw2">min</span><span class="br0">(</span>a.<span class="me1">x</span><span class="sy0">,</span> b.<span class="me1">x</span><span class="br0">)</span>:<br>        intersect <span class="sy0">=</span> <span class="kw2">True</span><br>    <span class="kw1">else</span>:<br>        <span class="kw1">if</span> <span class="kw2">abs</span><span class="br0">(</span>a.<span class="me1">x</span> - b.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> _tiny:<br>            m_red <span class="sy0">=</span> <span class="br0">(</span>b.<span class="me1">y</span> - a.<span class="me1">y</span><span class="br0">)</span> / <span class="kw2">float</span><span class="br0">(</span>b.<span class="me1">x</span> - a.<span class="me1">x</span><span class="br0">)</span><br>        <span class="kw1">else</span>:<br>            m_red <span class="sy0">=</span> _huge<br>        <span class="kw1">if</span> <span class="kw2">abs</span><span class="br0">(</span>a.<span class="me1">x</span> - p.<span class="me1">x</span><span class="br0">)</span> <span class="sy0">&gt;</span> _tiny:<br>            m_blue <span class="sy0">=</span> <span class="br0">(</span>p.<span class="me1">y</span> - a.<span class="me1">y</span><span class="br0">)</span> / <span class="kw2">float</span><span class="br0">(</span>p.<span class="me1">x</span> - a.<span class="me1">x</span><span class="br0">)</span><br>        <span class="kw1">else</span>:<br>            m_blue <span class="sy0">=</span> _huge<br>        intersect <span class="sy0">=</span> m_blue <span class="sy0">&gt;=</span> m_red<br>    <span class="kw1">return</span> intersect<br>&nbsp;<br><span class="kw1">def</span> _odd<span class="br0">(</span>x<span class="br0">)</span>: <span class="kw1">return</span> x%<span class="nu0">2</span> <span class="sy0">==</span> <span class="nu0">1</span><br>&nbsp;<br><span class="kw1">def</span> ispointinside<span class="br0">(</span>p<span class="sy0">,</span> poly<span class="br0">)</span>:<br>    ln <span class="sy0">=</span> <span class="kw2">len</span><span class="br0">(</span>poly<span class="br0">)</span><br>    <span class="kw1">return</span> _odd<span class="br0">(</span><span class="kw2">sum</span><span class="br0">(</span>rayintersectseg<span class="br0">(</span>p<span class="sy0">,</span> edge<span class="br0">)</span><br>                    <span class="kw1">for</span> edge <span class="kw1">in</span> poly.<span class="me1">edges</span> <span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="kw1">def</span> polypp<span class="br0">(</span>poly<span class="br0">)</span>:<br>    <span class="kw1">print</span> <span class="br0">(</span><span class="st0">"<span class="es0">\n</span>  Polygon(name='%s', edges=("</span>&nbsp;% poly.<span class="me1">name</span><span class="br0">)</span><br>    <span class="kw1">print</span> <span class="br0">(</span><span class="st0">'   '</span><span class="sy0">,</span> <span class="st0">',<span class="es0">\n</span>    '</span>.<span class="me1">join</span><span class="br0">(</span><span class="kw2">str</span><span class="br0">(</span>e<span class="br0">)</span> <span class="kw1">for</span> e <span class="kw1">in</span> poly.<span class="me1">edges</span><span class="br0">)</span> + <span class="st0">'<span class="es0">\n</span>    ))'</span><span class="br0">)</span><br>&nbsp;<br><span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">'__main__'</span>:<br>    polys <span class="sy0">=</span> <span class="br0">[</span><br>      Poly<span class="br0">(</span>name<span class="sy0">=</span><span class="st0">'square'</span><span class="sy0">,</span> edges<span class="sy0">=</span><span class="br0">(</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>      Poly<span class="br0">(</span>name<span class="sy0">=</span><span class="st0">'square_hole'</span><span class="sy0">,</span> edges<span class="sy0">=</span><span class="br0">(</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>      Poly<span class="br0">(</span>name<span class="sy0">=</span><span class="st0">'strange'</span><span class="sy0">,</span> edges<span class="sy0">=</span><span class="br0">(</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">2.5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>      Poly<span class="br0">(</span>name<span class="sy0">=</span><span class="st0">'exagon'</span><span class="sy0">,</span> edges<span class="sy0">=</span><span class="br0">(</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">3</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">7</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">3</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">3</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>        Edge<span class="br0">(</span>a<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> b<span class="sy0">=</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">3</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><br>      <span class="br0">]</span><br>    testpoints <span class="sy0">=</span> <span class="br0">(</span>Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">5</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">8</span><span class="br0">)</span><span class="sy0">,</span><br>                  Pt<span class="br0">(</span>x<span class="sy0">=</span>-<span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span><br>                  Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">8</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span><br>                  Pt<span class="br0">(</span>x<span class="sy0">=</span><span class="nu0">10</span><span class="sy0">,</span> y<span class="sy0">=</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>    <span class="kw1">print</span> <span class="br0">(</span><span class="st0">"<span class="es0">\n</span> TESTING WHETHER POINTS ARE WITHIN POLYGONS"</span><span class="br0">)</span><br>    <span class="kw1">for</span> poly <span class="kw1">in</span> polys:<br>        polypp<span class="br0">(</span>poly<span class="br0">)</span><br>        <span class="kw1">print</span> <span class="br0">(</span><span class="st0">'   '</span><span class="sy0">,</span> <span class="st0">'<span class="es0">\t</span>'</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">"%s:&nbsp;%s"</span>&nbsp;% <span class="br0">(</span>p<span class="sy0">,</span> ispointinside<span class="br0">(</span>p<span class="sy0">,</span> poly<span class="br0">)</span><span class="br0">)</span><br>                               <span class="kw1">for</span> p <span class="kw1">in</span> testpoints<span class="br0">[</span>:<span class="nu0">3</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="kw1">print</span> <span class="br0">(</span><span class="st0">'   '</span><span class="sy0">,</span> <span class="st0">'<span class="es0">\t</span>'</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">"%s:&nbsp;%s"</span>&nbsp;% <span class="br0">(</span>p<span class="sy0">,</span> ispointinside<span class="br0">(</span>p<span class="sy0">,</span> poly<span class="br0">)</span><span class="br0">)</span><br>                               <span class="kw1">for</span> p <span class="kw1">in</span> testpoints<span class="br0">[</span><span class="nu0">3</span>:<span class="nu0">6</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="kw1">print</span> <span class="br0">(</span><span class="st0">'   '</span><span class="sy0">,</span> <span class="st0">'<span class="es0">\t</span>'</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">"%s:&nbsp;%s"</span>&nbsp;% <span class="br0">(</span>p<span class="sy0">,</span> ispointinside<span class="br0">(</span>p<span class="sy0">,</span> poly<span class="br0">)</span><span class="br0">)</span><br>                               <span class="kw1">for</span> p <span class="kw1">in</span> testpoints<span class="br0">[</span><span class="nu0">6</span>:<span class="br0">]</span><span class="br0">)</span><span class="br0">)</span></pre>
<p><b>Sample output</b>
</p>
<pre style="height:20em;overflow:scroll"> TESTING WHETHER POINTS ARE WITHIN POLYGONS

  Polygon(name='square', edges=(
    Edge(a=Pt(x=0, y=0), b=Pt(x=10, y=0)),
    Edge(a=Pt(x=10, y=0), b=Pt(x=10, y=10)),
    Edge(a=Pt(x=10, y=10), b=Pt(x=0, y=10)),
    Edge(a=Pt(x=0, y=10), b=Pt(x=0, y=0))
    ))
    Pt(x=5, y=5): True	Pt(x=5, y=8): True	Pt(x=-10, y=5): False
    Pt(x=0, y=5): False	Pt(x=10, y=5): True	Pt(x=8, y=5): True
    Pt(x=10, y=10): False

  Polygon(name='square_hole', edges=(
    Edge(a=Pt(x=0, y=0), b=Pt(x=10, y=0)),
    Edge(a=Pt(x=10, y=0), b=Pt(x=10, y=10)),
    Edge(a=Pt(x=10, y=10), b=Pt(x=0, y=10)),
    Edge(a=Pt(x=0, y=10), b=Pt(x=0, y=0)),
    Edge(a=Pt(x=2.5, y=2.5), b=Pt(x=7.5, y=2.5)),
    Edge(a=Pt(x=7.5, y=2.5), b=Pt(x=7.5, y=7.5)),
    Edge(a=Pt(x=7.5, y=7.5), b=Pt(x=2.5, y=7.5)),
    Edge(a=Pt(x=2.5, y=7.5), b=Pt(x=2.5, y=2.5))
    ))
    Pt(x=5, y=5): False	Pt(x=5, y=8): True	Pt(x=-10, y=5): False
    Pt(x=0, y=5): False	Pt(x=10, y=5): True	Pt(x=8, y=5): True
    Pt(x=10, y=10): False

  Polygon(name='strange', edges=(
    Edge(a=Pt(x=0, y=0), b=Pt(x=2.5, y=2.5)),
    Edge(a=Pt(x=2.5, y=2.5), b=Pt(x=0, y=10)),
    Edge(a=Pt(x=0, y=10), b=Pt(x=2.5, y=7.5)),
    Edge(a=Pt(x=2.5, y=7.5), b=Pt(x=7.5, y=7.5)),
    Edge(a=Pt(x=7.5, y=7.5), b=Pt(x=10, y=10)),
    Edge(a=Pt(x=10, y=10), b=Pt(x=10, y=0)),
    Edge(a=Pt(x=10, y=0), b=Pt(x=2.5, y=2.5))
    ))
    Pt(x=5, y=5): True	Pt(x=5, y=8): False	Pt(x=-10, y=5): False
    Pt(x=0, y=5): False	Pt(x=10, y=5): True	Pt(x=8, y=5): True
    Pt(x=10, y=10): False

  Polygon(name='exagon', edges=(
    Edge(a=Pt(x=3, y=0), b=Pt(x=7, y=0)),
    Edge(a=Pt(x=7, y=0), b=Pt(x=10, y=5)),
    Edge(a=Pt(x=10, y=5), b=Pt(x=7, y=10)),
    Edge(a=Pt(x=7, y=10), b=Pt(x=3, y=10)),
    Edge(a=Pt(x=3, y=10), b=Pt(x=0, y=5)),
    Edge(a=Pt(x=0, y=5), b=Pt(x=3, y=0))
    ))
    Pt(x=5, y=5): True	Pt(x=5, y=8): True	Pt(x=-10, y=5): False
    Pt(x=0, y=5): False	Pt(x=10, y=5): True	Pt(x=8, y=5): True
    Pt(x=10, y=10): False</pre>
<p><b>Helper routine to convert Fortran Polygons and points to Python</b>
</p>
<pre class="python highlighted_source"><span class="kw1">def</span> _convert_fortran_shapes<span class="br0">(</span><span class="br0">)</span>:<br>    point <span class="sy0">=</span> Pt<br>    pts <span class="sy0">=</span> <span class="br0">(</span>point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> <br>           point<span class="br0">(</span><span class="nu0">2.5</span><span class="sy0">,</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7.5</span><span class="sy0">,</span><span class="nu0">2.5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7.5</span><span class="sy0">,</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">2.5</span><span class="sy0">,</span><span class="nu0">7.5</span><span class="br0">)</span><span class="sy0">,</span> <br>           point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> <br>           point<span class="br0">(</span><span class="nu0">3</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">7</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">3</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span><br>    p <span class="sy0">=</span> <span class="br0">(</span>point<span class="br0">(</span><span class="nu0">5</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">8</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span>-<span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span><br>         point<span class="br0">(</span><span class="nu0">8</span><span class="sy0">,</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">,</span> point<span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span> <span class="br0">)</span><br>&nbsp;<br>    <span class="kw1">def</span> create_polygon<span class="br0">(</span>pts<span class="sy0">,</span>vertexindex<span class="br0">)</span>:<br>        <span class="kw1">return</span> <span class="br0">[</span><span class="kw2">tuple</span><span class="br0">(</span>Edge<span class="br0">(</span>pts<span class="br0">[</span>vertexindex<span class="br0">[</span>i<span class="br0">]</span>-<span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span> pts<span class="br0">[</span>vertexindex<span class="br0">[</span>i+<span class="nu0">1</span><span class="br0">]</span>-<span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span><br>                       <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">len</span><span class="br0">(</span>vertexindex<span class="br0">)</span><span class="sy0">,</span> <span class="nu0">2</span><span class="br0">)</span> <span class="br0">)</span><span class="br0">]</span><br>    polys<span class="sy0">=</span><span class="br0">[</span><span class="br0">]</span><br>    polys +<span class="sy0">=</span> create_polygon<span class="br0">(</span>pts<span class="sy0">,</span> <span class="br0">(</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span><span class="nu0">1</span> <span class="br0">)</span> <span class="br0">)</span><br>    polys +<span class="sy0">=</span> create_polygon<span class="br0">(</span>pts<span class="sy0">,</span> <span class="br0">(</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span><span class="nu0">6</span><span class="sy0">,</span> <span class="nu0">6</span><span class="sy0">,</span><span class="nu0">7</span><span class="sy0">,</span> <span class="nu0">7</span><span class="sy0">,</span><span class="nu0">8</span><span class="sy0">,</span> <span class="nu0">8</span><span class="sy0">,</span><span class="nu0">5</span> <span class="br0">)</span> <span class="br0">)</span><br>    polys +<span class="sy0">=</span> create_polygon<span class="br0">(</span>pts<span class="sy0">,</span> <span class="br0">(</span> <span class="nu0">1</span><span class="sy0">,</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span><span class="nu0">8</span><span class="sy0">,</span> <span class="nu0">8</span><span class="sy0">,</span><span class="nu0">7</span><span class="sy0">,</span> <span class="nu0">7</span><span class="sy0">,</span><span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span><span class="nu0">5</span> <span class="br0">)</span> <span class="br0">)</span><br>    polys +<span class="sy0">=</span> create_polygon<span class="br0">(</span>pts<span class="sy0">,</span> <span class="br0">(</span> <span class="nu0">11</span><span class="sy0">,</span><span class="nu0">12</span><span class="sy0">,</span> <span class="nu0">12</span><span class="sy0">,</span><span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">10</span><span class="sy0">,</span><span class="nu0">13</span><span class="sy0">,</span> <span class="nu0">13</span><span class="sy0">,</span><span class="nu0">14</span><span class="sy0">,</span> <span class="nu0">14</span><span class="sy0">,</span><span class="nu0">9</span><span class="sy0">,</span> <span class="nu0">9</span><span class="sy0">,</span><span class="nu0">11</span> <span class="br0">)</span> <span class="br0">)</span><br>&nbsp;<br>    names <span class="sy0">=</span> <span class="br0">(</span> <span class="st0">"square"</span><span class="sy0">,</span> <span class="st0">"square_hole"</span><span class="sy0">,</span> <span class="st0">"strange"</span><span class="sy0">,</span> <span class="st0">"exagon"</span> <span class="br0">)</span><br>    polys <span class="sy0">=</span> <span class="br0">[</span>Poly<span class="br0">(</span>name<span class="sy0">,</span> edges<span class="br0">)</span><br>             <span class="kw1">for</span> name<span class="sy0">,</span> edges <span class="kw1">in</span> <span class="kw2">zip</span><span class="br0">(</span>names<span class="sy0">,</span> polys<span class="br0">)</span><span class="br0">]</span><br>    <span class="kw1">print</span> <span class="st0">'polys = ['</span><br>    <span class="kw1">for</span> p <span class="kw1">in</span> polys:<br>        <span class="kw1">print</span> <span class="st0">"  Poly(name='%s', edges=("</span>&nbsp;% p.<span class="me1">name</span><br>        <span class="kw1">print</span> <span class="st0">'   '</span><span class="sy0">,</span> <span class="st0">',<span class="es0">\n</span>    '</span>.<span class="me1">join</span><span class="br0">(</span><span class="kw2">str</span><span class="br0">(</span>e<span class="br0">)</span> <span class="kw1">for</span> e <span class="kw1">in</span> p.<span class="me1">edges</span><span class="br0">)</span> + <span class="st0">'<span class="es0">\n</span>    )),'</span><br>    <span class="kw1">print</span> <span class="st0">'  ]'</span><br> _convert_fortran_shapes<span class="br0">(</span><span class="br0">)</span></pre>
<h2><span class="mw-headline" id="R"><a href="https://rosettacode.org/wiki/Category:R" title="Category:R">R</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=27" title="Edit section: R">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="text highlighted_source">point_in_polygon &lt;- function(polygon, p) {<br>  count &lt;- 0<br>  for(side in polygon) {<br>    if ( ray_intersect_segment(p, side) ) {<br>      count &lt;- count + 1<br>    }<br>  }<br>  if ( count&nbsp;%% 2 == 1 )<br>    "INSIDE"<br>  else<br>    "OUTSIDE"<br>}<br>&nbsp;<br>ray_intersect_segment &lt;- function(p, side) {<br>  eps &lt;- 0.0001<br>  a &lt;- side$A<br>  b &lt;- side$B<br>  if ( a$y &gt; b$y ) {<br>    a &lt;- side$B<br>    b &lt;- side$A<br>  }<br>  if ( (p$y == a$y) || (p$y == b$y) ) {<br>    p$y &lt;- p$y + eps<br>  }<br>  if ( (p$y &lt; a$y) || (p$y &gt; b$y) )<br>    return(FALSE)<br>  else if ( p$x &gt; max(a$x, b$x) )<br>    return(FALSE)<br>  else {<br>    if ( p$x &lt; min(a$x, b$x) )<br>      return(TRUE)<br>    else {<br>      if ( a$x&nbsp;!= b$x )<br>        m_red &lt;- (b$y - a$y) / (b$x - a$x)<br>      else<br>        m_red &lt;- Inf<br>      if ( a$x&nbsp;!= p$x )<br>        m_blue &lt;- (p$y - a$y) / (p$x - a$x)<br>      else<br>        m_blue &lt;- Inf<br>      return( m_blue &gt;= m_red )<br>    }<br>  }<br>}</pre>
<pre class="text highlighted_source">######## utility functions #########<br>&nbsp;<br>point &lt;- function(x,y) list(x=x, y=y)<br>&nbsp;<br># pts = list(p1, p2, ... )... coords<br># segs = list(c(1,2), c(2,1) ...) indices<br>createPolygon &lt;- function(pts, segs) {<br>  pol &lt;- list()<br>  for(pseg in segs) {<br>    pol &lt;- c(pol, list(list(A=pts[[pseg[1]]], B=pts[[pseg[2]]])))<br>  }<br>  pol<br>}</pre>
<pre class="text highlighted_source">#### testing ####<br>&nbsp;<br>pts &lt;- list(point(0,0), point(10,0), point(10,10), point(0,10),<br>            point(2.5,2.5), point(7.5,2.5), point(7.5,7.5), point(2.5,7.5), <br>            point(0,5), point(10,5), <br>            point(3,0), point(7,0), point(7,10), point(3,10))<br>&nbsp;<br>polygons &lt;-<br>  list(<br>       square = createPolygon(pts, list(c(1,2), c(2,3), c(3,4), c(4,1))),<br>       squarehole = createPolygon(pts, list(c(1,2), c(2,3), c(3,4), c(4,1), c(5,6), c(6,7), c(7,8), c(8,5))),<br>       exagon = createPolygon(pts, list(c(11,12), c(12,10), c(10,13), c(13,14), c(14,9), c(9,11)))<br>      )<br>&nbsp;<br>testpoints &lt;-<br>  list(<br>       point(5,5), point(5, 8), point(-10, 5), point(0,5), point(10,5),<br>       point(8,5), point(9.9,9.9)<br>      )<br>&nbsp;<br>for(p in testpoints) {<br>  for(polysi in 1:length(polygons)) {<br>    cat(sprintf("point (%lf,&nbsp;%lf) is&nbsp;%s polygon (%s)\n",<br>                  p$x, p$y, point_in_polygon(polygons[[polysi]], p), names(polygons[polysi])))<br>  }<br>}</pre>
<h2><span class="mw-headline" id="Racket"><a href="https://rosettacode.org/wiki/Category:Racket" title="Category:Racket">Racket</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=28" title="Edit section: Racket">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Straightforward implementation of pseudocode
</p>
<pre class="scheme highlighted_source">&nbsp;<br>#lang racket<br>&nbsp;<br><span class="br0">(</span>module pip racket<br>  <span class="br0">(</span>require racket<span class="sy0">/</span>contract<span class="br0">)</span><br>&nbsp;<br>  <span class="br0">(</span>provide point<span class="br0">)</span><br>  <span class="br0">(</span>provide seg<span class="br0">)</span><br>  <span class="br0">(</span>provide <span class="br0">(</span>contract<span class="sy0">-</span>out <span class="br0">[</span>point<span class="sy0">-</span>in<span class="sy0">-</span>polygon? <span class="br0">(</span><span class="sy0">-&gt;</span> <br>                                             point? <br>                                             <span class="kw1">list?</span> <br>                                             <span class="kw1">boolean?</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>  <span class="br0">(</span>struct point <span class="br0">(</span>x y<span class="br0">)</span> #:transparent<span class="br0">)</span><br>  <span class="br0">(</span>struct seg <span class="br0">(</span>Ax Ay Bx By<span class="br0">)</span> #:transparent<span class="br0">)</span><br>  <span class="br0">(</span><span class="kw1">define</span> ε <span class="nu0">0.000001</span><span class="br0">)</span><br>  <span class="br0">(</span><span class="kw1">define</span> <span class="br0">(</span>neq? x y<span class="br0">)</span> <span class="br0">(</span><span class="kw1">not</span> <span class="br0">(</span><span class="kw1">eq?</span> x y<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>  <span class="br0">(</span><span class="kw1">define</span> <span class="br0">(</span>ray<span class="sy0">-</span>cross<span class="sy0">-</span>seg? r <span class="kw1">s</span><span class="br0">)</span><br>    <span class="br0">(</span><span class="kw1">let*</span> <span class="br0">(</span><span class="br0">[</span>Ax <span class="br0">(</span>seg<span class="sy0">-</span>Ax <span class="kw1">s</span><span class="br0">)</span><span class="br0">]</span> <span class="br0">[</span>Ay <span class="br0">(</span>seg<span class="sy0">-</span>Ay <span class="kw1">s</span><span class="br0">)</span><span class="br0">]</span><br>           <span class="br0">[</span>Bx <span class="br0">(</span>seg<span class="sy0">-</span>Bx <span class="kw1">s</span><span class="br0">)</span><span class="br0">]</span> <span class="br0">[</span>By <span class="br0">(</span>seg<span class="sy0">-</span>By <span class="kw1">s</span><span class="br0">)</span><span class="br0">]</span><br>           <span class="br0">[</span>Px <span class="br0">(</span>point<span class="sy0">-</span>x r<span class="br0">)</span><span class="br0">]</span> <span class="br0">[</span>Pyo <span class="br0">(</span>point<span class="sy0">-</span>y r<span class="br0">)</span><span class="br0">]</span><br>           <span class="br0">[</span>Py <span class="br0">(</span><span class="sy0">+</span> Pyo <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="kw1">or</span> <span class="br0">(</span><span class="kw1">eq?</span> Pyo Ay<span class="br0">)</span> <br>                              <span class="br0">(</span><span class="kw1">eq?</span> Pyo By<span class="br0">)</span><span class="br0">)</span> <br>                          ε <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><br>&nbsp;<br>      <span class="br0">(</span><span class="kw1">define</span> Ax2 <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">&lt;</span> Ay By<span class="br0">)</span> Ax Bx<span class="br0">)</span><span class="br0">)</span><br>      <span class="br0">(</span><span class="kw1">define</span> Ay2 <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">&lt;</span> Ay By<span class="br0">)</span> Ay By<span class="br0">)</span><span class="br0">)</span><br>      <span class="br0">(</span><span class="kw1">define</span> Bx2 <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">&lt;</span> Ay By<span class="br0">)</span> Bx Ax<span class="br0">)</span><span class="br0">)</span><br>      <span class="br0">(</span><span class="kw1">define</span> By2 <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">&lt;</span> Ay By<span class="br0">)</span> By Ay<span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>      <span class="br0">(</span><span class="kw1">cond</span> <span class="br0">[</span><span class="br0">(</span><span class="kw1">or</span> <span class="br0">(</span><span class="sy0">&gt;</span> Py <span class="br0">(</span><span class="kw1">max</span> Ay By<span class="br0">)</span><span class="br0">)</span> <span class="br0">(</span><span class="sy0">&lt;</span> Py <span class="br0">(</span><span class="kw1">min</span> Ay By<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> #f<span class="br0">]</span><br>            <span class="br0">[</span><span class="br0">(</span><span class="sy0">&gt;</span> Px <span class="br0">(</span><span class="kw1">max</span> Ax Bx<span class="br0">)</span><span class="br0">)</span> #f<span class="br0">]</span><br>            <span class="br0">[</span><span class="kw1">else</span> <span class="br0">(</span><span class="kw1">cond</span> <br>                <span class="br0">[</span><span class="br0">(</span><span class="sy0">&lt;</span> Px <span class="br0">(</span><span class="kw1">min</span> Ax Bx<span class="br0">)</span><span class="br0">)</span> #t<span class="br0">]</span><br>                <span class="br0">[</span><span class="kw1">else</span><br>                 <span class="br0">(</span><span class="kw1">let</span> <span class="br0">(</span><span class="br0">[</span>red <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span>neq? Ax2 Bx2<span class="br0">)</span><br>                               <span class="br0">(</span><span class="sy0">/</span> <span class="br0">(</span><span class="sy0">-</span> By2 Ay2<span class="br0">)</span> <span class="br0">(</span><span class="sy0">-</span> Bx2 Ax2<span class="br0">)</span><span class="br0">)</span><br>                               <span class="sy0">+</span>inf.0<span class="br0">)</span><span class="br0">]</span><br>                      <span class="br0">[</span>blue <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span>neq? Ax2 Px<span class="br0">)</span><br>                                <span class="br0">(</span><span class="sy0">/</span> <span class="br0">(</span><span class="sy0">-</span> Py Ay2<span class="br0">)</span> <span class="br0">(</span><span class="sy0">-</span> Px Ax2<span class="br0">)</span><span class="br0">)</span><br>                                 <span class="sy0">+</span>inf.0<span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><br>                   <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span><span class="sy0">&gt;=</span> blue red<span class="br0">)</span> #t #f<span class="br0">)</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>  <span class="br0">(</span><span class="kw1">define</span> <span class="br0">(</span>point<span class="sy0">-</span>in<span class="sy0">-</span>polygon? point polygon<span class="br0">)</span><br>    <span class="br0">(</span><span class="kw1">odd?</span> <br>     <span class="br0">(</span>for<span class="sy0">/</span>fold <span class="br0">(</span><span class="br0">[</span>c <span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span> <span class="br0">(</span><span class="br0">[</span>seg polygon<span class="br0">]</span><span class="br0">)</span><br>       <span class="br0">(</span><span class="sy0">+</span> c <span class="br0">(</span><span class="kw1">if</span> <span class="br0">(</span>ray<span class="sy0">-</span>cross<span class="sy0">-</span>seg? point seg<span class="br0">)</span> <span class="nu0">1</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span>require 'pip<span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">define</span> test<span class="sy0">-</span>point<span class="sy0">-</span><span class="kw1">list</span><br>  <span class="br0">(</span><span class="kw1">list</span><br>   <span class="br0">(</span>point <span class="nu0">5.0</span>    <span class="nu0">5.0</span><span class="br0">)</span> <br>   <span class="br0">(</span>point <span class="nu0">5.0</span>    <span class="nu0">8.0</span><span class="br0">)</span> <br>   <span class="br0">(</span>point <span class="sy0">-</span><span class="nu0">10.0</span>  <span class="nu0">5.0</span><span class="br0">)</span> <br>   <span class="br0">(</span>point  <span class="nu0">0.0</span>   <span class="nu0">5.0</span><span class="br0">)</span> <br>   <span class="br0">(</span>point <span class="nu0">10.0</span>   <span class="nu0">5.0</span><span class="br0">)</span> <br>   <span class="br0">(</span>point  <span class="nu0">8.0</span>   <span class="nu0">5.0</span><span class="br0">)</span> <br>   <span class="br0">(</span>point <span class="nu0">10.0</span>  <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">define</span> square<br>  <span class="br0">(</span><span class="kw1">list</span> <span class="br0">(</span>seg <span class="nu0">0.0</span>   <span class="nu0">0.0</span>  <span class="nu0">10.0</span>   <span class="nu0">0.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg <span class="nu0">10.0</span>  <span class="nu0">0.0</span>  <span class="nu0">10.0</span>  <span class="nu0">10.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg <span class="nu0">10.0</span>  <span class="nu0">10.0</span>  <span class="nu0">0.0</span>  <span class="nu0">10.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg <span class="nu0">0.0</span>   <span class="nu0">0.0</span>  <span class="nu0">0.0</span>   <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">define</span> exagon<br>  <span class="br0">(</span><span class="kw1">list</span> <span class="br0">(</span>seg  <span class="nu0">3.0</span>   <span class="nu0">0.0</span>   <span class="nu0">7.0</span>   <span class="nu0">0.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg  <span class="nu0">7.0</span>   <span class="nu0">0.0</span>  <span class="nu0">10.0</span>   <span class="nu0">5.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg <span class="nu0">10.0</span>   <span class="nu0">5.0</span>   <span class="nu0">7.0</span>  <span class="nu0">10.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg  <span class="nu0">7.0</span>  <span class="nu0">10.0</span>   <span class="nu0">3.0</span>  <span class="nu0">10.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg  <span class="nu0">0.0</span>   <span class="nu0">5.0</span>   <span class="nu0">3.0</span>   <span class="nu0">10.0</span><span class="br0">)</span> <br>        <span class="br0">(</span>seg  <span class="nu0">3.0</span>   <span class="nu0">0.0</span> <span class="nu0">0.0</span>   <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span><span class="kw1">define</span> <span class="br0">(</span>test<span class="sy0">-</span>figure fig name<span class="br0">)</span><br>  <span class="br0">(</span>printf <span class="st0">"<span class="es0">\n</span>testing ~a: <span class="es0">\n</span>"</span> name<span class="br0">)</span><br>  <span class="br0">(</span>for <span class="br0">(</span><span class="br0">[</span>p test<span class="sy0">-</span>point<span class="sy0">-</span><span class="kw1">list</span><span class="br0">]</span><span class="br0">)</span><br>    <span class="br0">(</span>printf <span class="st0">"testing ~v: ~a<span class="es0">\n</span>"</span>  p <span class="br0">(</span>point<span class="sy0">-</span>in<span class="sy0">-</span>polygon? p fig<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br><span class="br0">(</span>test<span class="sy0">-</span>figure square <span class="st0">"square"</span><span class="br0">)</span><br><span class="br0">(</span>test<span class="sy0">-</span>figure exagon <span class="st0">"exagon"</span><span class="br0">)</span><br>&nbsp;</pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>testing square: 
testing (point 5.0 5.0): #t
testing (point 5.0 8.0): #t
testing (point -10.0 5.0): #f
testing (point 0.0 5.0): #f
testing (point 10.0 5.0): #t
testing (point 8.0 5.0): #t
testing (point 10.0 10.0): #f

testing exagon: 
testing (point 5.0 5.0): #t
testing (point 5.0 8.0): #t
testing (point -10.0 5.0): #f
testing (point 0.0 5.0): #f
testing (point 10.0 5.0): #t
testing (point 8.0 5.0): #t
testing (point 10.0 10.0): #f
</pre>
<h2><span class="mw-headline" id="REXX"><a href="https://rosettacode.org/wiki/Category:REXX" title="Category:REXX">REXX</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=29" title="Edit section: REXX">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Over half of the REXX program is devoted to specifying/defining/assigning the points for the test cases and for the various polygons.
</p><p>Code was added to facilitate easier specification of polygon sides by just specifying their &nbsp; <i>vertices</i> &nbsp; instead of specifying their &nbsp; <i>line segments</i>.
</p>
<pre class="rexx highlighted_source"><span class="coMULTI">/*REXX program verifies if a   horizontal ray   from   point P   intersects  a polygon. */</span><br><span class="kw1">call</span> points <span class="nu0">5</span> <span class="nu0">5</span>,       <span class="nu0">5</span> <span class="nu0">8</span>,       -<span class="nu0">10</span>  <span class="nu0">5</span>,       <span class="nu0">0</span>  <span class="nu0">5</span>,       <span class="nu0">10</span>  <span class="nu0">5</span>,       <span class="nu0">8</span>  <span class="nu0">5</span>,       <span class="nu0">10</span> <span class="nu0">10</span><br>A=<span class="nu0">2.5</span>;    B=<span class="nu0">7.5</span>                            <span class="coMULTI">/* ◄───── used for shorter arguments (below).*/</span><br><span class="kw1">call</span> poly <span class="nu0">0</span> <span class="nu0">0</span>, <span class="nu0">10</span> <span class="nu0">0</span>,  <span class="nu0">10</span> <span class="nu0">10</span>,  <span class="nu0">0</span> <span class="nu0">10</span>                            &nbsp;;   <span class="kw1">call</span> test <span class="st0">'square'</span><br><span class="kw1">call</span> poly <span class="nu0">0</span> <span class="nu0">0</span>, <span class="nu0">10</span> <span class="nu0">0</span>,  <span class="nu0">10</span> <span class="nu0">10</span>,  <span class="nu0">0</span> <span class="nu0">10</span>,  A  A,   B  A,   B  B, A B&nbsp;;   <span class="kw1">call</span> test <span class="st0">'square hole'</span><br><span class="kw1">call</span> poly <span class="nu0">0</span> <span class="nu0">0</span>,  A A,   <span class="nu0">0</span> <span class="nu0">10</span>,  A  B,  B  B,  <span class="nu0">10</span> <span class="nu0">10</span>,  <span class="nu0">10</span>  <span class="nu0">0</span>     &nbsp;;   <span class="kw1">call</span> test <span class="st0">'irregular'</span><br><span class="kw1">call</span> poly <span class="nu0">3</span> <span class="nu0">0</span>,  <span class="nu0">7</span> <span class="nu0">0</span>,  <span class="nu0">10</span>  <span class="nu0">5</span>,  <span class="nu0">7</span> <span class="nu0">10</span>,  <span class="nu0">3</span> <span class="nu0">10</span>,   <span class="nu0">0</span>  <span class="nu0">5</span>             &nbsp;;   <span class="kw1">call</span> test <span class="st0">'hexagon'</span><br><span class="kw1">exit</span>                                             <span class="coMULTI">/*stick a fork in it,  we're all done. */</span><br><span class="coMULTI">/*──────────────────────────────────────────────────────────────────────────────────────*/</span><br>in$out: <span class="kw1">procedure</span> <span class="kw1">expose</span> point<span class="sy0">.</span> poly<span class="sy0">.</span>;     <span class="kw1">parse</span> <span class="kw1">arg</span> p;              #=<span class="nu0">0</span><br>                     <span class="kw1">do</span> side=<span class="nu0">1</span>  <span class="kw2">to</span> poly<span class="sy0">.</span>0  <span class="kw2">by</span> <span class="nu0">2</span>;   #=# +intersect<span class="br0">(</span>p, side<span class="br0">)</span>;   <span class="kw3">end</span> <span class="coMULTI">/*side*/</span><br>        <span class="kw1">return</span> # <span class="sy0">//</span> <span class="nu0">2</span>                            <span class="coMULTI">/*ODD  is inside.     EVEN  is outside.*/</span><br><span class="coMULTI">/*──────────────────────────────────────────────────────────────────────────────────────*/</span><br>intersect: <span class="kw1">procedure</span> <span class="kw1">expose</span> point<span class="sy0">.</span> poly<span class="sy0">.</span>;         <span class="kw1">parse</span> <span class="kw1">arg</span>&nbsp;?,s;                  sp=s + <span class="nu0">1</span><br>           epsilon= <span class="st0">'1e'</span> <span class="sy0">||</span> <span class="br0">(</span>-<span class="kw2">digits</span><span class="br0">(</span><span class="br0">)</span>&nbsp;%2<span class="br0">)</span>;       infinity= <span class="st0">"1e"</span> <span class="sy0">||</span> <span class="br0">(</span><span class="kw2">digits</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">*</span><span class="nu0">2</span><span class="br0">)</span><br>           Px=point<span class="sy0">.</span>?<span class="sy0">.</span>x;      Ax=poly<span class="sy0">.</span>s<span class="sy0">.</span>x;        Bx=poly<span class="sy0">.</span>sp<span class="sy0">.</span>x<br>           Py=point<span class="sy0">.</span>?<span class="sy0">.</span>y;      Ay=poly<span class="sy0">.</span>s<span class="sy0">.</span>y;        <span class="kw2">By</span>=poly<span class="sy0">.</span>sp<span class="sy0">.</span>y  <span class="coMULTI">/* [↓]  do a vertex swap*/</span><br>           <span class="kw1">if</span> Ay<span class="sy0">&gt;</span><span class="kw2">By</span>           <span class="kw3">then</span> <span class="kw1">parse</span>  <span class="kw2">value</span>   Ax Ay Bx <span class="kw2">By</span>    <span class="kw2">with</span>    Bx <span class="kw2">By</span> Ax Ay<br>           <span class="kw1">if</span> Py=Ay <span class="sy0">|</span> Py=<span class="kw2">By</span>   <span class="kw3">then</span> Py=Py + epsilon<br>           <span class="kw1">if</span> Py<span class="sy0">&lt;</span>Ay <span class="sy0">|</span> Py<span class="sy0">&gt;</span><span class="kw2">By</span> <span class="sy0">|</span> Px<span class="sy0">&gt;</span><span class="kw6">max</span><span class="br0">(</span>Ax, Bx<span class="br0">)</span>  <span class="kw3">then</span>  <span class="kw1">return</span> <span class="nu0">0</span><br>           <span class="kw1">if</span>                 Px<span class="sy0">&lt;</span><span class="kw6">min</span><span class="br0">(</span>Ax, Bx<span class="br0">)</span>  <span class="kw3">then</span>  <span class="kw1">return</span> <span class="nu0">1</span><br>           <span class="kw1">if</span> Ax<span class="sy0">\</span>=Bx          <span class="kw3">then</span> red = <span class="br0">(</span>By-Ay<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>Bx-Ax<span class="br0">)</span><br>                              <span class="kw3">else</span> red = infinity<br>           <span class="kw1">if</span> Ax<span class="sy0">\</span>=Px          <span class="kw3">then</span>                  <span class="kw1">return</span>  <span class="br0">(</span>Py-Ay<span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>Px-Ax<span class="br0">)</span>  <span class="sy0">&gt;</span>=  red<br>           <span class="kw1">return</span>  <span class="nu0">1</span><br><span class="coMULTI">/*──────────────────────────────────────────────────────────────────────────────────────*/</span><br>points: wx=<span class="nu0">0</span>;  wy=<span class="nu0">0</span>;     <span class="kw1">do</span> j=<span class="nu0">1</span>  <span class="kw2">for</span> <span class="kw1">arg</span><span class="br0">(</span><span class="br0">)</span>;         <span class="kw1">parse</span> <span class="kw2">value</span>  <span class="kw1">arg</span><span class="br0">(</span>j<span class="br0">)</span>    <span class="kw2">with</span>   xx  yy<br>                         wx=<span class="kw6">max</span><span class="br0">(</span>wx, <span class="kw6">length</span><span class="br0">(</span>xx<span class="br0">)</span> <span class="br0">)</span>;   <span class="kw1">call</span>  <span class="kw2">value</span>  <span class="st0">'POINT.'</span>j<span class="st0">".X"</span>,   xx<br>                         wy=<span class="kw6">max</span><span class="br0">(</span>wy, <span class="kw6">length</span><span class="br0">(</span>yy<span class="br0">)</span> <span class="br0">)</span>;   <span class="kw1">call</span>  <span class="kw2">value</span>  <span class="st0">'POINT.'</span>j<span class="st0">".Y"</span>,       yy<br>                         <span class="kw3">end</span>   <span class="coMULTI">/*j*/</span><br>        <span class="kw1">call</span> <span class="kw2">value</span> point<span class="sy0">.</span>0,  j-<span class="nu0">1</span>                         <span class="coMULTI">/*define the number of points. */</span><br>        <span class="kw1">return</span>                                           <span class="coMULTI">/* [↑]  adjust J  (for DO loop)*/</span><br><span class="coMULTI">/*──────────────────────────────────────────────────────────────────────────────────────*/</span><br>poly:   @= <span class="st0">'POLY.'</span>;      <span class="kw1">parse</span> <span class="kw1">arg</span> Fx Fy                 <span class="coMULTI">/* [↓]  process the X,Y points.*/</span><br>        n=<span class="nu0">0</span><br>                 <span class="kw1">do</span> j=<span class="nu0">1</span>  <span class="kw2">for</span> <span class="kw1">arg</span><span class="br0">(</span><span class="br0">)</span>;      n=n + <span class="nu0">1</span>;   <span class="kw1">parse</span> <span class="kw2">value</span> <span class="kw1">arg</span><span class="br0">(</span>j<span class="br0">)</span>   <span class="kw2">with</span>   xx yy<br>                 <span class="kw1">call</span> <span class="kw2">value</span> @ <span class="sy0">||</span> n<span class="st0">'.X'</span>,  xx&nbsp;;       <span class="kw1">call</span> <span class="kw2">value</span>  @ <span class="sy0">||</span> n<span class="st0">".Y"</span>, yy<br>                 <span class="kw1">if</span> n<span class="sy0">//</span><span class="nu0">2</span>  <span class="kw3">then</span> <span class="kw1">iterate</span>;  n=n + <span class="nu0">1</span>         <span class="coMULTI">/*Inside? Then skip this point.*/</span><br>                 <span class="kw1">call</span> <span class="kw2">value</span> @ <span class="sy0">||</span> n<span class="st0">'.X'</span>,  xx&nbsp;;       <span class="kw1">call</span> <span class="kw2">value</span>  @ <span class="sy0">||</span> n<span class="st0">".Y"</span>, yy<br>                 <span class="kw3">end</span>   <span class="coMULTI">/*j*/</span><br>        n=n + <span class="nu0">1</span>                                          <span class="coMULTI">/*POLY.0  is # segments(sides).*/</span><br>        <span class="kw1">call</span> <span class="kw2">value</span> @ <span class="sy0">||</span> n<span class="st0">'.X'</span>, Fx;       <span class="kw1">call</span> <span class="kw2">value</span> @ <span class="sy0">||</span> n<span class="st0">".Y"</span>, Fy;     <span class="kw1">call</span> <span class="kw2">value</span> @<span class="st0">'0'</span>, n<br>        <span class="kw1">return</span><br><span class="coMULTI">/*──────────────────────────────────────────────────────────────────────────────────────*/</span><br>test:   <span class="kw1">say</span>;     <span class="kw1">do</span> k=<span class="nu0">1</span>  <span class="kw2">for</span> point<span class="sy0">.</span>0;    w=wx + wy + <span class="nu0">2</span>   <span class="coMULTI">/*W, WX, WY ≡are various widths*/</span><br>                 <span class="kw1">say</span> <span class="kw6">right</span><span class="br0">(</span><span class="st0">'  ['</span><span class="kw1">arg</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="st0">"]  point:"</span>,  <span class="nu0">30</span><span class="br0">)</span>,<br>                     <span class="kw6">right</span><span class="br0">(</span> <span class="kw6">right</span><span class="br0">(</span>point<span class="sy0">.</span>k<span class="sy0">.</span>x, wx<span class="br0">)</span><span class="st0">', '</span><span class="kw6">right</span><span class="br0">(</span>point<span class="sy0">.</span>k<span class="sy0">.</span>y, wy<span class="br0">)</span>, w<span class="br0">)</span>     <span class="st0">"  is  "</span>,<br>                     <span class="kw6">right</span><span class="br0">(</span> <span class="kw6">word</span><span class="br0">(</span><span class="st0">'outside inside'</span>,  in$out<span class="br0">(</span>k<span class="br0">)</span> + <span class="nu0">1</span><span class="br0">)</span>,  <span class="nu0">7</span><span class="br0">)</span><br>                 <span class="kw3">end</span>   <span class="coMULTI">/*k*/</span><br>        <span class="kw1">return</span>                                           <span class="coMULTI">/* [↑] format the output nicely*/</span></pre>
<div>
<dl><dt>output <span style="font-weight:normal">&nbsp; when using the default inputs:</span></dt></dl></div>
<pre>              [square]  point:   5,  5   is    inside
              [square]  point:   5,  8   is    inside
              [square]  point: -10,  5   is   outside
              [square]  point:   0,  5   is   outside
              [square]  point:  10,  5   is    inside
              [square]  point:   8,  5   is    inside
              [square]  point:  10, 10   is   outside

         [square hole]  point:   5,  5   is   outside
         [square hole]  point:   5,  8   is    inside
         [square hole]  point: -10,  5   is   outside
         [square hole]  point:   0,  5   is   outside
         [square hole]  point:  10,  5   is    inside
         [square hole]  point:   8,  5   is    inside
         [square hole]  point:  10, 10   is   outside

           [irregular]  point:   5,  5   is    inside
           [irregular]  point:   5,  8   is   outside
           [irregular]  point: -10,  5   is   outside
           [irregular]  point:   0,  5   is   outside
           [irregular]  point:  10,  5   is    inside
           [irregular]  point:   8,  5   is    inside
           [irregular]  point:  10, 10   is   outside

             [hexagon]  point:   5,  5   is    inside
             [hexagon]  point:   5,  8   is    inside
             [hexagon]  point: -10,  5   is   outside
             [hexagon]  point:   0,  5   is   outside
             [hexagon]  point:  10,  5   is    inside
             [hexagon]  point:   8,  5   is    inside
             [hexagon]  point:  10, 10   is   outside
</pre>
<h2><span class="mw-headline" id="Rust"><a href="https://rosettacode.org/wiki/Category:Rust" title="Category:Rust">Rust</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=30" title="Edit section: Rust">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Python">Python</a></div>
<pre class="text highlighted_source">use std::f64;<br>&nbsp;<br>const _EPS: f64 = 0.00001;<br>const _MIN: f64 = f64::MIN_POSITIVE;<br>const _MAX: f64 = f64::MAX;<br>&nbsp;<br>#[derive(Clone)]<br>struct Point {<br>    x: f64,<br>    y: f64,<br>}<br>&nbsp;<br>#[derive(Clone)]<br>struct Edge {<br>    pt1: Point,<br>    pt2: Point,<br>}<br>&nbsp;<br>impl Edge {<br>    fn new(pt1: (f64, f64), pt2: (f64, f64)) -&gt; Edge {<br>        Edge {<br>            pt1: Point { x: pt1.0, y: pt1.1 },<br>            pt2: Point { x: pt2.0, y: pt2.1 },<br>        }<br>    }<br>}<br>&nbsp;<br>struct Polygon {<br>    edges: Vec&lt;Edge&gt;, // Polygon has to be created with counter-clockwise coordinates<br>}<br>&nbsp;<br>fn pt_in_polygon(pt: &amp;Point, poly: &amp;Polygon) -&gt; bool {<br>    let count = poly.edges<br>        .iter()<br>        .filter(|edge| ray_intersect_seg(pt, edge))<br>        .count();<br>&nbsp;<br>    count&nbsp;% 2 == 1<br>}<br>&nbsp;<br>fn ray_intersect_seg(p: &amp;Point, edge: &amp;Edge) -&gt; bool {<br>    let mut pt = p.clone();<br>    let (mut a, mut b): (&amp;Point, &amp;Point) = (&amp;edge.pt1, &amp;edge.pt2);<br>    if a.y &gt; b.y {<br>        std::mem::swap(&amp;mut a, &amp;mut b);<br>    }<br>    if pt.y == a.y || pt.y == b.y {<br>        pt.y += _EPS;<br>    }<br>&nbsp;<br>    if (pt.y &gt; b.y || pt.y &lt; a.y) || pt.x &gt; a.x.max(b.x) {<br>        false<br>    } else if pt.x &lt; a.x.min(b.x) {<br>        true<br>    } else {<br>        let m_red = if (a.x - b.x).abs() &gt; _MIN {<br>            (b.y - a.y) / (b.x - a.x)<br>        } else {<br>            _MAX<br>        };<br>        let m_blue = if (a.x - pt.x).abs() &gt; _MIN {<br>            (pt.y - a.y) / (pt.x - a.x)<br>        } else {<br>            _MAX<br>        };<br>        m_blue &gt;= m_red<br>    }<br>}<br>&nbsp;<br>fn main() {<br>    let p = |x, y| Point { x, y };<br>    let testpoints = [p(5.0, 5.0), p(5.0, 8.0), p(-10.0, 5.0), p(0.0, 5.0), p(10.0, 5.0), p(8.0, 5.0), p(10.0, 10.0)];<br>    let poly_square = Polygon {<br>        edges: vec![<br>            Edge::new((0.0, 0.0), (10.0, 0.0)),<br>            Edge::new((10.0, 0.0), (10.0, 10.0)),<br>            Edge::new((10.0, 10.0), (0.0, 10.0)),<br>            Edge::new((0.0, 10.0), (0.0, 0.0)),<br>        ],<br>    };<br>    let poly_square_hole = Polygon {<br>        edges: vec![<br>            Edge::new((0.0, 0.0), (10.0, 0.0)),<br>            Edge::new((10.0, 0.0), (10.0, 10.0)),<br>            Edge::new((10.0, 10.0), (0.0, 10.0)),<br>            Edge::new((0.0, 10.0), (0.0, 0.0)),<br>            Edge::new((2.5, 2.5), (7.5, 2.5)),<br>            Edge::new((7.5, 2.5), (7.5, 7.5)),<br>            Edge::new((7.5, 7.5), (2.5, 7.5)),<br>            Edge::new((2.5, 7.5), (2.5, 2.5)),<br>        ],<br>    };<br>    let poly_strange = Polygon {<br>        edges: vec![<br>            Edge::new((0.0, 0.0), (2.5, 2.5)),<br>            Edge::new((2.5, 2.5), (0.0, 10.0)),<br>            Edge::new((0.0, 10.0), (2.5, 7.5)),<br>            Edge::new((2.5, 7.5), (7.5, 7.5)),<br>            Edge::new((7.5, 7.5), (10.0, 10.0)),<br>            Edge::new((10.0, 10.0), (10.0, 0.0)),<br>            Edge::new((10.0, 0.0), (2.5, 2.5)),<br>        ],<br>    };<br>    let poly_hexagon = Polygon {<br>        edges: vec![<br>            Edge::new((3.0, 0.0), (7.0, 0.0)),<br>            Edge::new((7.0, 0.0), (10.0, 5.0)),<br>            Edge::new((10.0, 5.0), (7.0, 10.0)),<br>            Edge::new((7.0, 10.0), (3.0, 10.0)),<br>            Edge::new((3.0, 10.0), (0.0, 5.0)),<br>            Edge::new((0.0, 5.0), (3.0, 0.0)),<br>        ],<br>    };<br>    print!("\nSquare&nbsp;:");<br>    for pt in &amp;testpoints {<br>        print!(" {:?}", pt_in_polygon(pt, &amp;poly_square));<br>    }<br>    print!("\nSquare with hole:");<br>    for pt in &amp;testpoints {<br>        print!(" {:?}", pt_in_polygon(pt, &amp;poly_square_hole));<br>    }<br>    print!("\nStrange polygon&nbsp;:");<br>    for pt in &amp;testpoints {<br>        print!(" {:?}", pt_in_polygon(pt, &amp;poly_strange));<br>    }<br>    print!("\nHexagon&nbsp;:");<br>    for pt in &amp;testpoints {<br>        print!(" {:?}", pt_in_polygon(pt, &amp;poly_hexagon));<br>    }<br>    println!();<br>}</pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>Square&nbsp;: true true false false true true false
Square with hole: false true false false true true false
Strange polygon&nbsp;: true false false false true true false
Hexagon&nbsp;: true true false false true true false
</pre>
<h2><span class="mw-headline" id="Scala"><a href="https://rosettacode.org/wiki/Category:Scala" title="Category:Scala">Scala</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=31" title="Edit section: Scala">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#D">D</a></div>
<pre class="scala highlighted_source"><a href="http://scala-lang.org/"><span class="kw1">package</span></a> scala.<span class="me1">ray_casting</span><br>&nbsp;<br><a href="http://scala-lang.org/"><span class="kw1">case</span></a> <a href="http://scala-lang.org/"><span class="kw1">class</span></a> Edge<span class="br0">(</span><span class="sy0">_</span>1<span class="sy0">:</span> <span class="br0">(</span>Double, Double<span class="br0">)</span>, <span class="sy0">_</span>2<span class="sy0">:</span> <span class="br0">(</span>Double, Double<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span><br>  <a href="http://scala-lang.org/"><span class="kw1">import</span></a> Math.<span class="sy0">_</span><br>  <a href="http://scala-lang.org/"><span class="kw1">import</span></a> Double.<span class="sy0">_</span><br>&nbsp;<br>  <a href="http://scala-lang.org/"><span class="kw1">def</span></a> raySegI<span class="br0">(</span>p<span class="sy0">:</span> <span class="br0">(</span>Double, Double<span class="br0">)</span><span class="br0">)</span><span class="sy0">:</span> Boolean <span class="sy0">=</span> <span class="br0">{</span><br>    <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span><span class="sy0">_</span>1.<span class="sy0">_</span>2 <span class="sy0">&gt;</span> <span class="sy0">_</span>2.<span class="sy0">_</span>2<span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">return</span></a> Edge<span class="br0">(</span><span class="sy0">_</span>2, <span class="sy0">_</span>1<span class="br0">)</span>.<span class="me1">raySegI</span><span class="br0">(</span>p<span class="br0">)</span><br>    <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>p.<span class="sy0">_</span>2 <span class="sy0">==</span> <span class="sy0">_</span>1.<span class="sy0">_</span>2 || p.<span class="sy0">_</span>2 <span class="sy0">==</span> <span class="sy0">_</span>2.<span class="sy0">_</span>2<span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">return</span></a> raySegI<span class="br0">(</span><span class="br0">(</span>p.<span class="sy0">_</span>1, p.<span class="sy0">_</span>2 + epsilon<span class="br0">)</span><span class="br0">)</span><br>    <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>p.<span class="sy0">_</span>2 <span class="sy0">&gt;</span> <span class="sy0">_</span>2.<span class="sy0">_</span>2 || p.<span class="sy0">_</span>2 <span class="sy0">&lt;</span> <span class="sy0">_</span>1.<span class="sy0">_</span>2 || p.<span class="sy0">_</span>1 <span class="sy0">&gt;</span> max<span class="br0">(</span><span class="sy0">_</span>1.<span class="sy0">_</span>1, <span class="sy0">_</span>2.<span class="sy0">_</span>1<span class="br0">)</span><span class="br0">)</span><br>      <a href="http://scala-lang.org/"><span class="kw1">return</span></a> <a href="http://scala-lang.org/"><span class="kw1">false</span></a><br>    <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>p.<span class="sy0">_</span>1 <span class="sy0">&lt;</span> min<span class="br0">(</span><span class="sy0">_</span>1.<span class="sy0">_</span>1, <span class="sy0">_</span>2.<span class="sy0">_</span>1<span class="br0">)</span><span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">return</span></a> <a href="http://scala-lang.org/"><span class="kw1">true</span></a><br>    <a href="http://scala-lang.org/"><span class="kw1">val</span></a> blue <span class="sy0">=</span> <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>abs<span class="br0">(</span><span class="sy0">_</span>1.<span class="sy0">_</span>1 - p.<span class="sy0">_</span>1<span class="br0">)</span> <span class="sy0">&gt;</span> MinValue<span class="br0">)</span> <span class="br0">(</span>p.<span class="sy0">_</span>2 - <span class="sy0">_</span>1.<span class="sy0">_</span>2<span class="br0">)</span> / <span class="br0">(</span>p.<span class="sy0">_</span>1 - <span class="sy0">_</span>1.<span class="sy0">_</span>1<span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">else</span></a> MaxValue<br>    <a href="http://scala-lang.org/"><span class="kw1">val</span></a> red <span class="sy0">=</span> <a href="http://scala-lang.org/"><span class="kw1">if</span></a> <span class="br0">(</span>abs<span class="br0">(</span><span class="sy0">_</span>1.<span class="sy0">_</span>1 - <span class="sy0">_</span>2.<span class="sy0">_</span>1<span class="br0">)</span> <span class="sy0">&gt;</span> MinValue<span class="br0">)</span> <span class="br0">(</span><span class="sy0">_</span>2.<span class="sy0">_</span>2 - <span class="sy0">_</span>1.<span class="sy0">_</span>2<span class="br0">)</span> / <span class="br0">(</span><span class="sy0">_</span>2.<span class="sy0">_</span>1 - <span class="sy0">_</span>1.<span class="sy0">_</span>1<span class="br0">)</span> <a href="http://scala-lang.org/"><span class="kw1">else</span></a> MaxValue<br>    blue <span class="sy0">&gt;=</span> red<br>  <span class="br0">}</span><br>&nbsp;<br>  <a href="http://scala-lang.org/"><span class="kw1">final</span></a> <a href="http://scala-lang.org/"><span class="kw1">val</span></a> epsilon <span class="sy0">=</span> <span class="nu0">0.00001</span><br><span class="br0">}</span><br>&nbsp;<br><a href="http://scala-lang.org/"><span class="kw1">case</span></a> <a href="http://scala-lang.org/"><span class="kw1">class</span></a> Figure<span class="br0">(</span>name<span class="sy0">:</span> String, edges<span class="sy0">:</span> Seq<span class="br0">[</span>Edge<span class="br0">]</span><span class="br0">)</span> <span class="br0">{</span><br>  <a href="http://scala-lang.org/"><span class="kw1">def</span></a> contains<span class="br0">(</span>p<span class="sy0">:</span> <span class="br0">(</span>Double, Double<span class="br0">)</span><span class="br0">)</span> <span class="sy0">=</span> edges.<span class="me1">count</span><span class="br0">(</span><span class="sy0">_</span>.<span class="me1">raySegI</span><span class="br0">(</span>p<span class="br0">)</span><span class="br0">)</span> <span class="sy0">%</span> <span class="nu0">2</span> <span class="sy0">!=</span> <span class="nu0">0</span><br><span class="br0">}</span><br>&nbsp;<br><a href="http://scala-lang.org/"><span class="kw1">object</span></a> Ray<span class="sy0">_</span>casting <a href="http://scala-lang.org/"><span class="kw1">extends</span></a> App <span class="br0">{</span><br>  <a href="http://scala-lang.org/"><span class="kw1">val</span></a> figures <span class="sy0">=</span> Seq<span class="br0">(</span>Figure<span class="br0">(</span><span class="st0">"Square"</span>, Seq<span class="br0">(</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>    <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<br>    Figure<span class="br0">(</span><span class="st0">"Square hole"</span>, Seq<span class="br0">(</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">2.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>,<span class="br0">(</span><span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<br>    Figure<span class="br0">(</span><span class="st0">"Strange"</span>, Seq<span class="br0">(</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">7.5</span>, <span class="nu0">7.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">2.5</span>, <span class="nu0">2.5</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span>,<br>    Figure<span class="br0">(</span><span class="st0">"Exagon"</span>, Seq<span class="br0">(</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">0.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>,<br>      <span class="br0">(</span><span class="br0">(</span><span class="nu0">7.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">10.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">5.0</span><span class="br0">)</span><span class="br0">)</span>, <span class="br0">(</span><span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">3.0</span>, <span class="nu0">0.0</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>  <a href="http://scala-lang.org/"><span class="kw1">val</span></a> points <span class="sy0">=</span> Seq<span class="br0">(</span><span class="br0">(</span><span class="nu0">5.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">5.0</span>, <span class="nu0">8.0</span><span class="br0">)</span>, <span class="br0">(</span>-<span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">0.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">8.0</span>, <span class="nu0">5.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">10.0</span>, <span class="nu0">10.0</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>  println<span class="br0">(</span><span class="st0">"points: "</span> + points<span class="br0">)</span><br>  <a href="http://scala-lang.org/"><span class="kw1">for</span></a> <span class="br0">(</span>f <span class="sy0">&lt;</span>- figures<span class="br0">)</span> <span class="br0">{</span><br>    println<span class="br0">(</span><span class="st0">"figure: "</span> + f.<span class="me1">name</span><span class="br0">)</span><br>    println<span class="br0">(</span><span class="st0">"        "</span> + f.<span class="me1">edges</span><span class="br0">)</span><br>    println<span class="br0">(</span><span class="st0">"result: "</span> + <span class="br0">(</span>points map f.<span class="me1">contains</span><span class="br0">)</span><span class="br0">)</span><br>  <span class="br0">}</span><br>&nbsp;<br>  <a href="http://scala-lang.org/"><span class="kw1">private</span></a> <a href="http://scala-lang.org/"><span class="kw1">implicit</span></a> <a href="http://scala-lang.org/"><span class="kw1">def</span></a> to<span class="sy0">_</span>edge<span class="br0">(</span>p<span class="sy0">:</span> <span class="br0">(</span><span class="br0">(</span>Double, Double<span class="br0">)</span>, <span class="br0">(</span>Double, Double<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">:</span> Edge <span class="sy0">=</span> Edge<span class="br0">(</span>p.<span class="sy0">_</span>1, p.<span class="sy0">_</span>2<span class="br0">)</span><br><span class="br0">}</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>points: List((5.0,5.0), (5.0,8.0), (-10.0,5.0), (0.0,5.0), (10.0,5.0), (8.0,5.0), (10.0,10.0))
figure: Square
        List(Edge((0.0,0.0),(10.0,0.0)), Edge((10.0,0.0),(10.0,10.0)), Edge((10.0,10.0),(0.0,10.0)), Edge((0.0,10.0),(0.0,0.0)))
result: List(true, true, false, false, true, true, false)
figure: Square hole
        List(Edge((0.0,0.0),(10.0,0.0)), Edge((10.0,0.0),(10.0,10.0)), Edge((10.0,10.0),(0.0,10.0)), Edge((0.0,10.0),(0.0,0.0)), Edge((2.5,2.5),(7.5,2.5)), Edge((7.5,2.5),(7.5,7.5)), Edge((7.5,7.5),(2.5,7.5)), Edge((2.5,7.5),(2.5,2.5)))
result: List(false, true, false, false, true, true, false)
figure: Strange
        List(Edge((0.0,0.0),(2.5,2.5)), Edge((2.5,2.5),(0.0,10.0)), Edge((0.0,10.0),(2.5,7.5)), Edge((2.5,7.5),(7.5,7.5)), Edge((7.5,7.5),(10.0,10.0)), Edge((10.0,10.0),(10.0,0.0)), Edge((10.0,0.0),(2.5,2.5)))
result: List(true, false, false, false, true, true, false)
figure: Exagon
        List(Edge((3.0,0.0),(7.0,0.0)), Edge((7.0,0.0),(10.0,5.0)), Edge((10.0,5.0),(7.0,10.0)), Edge((7.0,10.0),(3.0,10.0)), Edge((3.0,10.0),(0.0,5.0)), Edge((0.0,5.0),(3.0,0.0)))
result: List(true, true, false, false, true, true, false)
</pre>
<h2><span class="mw-headline" id="Smalltalk"><a href="https://rosettacode.org/wiki/Category:Smalltalk" title="Category:Smalltalk">Smalltalk</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=32" title="Edit section: Smalltalk">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta workswith"><b>Works with</b>: <a href="https://rosettacode.org/wiki/GNU_Smalltalk" title="GNU Smalltalk">GNU Smalltalk</a></div>
<p>The class Segment holds the code to test if a ray starting from a point (and going towards "right") intersects the segment (method <tt>doesIntersectRayFrom</tt>); while the class Polygon hosts the code to test if a point is inside the polygon (method <tt>pointInside</tt>).
</p>
<pre class="smalltalk highlighted_source"><span class="re0">Object</span> subclass: <span class="re0">Segment</span> <span class="br0">[</span><br>    |<span class="re3">pts</span>|<br>    <span class="re0">Segment</span> class &gt;&gt; new: <span class="re5">points</span> <span class="br0">[</span> |<span class="re3">a</span>|<br>      <span class="re6">a</span> <span class="sy0">:=</span> <span class="kw1">super</span> new.<br>      ^ a init: <span class="re5">points</span><br>    <span class="br0">]</span><br>    init: <span class="re5">points</span> <span class="br0">[</span> <span class="re5">pts</span> <span class="sy0">:=</span> <span class="re5">points</span> copy. ^self <span class="br0">]</span><br>    endPoints <span class="br0">[</span> ^pts <span class="br0">]</span><br>    <span class="coMULTI">"utility methods"</span><br>    first <span class="br0">[</span> ^ pts at: <span class="re5">1</span><span class="br0">]</span><br>    second <span class="br0">[</span> ^ pts at: <span class="re5">2</span><span class="br0">]</span><br>    leftmostEndPoint <span class="br0">[</span> <br>      ^ <span class="br0">(</span><span class="kw1">self</span> first x &gt; <span class="kw1">self</span> second x<span class="br0">)</span> ifTrue: <span class="br0">[</span> <span class="kw1">self</span> second <span class="br0">]</span> ifFalse: <span class="br0">[</span> <span class="kw1">self</span> first <span class="br0">]</span><br>    <span class="br0">]</span><br>    rightmostEndPoint <span class="br0">[</span><br>      ^ <span class="br0">(</span><span class="kw1">self</span> first x &gt; <span class="kw1">self</span> second x<span class="br0">)</span> ifTrue: <span class="br0">[</span> <span class="kw1">self</span> first <span class="br0">]</span> ifFalse: <span class="br0">[</span> <span class="kw1">self</span> second <span class="br0">]</span> <br>    <span class="br0">]</span><br>    topmostEndPoint <span class="br0">[</span><br>      ^ <span class="br0">(</span><span class="kw1">self</span> first y &gt; <span class="kw1">self</span> second y<span class="br0">)</span> ifTrue: <span class="br0">[</span> <span class="kw1">self</span> first <span class="br0">]</span> ifFalse: <span class="br0">[</span> <span class="kw1">self</span> second <span class="br0">]</span><br>    <span class="br0">]</span><br>    bottommostEndPoint <span class="br0">[</span><br>      ^ <span class="br0">(</span><span class="kw1">self</span> first y &gt; <span class="kw1">self</span> second y<span class="br0">)</span> ifTrue: <span class="br0">[</span> <span class="kw1">self</span> second <span class="br0">]</span> ifFalse: <span class="br0">[</span> <span class="kw1">self</span> first <span class="br0">]</span><br>    <span class="br0">]</span><br>&nbsp;<br>    slope <span class="br0">[</span><br>      <span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">1</span><span class="br0">)</span> x ~<span class="sy0">=</span> <span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">2</span><span class="br0">)</span> x<br>      ifTrue: <span class="br0">[</span> ^ <span class="br0">(</span><span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">1</span><span class="br0">)</span> y - <span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">2</span><span class="br0">)</span> y<span class="br0">)</span> / <span class="br0">(</span><span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">1</span><span class="br0">)</span> x - <span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">2</span><span class="br0">)</span> x<span class="br0">)</span> <span class="br0">]</span><br>      ifFalse: <span class="br0">[</span> ^ <span class="re0">FloatD</span> infinity <span class="br0">]</span><br>    <span class="br0">]</span><br>&nbsp;<br>    doesIntersectRayFrom: <span class="re5">point</span> <span class="br0">[</span> |p <span class="re0">A</span> <span class="re0">B</span>|<br>      <span class="br0">(</span><span class="re5">point</span> y <span class="sy0">=</span> <span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">1</span><span class="br0">)</span> y<span class="br0">)</span> | <span class="br0">(</span><span class="re5">point</span> y <span class="sy0">=</span> <span class="br0">(</span><span class="re5">pts</span> at: <span class="re5">2</span><span class="br0">)</span> y<span class="br0">)</span><br>      ifTrue: <span class="br0">[</span> <span class="re5">p</span> <span class="sy0">:=</span> <span class="re0">Point</span> x: <span class="br0">(</span><span class="re5">point</span> x<span class="br0">)</span> y: <span class="br0">(</span><span class="re5">point</span> y<span class="br0">)</span> + <span class="re5">0</span>.<span class="re5">00001</span> <span class="br0">]</span><br>      ifFalse: <span class="br0">[</span> <span class="re5">p</span> <span class="sy0">:=</span> <span class="re5">point</span> copy <span class="br0">]</span>.<br>      <span class="re0">A</span> <span class="sy0">:=</span> <span class="kw1">self</span> bottommostEndPoint.<br>      <span class="re0">B</span> <span class="sy0">:=</span> <span class="kw1">self</span> topmostEndPoint.<br>      <span class="br0">(</span><span class="re5">p</span> y &lt; <span class="re0">A</span> y<span class="br0">)</span> | <span class="br0">(</span><span class="re5">p</span> y &gt; <span class="re0">B</span> y<span class="br0">)</span> | <span class="br0">(</span><span class="re5">p</span> x &gt; <span class="br0">(</span><span class="kw1">self</span> rightmostEndPoint x<span class="br0">)</span><span class="br0">)</span><br>        ifTrue: <span class="br0">[</span> ^false <span class="br0">]</span><br>        ifFalse: <span class="br0">[</span> <span class="br0">(</span><span class="re5">p</span> x &lt; <span class="br0">(</span><span class="kw1">self</span> leftmostEndPoint x<span class="br0">)</span><span class="br0">)</span><br>                     ifTrue: <span class="br0">[</span> ^true <span class="br0">]</span><br>                     ifFalse: <span class="br0">[</span> |<span class="re3">s</span>| <br>                        <span class="re6">s</span> <span class="sy0">:=</span> <span class="re0">Segment</span> new: <span class="br0">{</span> <span class="re0">A</span> . <span class="re5">point</span> <span class="br0">}</span>.<br>			<span class="br0">(</span><span class="re5">s</span> slope<span class="br0">)</span> &gt;<span class="sy0">=</span> <span class="br0">(</span><span class="kw1">self</span> slope<span class="br0">)</span><br>			  ifTrue: <span class="br0">[</span> ^ <span class="kw1">true</span> <span class="br0">]</span><br>                     <span class="br0">]</span><br>                 <span class="br0">]</span>.<br>        ^false<br>    <span class="br0">]</span><br><span class="br0">]</span>.<br>&nbsp;<br><span class="re0">Object</span> subclass: <span class="re0">Polygon</span> <span class="br0">[</span><br>    |<span class="re3">polysegs</span>|<br>    <span class="re0">Polygon</span> class &gt;&gt; new <span class="br0">[</span> |<span class="re3">a</span>| <span class="re6">a</span> <span class="sy0">:=</span> <span class="kw1">super</span> new. ^ a init. <span class="br0">]</span><br>    <span class="re0">Polygon</span> class &gt;&gt; fromSegments: <span class="re5">segments</span> <span class="br0">[</span> |<span class="re3">a</span>|<br>      <span class="re6">a</span> <span class="sy0">:=</span> <span class="kw1">super</span> new.<br>      ^ a initWithSegments: <span class="re5">segments</span><br>    <span class="br0">]</span><br>    <span class="re0">Polygon</span> class &gt;&gt; fromPoints: <span class="re5">pts</span> and: <span class="re5">indexes</span> <span class="br0">[</span> |<span class="re3">a</span>|<br>      <span class="re6">a</span> <span class="sy0">:=</span> <span class="kw1">self</span> new.<br>      <span class="re5">indexes</span> do: <span class="br0">[</span>&nbsp;:<span class="re5">i</span> |<br>        a addSegment: <span class="br0">(</span> <span class="re0">Segment</span> new: <span class="br0">{</span> pts at: <span class="br0">(</span><span class="re5">i</span> at: <span class="re5">1</span><span class="br0">)</span> . <span class="re5">pts</span> at: <span class="br0">(</span><span class="re5">i</span> at: <span class="re5">2</span><span class="br0">)</span> <span class="br0">}</span> <span class="br0">)</span><br>      <span class="br0">]</span>.<br>      ^ a<br>    <span class="br0">]</span><br>    initWithSegments: <span class="re5">segments</span> <span class="br0">[</span><br>      <span class="re5">polysegs</span> <span class="sy0">:=</span> <span class="re5">segments</span> copy. ^self<br>    <span class="br0">]</span><br>    init <span class="br0">[</span> <span class="re5">polysegs</span> <span class="sy0">:=</span> <span class="re0">OrderedCollection</span> new. ^ <span class="kw1">self</span> <span class="br0">]</span><br>    addSegment: <span class="re5">segment</span> <span class="br0">[</span> <span class="re5">polysegs</span> add: <span class="re5">segment</span> <span class="br0">]</span><br>&nbsp;<br>    pointInside: <span class="re5">point</span> <span class="br0">[</span> |<span class="re3">cnt</span>|<br>      <span class="re6">cnt</span> <span class="sy0">:=</span> <span class="re5">0</span>.<br>      <span class="re5">polysegs</span> do: <span class="br0">[</span>&nbsp;:<span class="re5">s</span> | <span class="br0">(</span><span class="re5">s</span> doesIntersectRayFrom: <span class="re5">point</span><span class="br0">)</span><br>                          ifTrue: <span class="br0">[</span> <span class="re5">cnt</span> <span class="sy0">:=</span> <span class="re5">cnt</span> + <span class="re5">1</span> <span class="br0">]</span> <span class="br0">]</span>.<br>      ^ <span class="br0">(</span> <span class="re5">cnt</span> \\ <span class="nu0">2</span> <span class="sy0">=</span> <span class="re5">0</span> <span class="br0">)</span> not<br>    <span class="br0">]</span><br><span class="br0">]</span>.</pre>
<p><b>Testing</b>
</p>
<pre class="smalltalk highlighted_source">|<span class="re3">points names polys</span>|<br>&nbsp;<br><span class="re6">points</span> <span class="sy0">:=</span> <span class="br0">{</span><br>           <span class="nu0">0</span>@0 . <span class="re5">10</span>@0 . <span class="re5">10</span>@10 . <span class="re5">0</span>@10 .<br>           <span class="re5">2</span>.<span class="re5">5</span>@2.<span class="re5">5</span> . <span class="re5">7</span>.<span class="re5">5</span>@2.<span class="re5">5</span> . <span class="re5">7</span>.<span class="re5">5</span>@7.<span class="re5">5</span> .<br>           <span class="re5">2</span>.<span class="re5">5</span>@7.<span class="re5">5</span> . <span class="re5">0</span>@5 . <span class="re5">10</span>@5 .<br>           <span class="re5">3</span>@0 . <span class="re5">7</span>@0 . <span class="re5">7</span>@10 . <span class="re5">3</span>@10<br>          <span class="br0">}</span>.<br>&nbsp;<br><span class="re5">names</span> <span class="sy0">:=</span> <span class="br0">{</span> <span class="st0">'square'</span> . <span class="st0">'square hole'</span> . <span class="st0">'strange'</span> . <span class="st0">'exagon'</span> <span class="br0">}</span>.<br>&nbsp;<br><span class="re5">polys</span> <span class="sy0">:=</span> <span class="re0">OrderedCollection</span> new.<br>&nbsp;<br><span class="re5">polys</span> add:<br>      <span class="br0">(</span> <br>        <span class="re0">Polygon</span> fromPoints: <span class="re5">points</span> <br>                and: <span class="br0">{</span> <span class="br0">{</span><span class="nu0">1</span> . <span class="re5">2</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">2</span> . <span class="re5">3</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">3</span> . <span class="re5">4</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">4</span> . <span class="re5">1</span><span class="br0">}</span> <span class="br0">}</span><br>      <span class="br0">)</span>&nbsp;;<br>      add:<br>      <span class="br0">(</span><br>        <span class="re0">Polygon</span> fromPoints: <span class="re5">points</span> <br>                and: <span class="br0">{</span> <span class="br0">{</span><span class="nu0">1</span> . <span class="re5">2</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">2</span> . <span class="re5">3</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">3</span> . <span class="re5">4</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">4</span> . <span class="re5">1</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">5</span> . <span class="re5">6</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">6</span> . <span class="re5">7</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">7</span> . <span class="re5">8</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">8</span> . <span class="re5">5</span><span class="br0">}</span> <span class="br0">}</span><br>      <span class="br0">)</span>&nbsp;;<br>      add:<br>      <span class="br0">(</span><br>        <span class="re0">Polygon</span> fromPoints: <span class="re5">points</span> <br>                and: <span class="br0">{</span> <span class="br0">{</span><span class="nu0">1</span> . <span class="re5">5</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">5</span> . <span class="re5">4</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">4</span> . <span class="re5">8</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">8</span> . <span class="re5">7</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">7</span> . <span class="re5">3</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">3</span> . <span class="re5">2</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">2</span> . <span class="re5">5</span><span class="br0">}</span> <span class="br0">}</span><br>      <span class="br0">)</span>&nbsp;;<br>      add:<br>      <span class="br0">(</span><br>        <span class="re0">Polygon</span> fromPoints: <span class="re5">points</span> <br>                and: <span class="br0">{</span> <span class="br0">{</span><span class="nu0">11</span> . <span class="re5">12</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">12</span> . <span class="re5">10</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">10</span> . <span class="re5">13</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">13</span> . <span class="re5">14</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">14</span> . <span class="re5">9</span><span class="br0">}</span>. <span class="br0">{</span><span class="nu0">9</span> . <span class="re5">11</span><span class="br0">}</span> <span class="br0">}</span><br>      <span class="br0">)</span>.<br>&nbsp;<br><span class="br0">{</span> <span class="nu0">5</span>@5 . <span class="re5">5</span>@8 . -<span class="re5">10</span>@5 . <span class="re5">0</span>@5 . <span class="re5">10</span>@5 . <span class="re5">8</span>@5 . <span class="re5">10</span>@10 <span class="br0">}</span> <br>do: <span class="br0">[</span>&nbsp;:<span class="re5">p</span> |<br>  <span class="nu0">1</span> to: <span class="re5">4</span> do: <span class="br0">[</span>&nbsp;:<span class="re5">i</span> |<br>   <span class="br0">(</span><span class="st0">'point&nbsp;%1 inside&nbsp;%2?&nbsp;%3'</span>&nbsp;%<br>     <span class="br0">{</span> p . <span class="re5">names</span> at: <span class="re5">i</span>. <span class="br0">(</span><span class="re5">polys</span> at: <span class="re5">i</span><span class="br0">)</span> pointInside: <span class="re5">p</span> <span class="br0">}</span><span class="br0">)</span> displayNl<br>  <span class="br0">]</span>.<br>  <span class="st0">' '</span> displayNl.<br><span class="br0">]</span></pre>
<h2><span class="mw-headline" id="Tcl"><a href="https://rosettacode.org/wiki/Category:Tcl" title="Category:Tcl">Tcl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=33" title="Edit section: Tcl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre class="tcl highlighted_source"><span class="kw2">package</span> require Tcl <span class="nu0">8.5</span><br>&nbsp;<br><span class="kw1">proc</span> point_in_polygon <span class="br0">{</span>point polygon<span class="br0">}</span> <span class="br0">{</span><br>    <span class="kw1">set</span> count <span class="nu0">0</span><br>    <span class="kw1">foreach</span> side <span class="br0">[</span>sides <span class="re0">$polygon</span><span class="br0">]</span> <span class="br0">{</span><br>        <span class="kw1">if</span> <span class="br0">{</span><span class="br0">[</span>ray_intersects_line <span class="re0">$point</span> <span class="re0">$side</span><span class="br0">]</span><span class="br0">}</span> <span class="br0">{</span><br>            <span class="kw2">incr</span> count<br>        <span class="br0">}</span><br>    <span class="br0">}</span><br>    <span class="kw1">expr</span> <span class="br0">{</span><span class="re0">$count</span> <span class="sy0">%</span> <span class="nu0">2</span><span class="br0">}</span> <span class="sy0">;</span><span class="co1">#-- 1 = odd = true, 0 = even = false</span><br><span class="br0">}</span><br><span class="kw1">proc</span> sides polygon <span class="br0">{</span><br>    lassign <span class="re0">$polygon</span> x0 y0<br>    <span class="kw1">foreach</span> <span class="br0">{</span>x y<span class="br0">}</span> <span class="br0">[</span><span class="kw2">lrange</span> <span class="br0">[</span><span class="kw2">lappend</span> polygon <span class="re0">$x0</span> <span class="re0">$y0</span><span class="br0">]</span> <span class="nu0">2</span> end<span class="br0">]</span> <span class="br0">{</span><br>        <span class="kw2">lappend</span> res <span class="br0">[</span><span class="kw2">list</span> <span class="re0">$x0</span> <span class="re0">$y0</span> <span class="re0">$x</span> <span class="re0">$y</span><span class="br0">]</span><br>        <span class="kw1">set</span> x0 <span class="re0">$x</span><br>        <span class="kw1">set</span> y0 <span class="re0">$y</span><br>    <span class="br0">}</span><br>    <span class="kw1">return</span> <span class="re0">$res</span><br><span class="br0">}</span><br><span class="kw1">proc</span> ray_intersects_line <span class="br0">{</span>point line<span class="br0">}</span> <span class="br0">{</span><br>    lassign <span class="re0">$point</span> Px Py<br>    lassign <span class="re0">$line</span> Ax Ay Bx By<br>    <span class="co1"># Reverse line direction if necessary</span><br>    <span class="kw1">if</span> <span class="br0">{</span><span class="re0">$By</span> <span class="sy0">&lt;</span> <span class="re0">$Ay</span><span class="br0">}</span> <span class="br0">{</span><br>	lassign <span class="re0">$line</span> Bx By Ax Ay<br>    <span class="br0">}</span><br>    <span class="co1"># Add epsilon to </span><br>    <span class="kw1">if</span> <span class="br0">{</span><span class="re0">$Py</span> == <span class="re0">$Ay</span> || <span class="re0">$Py</span> == <span class="re0">$By</span><span class="br0">}</span> <span class="br0">{</span><br>	<span class="kw1">set</span> Py <span class="br0">[</span><span class="kw1">expr</span> <span class="br0">{</span><span class="re0">$Py</span> + abs<span class="br0">(</span><span class="re0">$Py</span><span class="br0">)</span>/1e6<span class="br0">}</span><span class="br0">]</span><br>    <span class="br0">}</span><br>    <span class="co1"># Bounding box checks</span><br>    <span class="kw1">if</span> <span class="br0">{</span><span class="re0">$Py</span> <span class="sy0">&lt;</span> <span class="re0">$Ay</span> || <span class="re0">$Py</span> <span class="sy0">&gt;</span> <span class="re0">$By</span> || <span class="re0">$Px</span> <span class="sy0">&gt;</span> max<span class="br0">(</span><span class="re0">$Ax</span>,<span class="re0">$Bx</span><span class="br0">)</span><span class="br0">}</span> <span class="br0">{</span><br>	<span class="kw1">return</span> <span class="nu0">0</span><br>    <span class="br0">}</span> <span class="kw1">elseif</span> <span class="br0">{</span><span class="re0">$Px</span> <span class="sy0">&lt;</span> min<span class="br0">(</span><span class="re0">$Ax</span>,<span class="re0">$Bx</span><span class="br0">)</span><span class="br0">}</span> <span class="br0">{</span><br>	<span class="kw1">return</span> <span class="nu0">1</span><br>    <span class="br0">}</span><br>    <span class="co1"># Compare dot products to compare (cosines of) angles</span><br>    <span class="kw1">set</span> mRed <span class="br0">[</span><span class="kw1">expr</span> <span class="br0">{</span><span class="re0">$Ax</span> <span class="sy0">!</span>= <span class="re0">$Bx</span> <span class="sy0">?</span> <span class="br0">(</span><span class="re0">$By</span>-<span class="re0">$Ay</span><span class="br0">)</span>/<span class="br0">(</span><span class="re0">$Bx</span>-<span class="re0">$Ax</span><span class="br0">)</span>&nbsp;: Inf<span class="br0">}</span><span class="br0">]</span><br>    <span class="kw1">set</span> mBlu <span class="br0">[</span><span class="kw1">expr</span> <span class="br0">{</span><span class="re0">$Ax</span> <span class="sy0">!</span>= <span class="re0">$Px</span> <span class="sy0">?</span> <span class="br0">(</span><span class="re0">$Py</span>-<span class="re0">$Ay</span><span class="br0">)</span>/<span class="br0">(</span><span class="re0">$Px</span>-<span class="re0">$Ax</span><span class="br0">)</span>&nbsp;: Inf<span class="br0">}</span><span class="br0">]</span><br>    <span class="kw1">return</span> <span class="br0">[</span><span class="kw1">expr</span> <span class="br0">{</span><span class="re0">$mBlu</span> <span class="sy0">&gt;</span>= <span class="re0">$mRed</span><span class="br0">}</span><span class="br0">]</span><br><span class="br0">}</span><br>&nbsp;<br><span class="kw1">foreach</span> <span class="br0">{</span>point poly<span class="br0">}</span> <span class="br0">{</span><br>    <span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span><span class="br0">}</span>	<span class="br0">{</span>-<span class="nu0">1</span> -<span class="nu0">1</span>  -<span class="nu0">1</span> <span class="nu0">1</span>  <span class="nu0">1</span> <span class="nu0">1</span>  <span class="nu0">1</span> -<span class="nu0">1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">2</span> <span class="nu0">2</span><span class="br0">}</span>	<span class="br0">{</span>-<span class="nu0">1</span> -<span class="nu0">1</span>  -<span class="nu0">1</span> <span class="nu0">1</span>  <span class="nu0">1</span> <span class="nu0">1</span>  <span class="nu0">1</span> -<span class="nu0">1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span><span class="br0">}</span>	<span class="br0">{</span>-<span class="nu0">2</span> -<span class="nu0">2</span>  -<span class="nu0">2</span> <span class="nu0">2</span>  <span class="nu0">2</span> <span class="nu0">2</span>  <span class="nu0">2</span> -<span class="nu0">2</span>   <span class="nu0">2</span> -<span class="nu0">1</span>  <span class="nu0">1</span> <span class="nu0">1</span>  -<span class="nu0">1</span> <span class="nu0">1</span>  -<span class="nu0">1</span> -<span class="nu0">1</span>  <span class="nu0">1</span> -<span class="nu0">1</span>  <span class="nu0">2</span> -<span class="nu0">1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">1.5</span> <span class="nu0">1.5</span><span class="br0">}</span>	<span class="br0">{</span>-<span class="nu0">2</span> -<span class="nu0">2</span>  -<span class="nu0">2</span> <span class="nu0">2</span>  <span class="nu0">2</span> <span class="nu0">2</span>  <span class="nu0">2</span> -<span class="nu0">2</span>   <span class="nu0">2</span> -<span class="nu0">1</span>  <span class="nu0">1</span> <span class="nu0">1</span>  -<span class="nu0">1</span> <span class="nu0">1</span>  -<span class="nu0">1</span> -<span class="nu0">1</span>  <span class="nu0">1</span> -<span class="nu0">1</span>  <span class="nu0">2</span> -<span class="nu0">1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">5</span> <span class="nu0">5</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span>  <span class="nu0">2.5</span> <span class="nu0">2.5</span>  <span class="nu0">0</span> <span class="nu0">10</span>  <span class="nu0">2.5</span> <span class="nu0">7.5</span>  <span class="nu0">7.5</span> <span class="nu0">7.5</span>  <span class="nu0">10</span> <span class="nu0">10</span>  <span class="nu0">10</span> <span class="nu0">0</span>  <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">5</span> <span class="nu0">8</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span>  <span class="nu0">2.5</span> <span class="nu0">2.5</span>  <span class="nu0">0</span> <span class="nu0">10</span>  <span class="nu0">2.5</span> <span class="nu0">7.5</span>  <span class="nu0">7.5</span> <span class="nu0">7.5</span>  <span class="nu0">10</span> <span class="nu0">10</span>  <span class="nu0">10</span> <span class="nu0">0</span>  <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">2</span> <span class="nu0">2</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span>  <span class="nu0">2.5</span> <span class="nu0">2.5</span>  <span class="nu0">0</span> <span class="nu0">10</span>  <span class="nu0">2.5</span> <span class="nu0">7.5</span>  <span class="nu0">7.5</span> <span class="nu0">7.5</span>  <span class="nu0">10</span> <span class="nu0">10</span>  <span class="nu0">10</span> <span class="nu0">0</span>  <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span>  <span class="nu0">2.5</span> <span class="nu0">2.5</span>  <span class="nu0">0</span> <span class="nu0">10</span>  <span class="nu0">2.5</span> <span class="nu0">7.5</span>  <span class="nu0">7.5</span> <span class="nu0">7.5</span>  <span class="nu0">10</span> <span class="nu0">10</span>  <span class="nu0">10</span> <span class="nu0">0</span>  <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">10</span> <span class="nu0">10</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span>  <span class="nu0">2.5</span> <span class="nu0">2.5</span>  <span class="nu0">0</span> <span class="nu0">10</span>  <span class="nu0">2.5</span> <span class="nu0">7.5</span>  <span class="nu0">7.5</span> <span class="nu0">7.5</span>  <span class="nu0">10</span> <span class="nu0">10</span>  <span class="nu0">10</span> <span class="nu0">0</span>  <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">}</span><br>    <span class="br0">{</span><span class="nu0">2.5</span> <span class="nu0">2.5</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">0</span> <span class="nu0">0</span>  <span class="nu0">2.5</span> <span class="nu0">2.5</span>  <span class="nu0">0</span> <span class="nu0">10</span>  <span class="nu0">2.5</span> <span class="nu0">7.5</span>  <span class="nu0">7.5</span> <span class="nu0">7.5</span>  <span class="nu0">10</span> <span class="nu0">10</span>  <span class="nu0">10</span> <span class="nu0">0</span>  <span class="nu0">7.5</span> <span class="nu0">0.1</span><span class="br0">}</span><br>    <span class="br0">{</span>-<span class="nu0">5</span> <span class="nu0">5</span><span class="br0">}</span>	<span class="br0">{</span><span class="nu0">3</span> <span class="nu0">0</span>  <span class="nu0">7</span> <span class="nu0">0</span>  <span class="nu0">10</span> <span class="nu0">5</span>  <span class="nu0">7</span> <span class="nu0">10</span>  <span class="nu0">3</span> <span class="nu0">10</span>  <span class="nu0">0</span> <span class="nu0">5</span><span class="br0">}</span><br><span class="br0">}</span> <span class="br0">{</span><br>    <span class="kw2">puts</span> <span class="st0">"$point in $poly = [point_in_polygon $point $poly]"</span><br><span class="br0">}</span></pre>
<h2><span class="mw-headline" id="Ursala"><a href="https://rosettacode.org/wiki/Category:Ursala" title="Category:Ursala">Ursala</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=34" title="Edit section: Ursala">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This function takes a point <span><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML">
<semantics>
<mrow class="MJX-TeXAtom-ORD">
<mstyle displaystyle="true" scriptlevel="0">
<mo stretchy="false">(</mo>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo stretchy="false">)</mo>
</mstyle>
</mrow>
<annotation encoding="application/x-tex">{\displaystyle (x,y)}</annotation>
</semantics>
</math></span><meta class="mwe-math-fallback-image-inline" aria-hidden="true" style="background-image: url(&#39;/mw/index.php?title=Special:MathShowImage&amp;hash=90cbc22edf225adf8a68974f51227f05&amp;mode=mathml&#39;); background-repeat: no-repeat; background-size: 100% 100%; vertical-align: -0.838ex;height: 2.843ex; width: 5.381ex;"></span> and a polygon <span><span class="mwe-math-mathml-inline mwe-math-mathml-a11y" style="display: none;"><math xmlns="http://www.w3.org/1998/Math/MathML">
<semantics>
<mrow class="MJX-TeXAtom-ORD">
<mstyle displaystyle="true" scriptlevel="0">
<mo fence="false" stretchy="false">⟨</mo>
<mo stretchy="false">(</mo>
<msub>
<mi>x</mi>
<mrow class="MJX-TeXAtom-ORD">
<mn>1</mn>
</mrow>
</msub>
<mo>,</mo>
<msub>
<mi>y</mi>
<mrow class="MJX-TeXAtom-ORD">
<mn>1</mn>
</mrow>
</msub>
<mo stretchy="false">)</mo>
<mo>…</mo>
<mo stretchy="false">(</mo>
<msub>
<mi>x</mi>
<mrow class="MJX-TeXAtom-ORD">
<mi>n</mi>
</mrow>
</msub>
<mo>,</mo>
<msub>
<mi>y</mi>
<mrow class="MJX-TeXAtom-ORD">
<mi>n</mi>
</mrow>
</msub>
<mo stretchy="false">)</mo>
<mo fence="false" stretchy="false">⟩</mo>
</mstyle>
</mrow>
<annotation encoding="application/x-tex">{\displaystyle \langle (x_{1},y_{1})\dots (x_{n},y_{n})\rangle }</annotation>
</semantics>
</math></span><meta class="mwe-math-fallback-image-inline" aria-hidden="true" style="background-image: url(&#39;/mw/index.php?title=Special:MathShowImage&amp;hash=5b0e35044694c1092f1296317fc77dd8&amp;mode=mathml&#39;); background-repeat: no-repeat; background-size: 100% 100%; vertical-align: -0.838ex;height: 2.843ex; width: 20.642ex;"></span>
to a true value if the point is enclosed by the polygon and a false
value if it's outside, using the algorithm described above.
For points on the boundary the result is unspecified.
</p>
<pre class="text highlighted_source">#import flo<br>&nbsp;<br>in =<br>&nbsp;<br>@lrzyCipPX ~|afatPRZaq ~&amp;EZ+fleq~~lrPrbr2G&amp;&amp; ~&amp;B+fleq~~lrPrbl2G!| -&amp;<br>   ~&amp;Y+ ~~lrPrbl2G fleq,<br>   ^E(fleq@lrrPX,@rl fleq\0.)^/~&amp;lr ^(~&amp;r,times)^/minus@llPrll2X vid+ minus~~rbbI&amp;-</pre>
<p>This test program tries it on a couple of examples.
</p>
<pre class="text highlighted_source">#cast&nbsp;%bL<br>&nbsp;<br>examples = <br>&nbsp;<br>in* &lt;<br>   ((0.5,0.6),&lt;(0.,0.),(1.,2.),(1.,0.)&gt;),<br>   ((0.5,0.6),&lt;(0.,0.),(1.,1.),(1.,0.)&gt;)&gt;</pre>
<p>output:
</p>
<pre>&lt;true,false&gt;</pre>
<h2><span class="mw-headline" id="Visual_Basic_.NET"><a href="https://rosettacode.org/wiki/Category:Visual_Basic_.NET" title="Category:Visual Basic .NET">Visual Basic .NET</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=35" title="Edit section: Visual Basic .NET">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Java">Java</a></div>
<pre class="vbnet highlighted_source"><span class="kw1">Imports</span> System<span class="sy0">.</span><span class="me1">Math</span><br>&nbsp;<br><span class="kw1">Module</span> RayCasting<br>&nbsp;<br>    <span class="kw1">Private</span> square <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">{</span><span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">20</span><span class="br0">}</span><span class="br0">}</span><br>    <span class="kw1">Private</span> squareHole <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">{</span><span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">5</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">15</span>, <span class="nu0">5</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">15</span>, <span class="nu0">15</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">15</span><span class="br0">}</span><span class="br0">}</span><br>    <span class="kw1">Private</span> strange <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">{</span><span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">5</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">5</span>, <span class="nu0">15</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">15</span>, <span class="nu0">15</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">0</span><span class="br0">}</span><span class="br0">}</span><br>    <span class="kw1">Private</span> hexagon <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">{</span><span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">6</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">14</span>, <span class="nu0">0</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">14</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">6</span>, <span class="nu0">20</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">10</span><span class="br0">}</span><span class="br0">}</span><br>    <span class="kw1">Private</span> shapes <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">{</span>square, squareHole, strange, hexagon<span class="br0">}</span><br>&nbsp;<br>    <span class="kw1">Public</span> <span class="kw1">Sub</span> Main<span class="br0">(</span><span class="br0">)</span><br>        <span class="kw1">Dim</span> testPoints <span class="kw1">As</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">=</span> <span class="br0">{</span><span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">10</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">10</span>, <span class="nu0">16</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="sy0">-</span><span class="nu0">20</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">0</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">16</span>, <span class="nu0">10</span><span class="br0">}</span>, <span class="kw1">New</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">}</span><span class="br0">}</span><br>&nbsp;<br>        <span class="kw1">For</span> <span class="kw1">Each</span> shape <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">In</span> shapes<br>            <span class="kw1">For</span> <span class="kw1">Each</span> point <span class="kw1">As</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">In</span> testPoints<br>                Console<span class="sy0">.</span><span class="me1">Write</span><span class="br0">(</span><span class="kw2">String</span><span class="sy0">.</span><a href="http://www.google.com/search?q=FORMAT+site:msdn.microsoft.com"><span class="kw7">Format</span></a><span class="br0">(</span><span class="st0">"{0} "</span>, Contains<span class="br0">(</span>shape, point<span class="br0">)</span><span class="sy0">.</span><span class="me1">ToString</span><span class="sy0">.</span><span class="me1">PadLeft</span><span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><br>            <span class="kw1">Next</span><br>            Console<span class="sy0">.</span><span class="me1">WriteLine</span><span class="br0">(</span><span class="br0">)</span><br>        <span class="kw1">Next</span><br>    <span class="kw1">End</span> <span class="kw1">Sub</span><br>&nbsp;<br>    <span class="kw1">Private</span> <span class="kw1">Function</span> Contains<span class="br0">(</span>shape <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">(</span><span class="br0">)</span>, point <span class="kw1">As</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">As</span> <span class="kw2">Boolean</span><br>&nbsp;<br>        <span class="kw1">Dim</span> inside <span class="kw1">As</span> <span class="kw2">Boolean</span> <span class="sy0">=</span> <span class="kw1">False</span><br>        <span class="kw1">Dim</span> length <span class="kw1">As</span> <span class="kw2">Integer</span> <span class="sy0">=</span> shape<span class="sy0">.</span><span class="me1">Length</span><br>&nbsp;<br>        <span class="kw1">For</span> i <span class="kw1">As</span> <span class="kw2">Integer</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="kw1">To</span> length <span class="sy0">-</span> <span class="nu0">1</span><br>            <span class="kw1">If</span> Intersects<span class="br0">(</span>shape<span class="br0">(</span>i<span class="br0">)</span>, shape<span class="br0">(</span><span class="br0">(</span>i <span class="sy0">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Mod</span> length<span class="br0">)</span>, point<span class="br0">)</span> <span class="kw1">Then</span><br>                inside <span class="sy0">=</span> <span class="kw1">Not</span> inside<br>            <span class="kw1">End</span> <span class="kw1">If</span><br>        <span class="kw1">Next</span><br>&nbsp;<br>        <span class="kw1">Return</span> inside<br>    <span class="kw1">End</span> <span class="kw1">Function</span><br>&nbsp;<br>    <span class="kw1">Private</span> <span class="kw1">Function</span> Intersects<span class="br0">(</span>a <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span>, b <span class="kw1">As</span> <span class="kw2">Integer</span><span class="br0">(</span><span class="br0">)</span>, p <span class="kw1">As</span> <span class="kw2">Double</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">As</span> <span class="kw2">Boolean</span><br>&nbsp;<br>        <span class="kw1">If</span> a<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">&gt;</span> b<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Return</span> Intersects<span class="br0">(</span>b, a, p<span class="br0">)</span><br>        <span class="kw1">If</span> p<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">=</span> a<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Or</span> p<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">=</span> b<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Then</span> p<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">+=</span> <span class="nu0">0.0001</span><br>        <span class="kw1">If</span> p<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">&gt;</span> b<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Or</span> p<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">&lt;</span> a<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="kw1">Or</span> p<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> <span class="sy0">&gt;</span> Max<span class="br0">(</span>a<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>, b<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Return</span> <span class="kw1">False</span><br>        <span class="kw1">If</span> p<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> <span class="sy0">&lt;</span> Min<span class="br0">(</span>a<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span>, b<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">Then</span> <span class="kw1">Return</span> <span class="kw1">True</span><br>        <span class="kw1">Dim</span> red <span class="kw1">As</span> <span class="kw2">Double</span> <span class="sy0">=</span> <span class="br0">(</span>p<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">-</span> a<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>p<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> <span class="sy0">-</span> a<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><br>        <span class="kw1">Dim</span> blue <span class="kw1">As</span> <span class="kw2">Double</span> <span class="sy0">=</span> <span class="br0">(</span>b<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="sy0">-</span> a<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span> <span class="sy0">/</span> <span class="br0">(</span>b<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span> <span class="sy0">-</span> a<span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span><br>&nbsp;<br>        <span class="kw1">Return</span> red <span class="sy0">&gt;=</span> blue<br>    <span class="kw1">End</span> <span class="kw1">Function</span><br><span class="kw1">End</span> <span class="kw1">Module</span></pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>   True    True   False   False    True    True   False
  False    True   False   False    True    True   False
   True   False   False   False    True    True   False
   True    True   False   False    True    True   False
</pre>
<h2><span class="mw-headline" id="zkl"><a href="https://rosettacode.org/wiki/Category:Zkl" title="Category:Zkl">zkl</a></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=edit&amp;section=36" title="Edit section: zkl">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="examplemeta translation"><b>Translation of</b>: <a href="https://rosettacode.org/wiki/Ray-casting_algorithm#Perl_6">Perl 6</a></div>
<pre class="text highlighted_source">const E = 0.0001;<br>&nbsp;<br>fcn rayHitsSeg([(Px,Py)],[(Ax,Ay)],[(Bx,By)]){ // --&gt; Bool<br>   if(Py==Ay or Py==By) Py+=E;<br>   if(Py&lt;Ay or Py&gt;By or Px&gt;Ax.max(Bx)) False<br>   else if(Px&lt;Ax.min(Bx))              True<br>   else try{ ( (Py - Ay)/(Px - Ax) )&gt;=( (By - Ay)/(Bx - Ax) ) } //blue&gt;=red<br>        catch(MathError){ Px==Ax } // divide by zero == ∞, only blue?<br>}<br>&nbsp;<br>fcn pointInPoly(point, polygon){ // --&gt; Bool, polygon is ( (a,b),(c,d).. )<br>   polygon.filter('wrap([(ab,cd)]){ a,b:=ab; c,d:=cd;<br>      if(b&lt;=d) rayHitsSeg(point,ab,cd); // left point has smallest y coordinate<br>      else     rayHitsSeg(point,cd,ab);<br>   })<br>   .len().isOdd; // True if crossed an odd number of borders ie inside polygon<br>}</pre>
<pre class="text highlighted_source">polys:=T( //(name,( ((a,b),(c,d)),((a,b),(c,d))... ), ... )==(nm,(ln,ln..) ..)<br>    T("squared",<br>	T(T(T( 0.0,  0.0), T(10.0,  0.0)),<br>	  T(T(10.0,  0.0), T(10.0, 10.0)),<br>	  T(T(10.0, 10.0), T( 0.0, 10.0)),<br>	  T(T( 0.0, 10.0), T( 0.0,  0.0)))),<br>    T("squaredhole",<br>	T(T(T( 0.0,  0.0), T(10.0,  0.0)),<br>	  T(T(10.0,  0.0), T(10.0, 10.0)),<br>	  T(T(10.0, 10.0), T( 0.0, 10.0)),<br>	  T(T( 0.0, 10.0), T( 0.0,  0.0)),<br>	  T(T( 2.5,  2.5), T( 7.5,  2.5)),<br>	  T(T( 7.5,  2.5), T( 7.5,  7.5)),<br>	  T(T( 7.5,  7.5), T( 2.5,  7.5)),<br>	  T(T( 2.5,  7.5), T( 2.5,  2.5)))),<br>    T("strange",<br>	T(T(T( 0.0,  0.0), T( 2.5,  2.5)),<br>	  T(T( 2.5,  2.5), T( 0.0, 10.0)),<br>	  T(T( 0.0, 10.0), T( 2.5,  7.5)),<br>	  T(T( 2.5,  7.5), T( 7.5,  7.5)),<br>	  T(T( 7.5,  7.5), T(10.0, 10.0)),<br>	  T(T(10.0, 10.0), T(10.0,  0.0)),<br>	  T(T(10.0,  0.0), T( 2.5,  2.5)),<br>	  T(T( 2.5,  2.5), T( 0.0,  0.0)))),  # conjecturally close polygon<br>    T("exagon",<br>	T(T(T( 3.0,  0.0), T( 7.0,  0.0)),<br>	  T(T( 7.0,  0.0), T(10.0,  5.0)),<br>	  T(T(10.0,  5.0), T( 7.0, 10.0)),<br>	  T(T( 7.0, 10.0), T( 3.0, 10.0)),<br>	  T(T( 3.0, 10.0), T( 0.0,  5.0)),<br>	  T(T( 0.0,  5.0), T( 3.0,  0.0)))),<br>);<br>&nbsp;<br>testPoints:=T(<br>	  T(  5.0,  5.0),<br>	  T(  5.0,  8.0),<br>	  T(-10.0,  5.0),<br>	  T(  0.0,  5.0),<br>	  T( 10.0,  5.0),<br>	  T(  8.0,  5.0),<br>	  T( 10.0, 10.0)<br>);<br>&nbsp;<br>foreach name,polywanna in (polys){<br>   name.println();<br>   foreach testPoint in (testPoints){<br>      println("\t(%6.1f,%6.1f)\t".fmt(testPoint.xplode()),<br>         pointInPoly(testPoint,polywanna) and "IN" or "OUT");<br>   }<br>}</pre>
<div>
<dl><dt>Output:</dt></dl></div>
<pre>squared
	(   5.0,   5.0)	IN
	(   5.0,   8.0)	IN
	( -10.0,   5.0)	OUT
	(   0.0,   5.0)	OUT
	(  10.0,   5.0)	IN
	(   8.0,   5.0)	IN
	(  10.0,  10.0)	OUT
squaredhole
	(   5.0,   5.0)	OUT
	(   5.0,   8.0)	IN
	( -10.0,   5.0)	OUT
	(   0.0,   5.0)	OUT
	(  10.0,   5.0)	IN
	(   8.0,   5.0)	IN
	(  10.0,  10.0)	OUT
strange
	(   5.0,   5.0)	IN
	(   5.0,   8.0)	OUT
	( -10.0,   5.0)	OUT
	(   0.0,   5.0)	OUT
	(  10.0,   5.0)	IN
	(   8.0,   5.0)	IN
	(  10.0,  10.0)	OUT
exagon
	(   5.0,   5.0)	IN
	(   5.0,   8.0)	IN
	( -10.0,   5.0)	OUT
	(   0.0,   5.0)	OUT
	(  10.0,   5.0)	IN
	(   8.0,   5.0)	IN
	(  10.0,  10.0)	OUT
</pre>



</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;oldid=262596">https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;oldid=262596</a>"</div>
</div>

<div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://rosettacode.org/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://rosettacode.org/wiki/Category:Programming_Tasks" title="Category:Programming Tasks">Programming Tasks</a></li><li><a href="https://rosettacode.org/wiki/Category:Classic_CS_problems_and_programs" title="Category:Classic CS problems and programs">Classic CS problems and programs</a></li><li><a href="https://rosettacode.org/wiki/Category:WikipediaSourced" title="Category:WikipediaSourced">WikipediaSourced</a></li><li><a href="https://rosettacode.org/wiki/Category:Ada" title="Category:Ada">Ada</a></li><li><a href="https://rosettacode.org/mw/index.php?title=Category:ANSI_Standard_BASIC&amp;action=edit&amp;redlink=1" class="new" title="Category:ANSI Standard BASIC (page does not exist)">ANSI Standard BASIC</a></li><li><a href="https://rosettacode.org/wiki/Category:AutoHotkey" title="Category:AutoHotkey">AutoHotkey</a></li><li><a href="https://rosettacode.org/wiki/Category:C" title="Category:C">C</a></li><li><a href="https://rosettacode.org/wiki/Category:C%2B%2B" title="Category:C++">C++</a></li><li><a href="https://rosettacode.org/wiki/Category:CoffeeScript" title="Category:CoffeeScript">CoffeeScript</a></li><li><a href="https://rosettacode.org/wiki/Category:Common_Lisp" title="Category:Common Lisp">Common Lisp</a></li><li><a href="https://rosettacode.org/wiki/Category:D" title="Category:D">D</a></li><li><a href="https://rosettacode.org/wiki/Category:Factor" title="Category:Factor">Factor</a></li><li><a href="https://rosettacode.org/wiki/Category:Fortran" title="Category:Fortran">Fortran</a></li><li><a href="https://rosettacode.org/wiki/Category:FreeBASIC" title="Category:FreeBASIC">FreeBASIC</a></li><li><a href="https://rosettacode.org/wiki/Category:Go" title="Category:Go">Go</a></li><li><a href="https://rosettacode.org/wiki/Category:Haskell" title="Category:Haskell">Haskell</a></li><li><a href="https://rosettacode.org/wiki/Category:J" title="Category:J">J</a></li><li><a href="https://rosettacode.org/wiki/Category:Java" title="Category:Java">Java</a></li><li><a href="https://rosettacode.org/wiki/Category:JavaScript" title="Category:JavaScript">JavaScript</a></li><li><a href="https://rosettacode.org/wiki/Category:Julia" title="Category:Julia">Julia</a></li><li><a href="https://rosettacode.org/wiki/Category:Kotlin" title="Category:Kotlin">Kotlin</a></li><li><a href="https://rosettacode.org/wiki/Category:Liberty_BASIC" title="Category:Liberty BASIC">Liberty BASIC</a></li><li><a href="https://rosettacode.org/wiki/Category:OCaml" title="Category:OCaml">OCaml</a></li><li><a href="https://rosettacode.org/wiki/Category:Perl" title="Category:Perl">Perl</a></li><li><a href="https://rosettacode.org/wiki/Category:Perl_6" title="Category:Perl 6">Perl 6</a></li><li><a href="https://rosettacode.org/wiki/Category:Phix" title="Category:Phix">Phix</a></li><li><a href="https://rosettacode.org/wiki/Category:PicoLisp" title="Category:PicoLisp">PicoLisp</a></li><li><a href="https://rosettacode.org/wiki/Category:PureBasic" title="Category:PureBasic">PureBasic</a></li><li><a href="https://rosettacode.org/wiki/Category:Python" title="Category:Python">Python</a></li><li><a href="https://rosettacode.org/wiki/Category:R" title="Category:R">R</a></li><li><a href="https://rosettacode.org/wiki/Category:Racket" title="Category:Racket">Racket</a></li><li><a href="https://rosettacode.org/wiki/Category:REXX" title="Category:REXX">REXX</a></li><li><a href="https://rosettacode.org/wiki/Category:Rust" title="Category:Rust">Rust</a></li><li><a href="https://rosettacode.org/wiki/Category:Scala" title="Category:Scala">Scala</a></li><li><a href="https://rosettacode.org/wiki/Category:Smalltalk" title="Category:Smalltalk">Smalltalk</a></li><li><a href="https://rosettacode.org/wiki/Category:Tcl" title="Category:Tcl">Tcl</a></li><li><a href="https://rosettacode.org/wiki/Category:Ursala" title="Category:Ursala">Ursala</a></li><li><a href="https://rosettacode.org/wiki/Category:Visual_Basic_.NET" title="Category:Visual Basic .NET">Visual Basic .NET</a></li><li><a href="https://rosettacode.org/wiki/Category:Zkl" title="Category:Zkl">Zkl</a></li><li><a href="https://rosettacode.org/wiki/Category:Lilypond/Omit" title="Category:Lilypond/Omit">Lilypond/Omit</a></li><li><a href="https://rosettacode.org/wiki/Category:Geometry" title="Category:Geometry">Geometry</a></li></ul></div></div>
</div>
</div>
</div>
<div class="row">
<div class="col-lg-12">

<nav class="navbar navbar-default p-tb " id="p-tb">
<ul class="nav navbar-nav small">
<li id="t-whatlinkshere"><a href="https://rosettacode.org/wiki/Special:WhatLinksHere/Ray-casting_algorithm" title="A list of all wiki pages that link here [alt-shift-j]" accesskey="j">What links here</a></li>
<li id="t-recentchangeslinked"><a href="https://rosettacode.org/wiki/Special:RecentChangesLinked/Ray-casting_algorithm" title="Recent changes in pages linked from this page [alt-shift-k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="https://rosettacode.org/wiki/Special:SpecialPages" title="A list of all special pages [alt-shift-q]" accesskey="q">Special pages</a></li>
<li id="t-print"><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;printable=yes" rel="alternate" title="Printable version of this page [alt-shift-p]" accesskey="p">Printable version</a></li>
<li id="t-permalink"><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;oldid=262596" title="Permanent link to this revision of the page">Permanent link</a></li>
<li id="t-info"><a href="https://rosettacode.org/mw/index.php?title=Ray-casting_algorithm&amp;action=info" title="More information about this page">Page information</a></li>
<li id="t-smwbrowselink"><a href="https://rosettacode.org/wiki/Special:Browse/Ray-2Dcasting_algorithm" rel="smw-browse">Browse properties</a></li>
</ul>
</nav>
</div>
</div>
<div class="row">
<div class="col-lg-12">

<ul class="footer-info list-unstyled small" id="footer-info">

<li> This page was last modified on 8 May 2018, at 18:56.</li>
<li>Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/licenses/fdl-1.2.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
</ul>
</div>
</div>
<div class="row">
<div class="col-lg-6">

<ul class="list-inline footer-places " id="footer-places">
<li><small><a href="https://rosettacode.org/wiki/Rosetta_Code:Privacy_policy" title="Rosetta Code:Privacy policy">Privacy policy</a></small></li>
<li><small><a href="https://rosettacode.org/wiki/Rosetta_Code:About" title="Rosetta Code:About">About Rosetta Code</a></small></li>
<li><small><a href="https://rosettacode.org/wiki/Rosetta_Code:General_disclaimer" title="Rosetta Code:General disclaimer">Disclaimers</a></small></li>
</ul>
</div>
<div class="col-lg-6">

<ul class="list-inline pull-right footer-icons " id="footer-icons">

<li><a href="http://www.gnu.org/licenses/fdl-1.2.html"><img src="./Ray-casting algorithm - Rosetta Code_files/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31"></a></li>

<li><a href="https://www.mediawiki.org/"><img src="./Ray-casting algorithm - Rosetta Code_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/mw/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /mw/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"></a></li>
<li><a href="https://www.semantic-mediawiki.org/wiki/Semantic_MediaWiki"><img src="./Ray-casting algorithm - Rosetta Code_files/smw_button.png" alt="Powered by Semantic MediaWiki" width="88" height="31"></a></li>
</ul>
</div>
</div>
</div><script type="text/javascript">window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["ext.math.scripts","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.bootstrap.scripts"]);
} );</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-1219419-1"]);
  _gaq.push(["_trackPageview"]);

  (function() {
    var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
    ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
    var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript">window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":668});
} );</script>
<div class="suggestions" style="display: none; font-size: 14px;"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>